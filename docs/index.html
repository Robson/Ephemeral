<!DOCTYPE html>
<html lang="en">
	<head>
		<title>00:37 29-Jun - Ephemeral</title>		
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="https://d3js.org/d3.v3.min.js"></script>
		<meta http-equiv="refresh" content="1800">
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik&display=swap"> 		
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;500&display=swap"> 	
		<link rel="stylesheet" type="text/css" href="style.css" />
	</head>
	<body>
		<div id="container">
		</div>
		<div id="tt" style="display: none">
			<p id="tooltip_text"></p>
		</div>
		<div id="cls">&nbsp;</div>
		<script>

////////////////////////////////////////////////// tooltips

            var tooltip = d3.select('#tt');
            var tt = d3.select('#tt');

            function setTooltip(value) {
				d3.select('#tooltip_text').html(value);
            }

            function createTooltipTriggers() {
                d3.selectAll('.ttt')
                    .on("mouseover", function (d, i) {
                        setTooltip(d3.selectAll('.ttt')[0][i].attributes['data-tt'].value);
                    })
                    .on("mouseout", function () {
                        tt.style('display', 'none');
                    })
					.on("mousemove", function () {
                        if (x <= 0 || y <= 0) {
                            tt.style('display', 'none');
                        } else {
                            tt.style('display', null);
                        }
                        var x = d3.event.pageX - (tt.node().getBoundingClientRect().width / 2);
                        var y = d3.event.pageY - (tt.node().getBoundingClientRect().height + 5);
                        tt.style('left', ~~x + 'px');
                        tt.style('top', ~~y + 'px');

                    });
			}

////////////////////////////////////////////////// charts

            function map(n, a, b, y, z) {
                return (n - a) * (z - y) / (b - a) + y;
			}

			function createLineChart(width, height, element, data, boundary = 0) {
                var svg = element
                    .append('svg')
                    .attr('width', width + 'px')
                    .attr('height', height + 'px');

                var start = Math.min(...data.map(a => a.number));
				var end = Math.max(...data.map(a => a.number));

				switch (boundary) {
					case 1:
						var distance = (end - start) * 0.1;
						start -= distance;
						start = Math.max(0, start);
						end += distance;
						break;
					case 2:
						start = 0;
						break;
				}

				var xs = [];
				var ys = [];

                for (var i = 1; i <= data.length; i++) {
                    var x1 = map(i - 1, 0, data.length - 1, 3, width - 3);
					var y1 = map(data[i - 1].number, start, end, height, 6);
					xs.push(x1);
					ys.push(y1);
				}

				var area = d3.svg.area()
					.interpolate('cardinal')
					.x(function (d, i) { return xs[i] })
					.y0(function (d, i) { return height })
					.y1(function (d, i) { return ys[i] });

				svg
					.append('path')
                    .datum(d3.range(data.length).map(function(d, i) { return i }))
					.attr("d", area)
					.attr('fill', '#eee');

                var line = d3.svg.line()
                    .interpolate('cardinal')
                    .x(function (d, i) { return xs[i] })
                    .y(function (d, i) { return ys[i] });

                svg
                    .append('path')
                    .datum(d3.range(data.length).map(function (d, i) { return i }))
                    .attr("d", line)
					.attr('fill', 'transparent')
					.style('stroke-width', 2)
					.style('stroke', '#bbb');

				for (var i = 1; i <= data.length; i++) {
					var x1 = map(i - 1, 0, data.length - 1, 3, width - 3);
                    var x2 = map(i, 0, data.length - 1, 3, width - 3);
                    var y1 = map(data[i - 1].number, start, end, height, 6);
                    var g = svg
                        .append('g')
                        .attr('class', 'group');
                    g
						.append('circle')
						.attr('class', 'highlight')
                        .attr('cx', x1)
                        .attr('cy', y1 - 0.5)
                        .attr('r', 1)
						.attr('title', data[i - 1].number);
					g
						.append('rect')
						.attr('class', 'ttt')
						.attr('width', x2 - x1)
						.attr('height', height)
						.attr('x', (x1) - ((x2 - x1) / 2))
						.attr('y', 0)
						.attr('data-tt', data[i - 1].tooltip)
						.attr('style', 'fill:transparent');
                    /*g
                        .append('circle')
                        .attr('class', 'ttt')
                        .attr('cx', x1)
                        .attr('cy', y1 - 0.5)
                        .attr('r', 4)
                        .attr('opacity', '0.01')
                        .attr('z-index', 1000)
                        .attr('data-tt', data[i - 1].tooltip);*/
				}

                svg
                    .append('line')
                    .attr('x1', 3)
                    .attr('y1', height)
                    .attr('x2', width - 3)
                    .attr('y2', height)
                    .style('stroke-width', 2)
                    .style('stroke', '#bbb');
            }

////////////////////////////////////////////////// page
					
			var inside = 210;
			var padding = 8;
			var length = padding + inside + padding;
			var columns;
			var offsetX;
			var offsetY;
			var filled = [,];
			var low = 0;
			var modules = [];
								
			function random(start, end) {
				return start + Math.floor(Math.random() * (end - start));
			}
			
			function makeBox(width, height) {			
				var startX = 0, startY = 0;
				var hasLocation = false;
				for (var a = 0; a + height < filled.length && !hasLocation; a++) {
					for (var b = 0; b + width <= columns && !hasLocation; b++) {					
						var isValid = true;
						for (var c = 0; c < height && isValid; c++) {
							for (var d = 0; d < width && isValid; d++) {
								if (filled[a + c][b + d] > 0) {
									isValid = false;
								}
							}
						}
						if (isValid) {
							hasLocation = true;							
							startX = b;
							startY = a;
						}						
					}
				}				
				if (hasLocation) {
					for (var c = startY; c < startY + height && isValid; c++) {
						for (var d = startX; d < startX + width && isValid; d++) {
							filled[c][d] = 1;
						}
					}
					low = Math.max(low, offsetY + (startY * length) + ((height * length) - (padding * 2)));				
					return d3
						.select('#container')
						.append('div')
						.attr('class', 'box')
						.style('top', offsetY + startY * length + 'px')
						.style('left', offsetX + startX * length + 'px')						
						.style('width', ((width * length) - (padding * 2)) + 'px')
						.style('height', ((height * length) - (padding * 2)) + 'px');
				}
			}
			
			function createPage() {
				low = 0;
				d3.selectAll('.box').remove();
				var docWidth = document.body.clientWidth;		
				columns = ~~((docWidth - 20) / length);
				columns = Math.min(7, columns);
				offsetX = ((docWidth - (columns * length)) / 2) + 5;				
				offsetY = 100;
				for (var a = 0; a < 50; a++) {
					filled[a] = new Array(columns);
					for (var b = 0; b < columns; b++) {
						filled[a][b] = 0;
					}
				}
				for (var func of modules) {
					func();
				}
				d3
					.select('#cls')
					.style('top', (low) + 'px')
					.style('height', ((padding * 2) + offsetY) + 'px');
				createTooltipTriggers();
			}
			
			d3.select(window).on('resize', createPage);

////////////////////////////////////////////////// boxes
			
modules.push(function bbcCombine() {
	var html = '<table style="margin:0 10px"><tr><td style="vertical-align:top"><b>UK</b><br/><ul><li class="ttt" data-tt="<b>NHS staff sickness hits record high in England</b><br/>The equivalent of 75,000 staff are lost to illness, as the absence rate jumps 29% since before the pandemic." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/health-66047270?at_medium=RSS&amp;at_campaign=KARANGA">NHS staff sickness hits record high in England</a></li><li class="ttt" data-tt="<b>Package holidays in Greece, Spain and Turkey soar in price</b><br/>All-inclusive deals for some parts of Spain and Greece are more than 20% more expensive this year."><a href="https://www.bbc.co.uk/news/business-66042289?at_medium=RSS&amp;at_campaign=KARANGA">Package holidays in Greece, Spain and Turkey soar in price</a></li><li class="ttt" data-tt="<b>Heating down but spending up for royal finances</b><br/>Royal residences have the heating kept at 19C, as spending rises to almost £108m, annual accounts show."><a href="https://www.bbc.co.uk/news/uk-66045447?at_medium=RSS&amp;at_campaign=KARANGA">Heating down but spending up for royal finances</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/health-66047270?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/119E9/production/_124796127_gettyimages-1286402730.jpg" class="ttt" data-tt="Three nurses walk along a ward" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>US & Canada</b><br/><ul><li class="ttt" data-tt="<b>Titanic tourist sub photos show wreckage being brought ashore</b><br/>Pieces of the submersible are seen for the first time after being recovered from the Atlantic." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/world-us-canada-66045554?at_medium=RSS&amp;at_campaign=KARANGA">Titanic tourist sub photos show wreckage being brought ashore</a></li><li class="ttt" data-tt="<b>Human remains thought to be found in Titan sub debris</b><br/>US medical professionals will conduct a formal analysis of presumed remains, the coast guard said."><a href="https://www.bbc.co.uk/news/world-us-canada-66049789?at_medium=RSS&amp;at_campaign=KARANGA">Human remains thought to be found in Titan sub debris</a></li><li class="ttt" data-tt="<b>Madonna postpones tour after intensive care stay</b><br/>The singer, 64, postpones her tour after a stay in hospital with a serious bacterial infection."><a href="https://www.bbc.co.uk/news/world-us-canada-66049222?at_medium=RSS&amp;at_campaign=KARANGA">Madonna postpones tour after intensive care stay</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/world-us-canada-66045554?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/127CB/production/_130232757_titan-sub-wreckage-porthole-pictures-photos.jpg" class="ttt" data-tt="The porthole of the Titan sub appears to be among the wreckage brought ashore" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>World</b><br/><ul><li class="ttt" data-tt="<b>France shooting: Fresh unrest amid anger over killing of teen</b><br/>There are fears of a second night of violence after the shooting of a teenager who ignored traffic police." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/world-europe-66040464?at_medium=RSS&amp;at_campaign=KARANGA">France shooting: Fresh unrest amid anger over killing of teen</a></li><li class="ttt" data-tt="<b>What we know about killing of Paris teen... in 55 seconds</b><br/>The BBC\'s Hugh Schofield investigates at the scene where police shot dead 17-year-old Nahel."><a href="https://www.bbc.co.uk/news/world-europe-66045782?at_medium=RSS&amp;at_campaign=KARANGA">What we know about killing of Paris teen... in 55 seconds</a></li><li class="ttt" data-tt="<b>Kramatorsk: Alleged Russian spy to be charged over deadly strike</b><br/>The man allegedly sent footage of the restaurant to Russia\'s military before it was destroyed."><a href="https://www.bbc.co.uk/news/world-europe-66045197?at_medium=RSS&amp;at_campaign=KARANGA">Kramatorsk: Alleged Russian spy to be charged over deadly strike</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/world-europe-66040464?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/CE24/production/_130227725_paris_afp.jpg" class="ttt" data-tt="Firefighter extinguish a burning vehicle destroyed by protesters in Nanterre, west of Paris, on 27 June 2023" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>Formula 1</b><br/><ul><li class="ttt" data-tt="<b>Aston Martin rise is a \'reality check\' for Alpine, says team boss Laurent Rossi</b><br/>Alpine boss Laurent Rossi says Aston Martin\'s leap up the grid this year has been a &quot;reality check&quot; for his team." style="font-weight:bold"><a href="https://www.bbc.co.uk/sport/formula1/66025963?at_medium=RSS&amp;at_campaign=KARANGA">Aston Martin rise is a \'reality check\' for Alpine, says team boss Laurent...</a></li><li class="ttt" data-tt="<b>Alpine: Ryan Reynolds and Rob McElhenney part of group taking 24% equity stake in F1 team</b><br/>Wrexham Football Club owners Ryan Reynolds and Rob McElhenney are part of an investor group taking a 24% equity stake in Alpine."><a href="https://www.bbc.co.uk/sport/formula1/66016904?at_medium=RSS&amp;at_campaign=KARANGA">Alpine: Ryan Reynolds and Rob McElhenney part of group taking 24% equity st...</a></li><li class="ttt" data-tt="<b>Ferrari \'going in the right direction\' after strong Canadian Grand Prix, says team boss Fred Vasseur</b><br/>Ferrari boss Fred Vasseur says the team are &quot;going in the right direction&quot; after the Canadian Grand Prix, in which Charles Leclerc and Carlos Sainz climbed from 10th and 11th on the grid to fourth and fifth"><a href="https://www.bbc.co.uk/sport/formula1/65961271?at_medium=RSS&amp;at_campaign=KARANGA">Ferrari \'going in the right direction\' after strong Canadian Grand Prix,...</a></li></ul></td><td><a href="https://www.bbc.co.uk/sport/formula1/66025963?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/live-experience/cps/624/cpsprodpb/14137/production/_130213228_alpine.jpg"  style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>Technology</b><br/><ul><li class="ttt" data-tt="<b>Cut low-cost broadband VAT to help more online, peers say</b><br/>Some people struggle to get online, putting them at a disadvantage, a Lord\'s committee says." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/technology-66033209?at_medium=RSS&amp;at_campaign=KARANGA">Cut low-cost broadband VAT to help more online, peers say</a></li><li class="ttt" data-tt="<b>ChatGPT owner OpenAI to open first foreign office in UK</b><br/>The Microsoft-backed company says the London office will allow it to \'attract world-class talent\'."><a href="https://www.bbc.co.uk/news/technology-66041934?at_medium=RSS&amp;at_campaign=KARANGA">ChatGPT owner OpenAI to open first foreign office in UK</a></li><li class="ttt" data-tt="<b>BT investigated over major 999 call disruption</b><br/>Probe launched after emergency services across the UK reported 999 calls were failing to connect on Sunday."><a href="https://www.bbc.co.uk/news/technology-66042035?at_medium=RSS&amp;at_campaign=KARANGA">BT investigated over major 999 call disruption</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/technology-66033209?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/156BF/production/_130234778_gettyimages.jpg" class="ttt" data-tt="A stock photo of a young woman looking at a phone" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr></table>';
	var box = makeBox(3, 2);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4F0;<a href="https://www.bbc.co.uk/news">BBC News</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function weather() {
    var weatherLocation = "11609021";

    var data={"copyright":"Contents are strictly for use by timeanddate.com","units":{"temp":"°C","prec":"mm","wind":"mph","baro":"mbar"},"detail":[{"hl":true,"hls":"26 Jun – 2 Jul","date":16879968E5,"ts":"Thu, 29","ds":"Thu, 29 Jun","icon":33,"desc":"Showers late. Cloudy.","temp":19,"templow":11,"cf":19,"wind":10,"wd":310,"hum":56,"pc":39,"rain":0.6 },{"date":16880832E5,"ts":"Fri, 30","ds":"Fri, 30 Jun","icon":18,"desc":"Sprinkles late. Overcast.","temp":18,"templow":9,"cf":17,"wind":14,"wd":210,"hum":74,"pc":55,"rain":1.4 },{"date":16881696E5,"ts":"Sat, 1","ds":"Sat, 1 Jul","icon":33,"desc":"Passing showers. Breaks of sun late.","temp":21,"templow":14,"cf":21,"wind":15,"wd":280,"hum":49,"pc":49,"rain":1.3 },{"date":1688256E6,"ts":"Sun, 2","ds":"Sun, 2 Jul","icon":4,"desc":"Partly cloudy.","temp":17,"templow":11,"cf":17,"wind":17,"wd":260,"hum":52,"pc":5},{"hl":true,"hls":"3 Jul – 9 Jul","date":16883424E5,"ts":"Mon, 3","ds":"Mon, 3 Jul","icon":18,"desc":"Drizzle. Increasing cloudiness.","temp":18,"templow":10,"cf":17,"wind":20,"wd":270,"hum":51,"pc":38,"rain":0.8 },{"date":16884288E5,"ts":"Tue, 4","ds":"Tue, 4 Jul","icon":33,"desc":"Showers late. Increasing cloudiness.","temp":20,"templow":8,"cf":20,"wind":19,"wd":200,"hum":60,"pc":42,"rain":2.5 },{"date":16885152E5,"ts":"Wed, 5","ds":"Wed, 5 Jul","icon":33,"desc":"Passing showers. Broken clouds.","temp":19,"templow":9,"cf":19,"wind":15,"wd":250,"hum":50,"pc":38,"rain":1},{"date":16886016E5,"ts":"Thu, 6","ds":"Thu, 6 Jul","icon":6,"desc":"Broken clouds.","temp":18,"templow":9,"cf":18,"wind":9,"wd":250,"hum":45,"pc":6},{"date":1688688E6,"ts":"Fri, 7","ds":"Fri, 7 Jul","icon":33,"desc":"Showers late. Afternoon clouds.","temp":18,"templow":10,"cf":18,"wind":8,"wd":240,"hum":50,"pc":52,"rain":2},{"date":16887744E5,"ts":"Sat, 8","ds":"Sat, 8 Jul","icon":18,"desc":"Sprinkles early. Broken clouds.","temp":18,"templow":10,"cf":18,"wind":11,"wd":320,"hum":61,"pc":53,"rain":0.5 },{"date":16888608E5,"ts":"Sun, 9","ds":"Sun, 9 Jul","icon":33,"desc":"Rain showers. Cloudy.","temp":19,"templow":10,"cf":16,"wind":12,"wd":170,"hum":96,"pc":72,"rain":8},{"hl":true,"hls":"10 Jul – 16 Jul","date":16889472E5,"ts":"Mon, 10","ds":"Mon, 10 Jul","icon":33,"desc":"Showers late. Cloudy.","temp":19,"templow":10,"cf":17,"wind":8,"wd":200,"hum":55,"pc":39,"rain":0.8 },{"date":16890336E5,"ts":"Tue, 11","ds":"Tue, 11 Jul","icon":21,"desc":"Isolated tstorms late. Afternoon clouds.","temp":20,"templow":13,"cf":19,"wind":19,"wd":250,"hum":53,"pc":42,"rain":0.6 },{"date":168912E7,"ts":"Wed, 12","ds":"Wed, 12 Jul","icon":21,"desc":"Isolated tstorms. Partly cloudy.","temp":20,"templow":13,"cf":18,"wind":13,"wd":260,"hum":61,"pc":52,"rain":2},{"date":16892064E5,"ts":"Thu, 13","ds":"Thu, 13 Jul","icon":18,"desc":"Sprinkles late. Cloudy.","temp":20,"templow":12,"cf":19,"wind":5,"wd":190,"hum":50,"pc":49,"rain":0.2 }],"grid":{"temp":{"low":8,"high":21,"range":13},"prec":{"high":8},"time":86400000,"sections":15},"conv":{"prec":{"offset":0,"scale":1},"temp":{"offset":0,"scale":1},"wind":{"offset":0,"scale":0.869},"baro":{"offset":0,"scale":1}}};


    var box = makeBox(2, 2);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#127746;<a href="https://www.timeanddate.com/weather/@' + weatherLocation + '/ext">Weather</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div');
    var table = inside
        .append('table');

    for (var day of data.detail.slice(0, 7)) {
        var row = table
            .append('tr');
        row
            .append('td')
            .style('text-align', 'right')
            .style('font-weight', 'bold')
            .html(day.ds.split(',')[0] + ':&nbsp;');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html(day.templow + '&#xb0;');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html('to');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html(day.temp + '&#xb0;');
        row
            .append('td')
            .style('text-align', 'center')
            .append('img')
            .attr('src', 'https://c.tadst.com/gfx/w/svg/wt-' + day.icon + '.svg')
            .attr('width', '32px')
            .attr('height', '32px');
        row
            .append('td')
            .style('text-align', 'left')
            .html(day.desc)
    }
});

//////////////////////////////////////////////////

modules.push(function astronomy() {
	var imageData = {
		Source:    'https://apod.nasa.gov/apod/image/2306/M24_2023grapod1024.jpg',
		Title:     'Messier 24: Sagittarius Star Cloud',
		LinkImage: 'https://apod.nasa.gov/apod/image/2306/M24_2023grapod.jpg',
		LinkPage:  'https://apod.nasa.gov/apod/ap230628.html'
	}

	if (!imageData.Source.endsWith('/')) {
		var box = makeBox(2, 2);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x1F680;<a href="https://apod.nasa.gov/apod/astropix.html">Astronomy Picture of the Day</a>')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', imageData.LinkImage)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', imageData.Source);
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', imageData.LinkPage)
			.html(imageData.Title);
	}
});

//////////////////////////////////////////////////

modules.push(function nature() {
	var natureData = {
		Source:   'https://cdn2.outdoorphotographer.com/2023/05/Farewell-to-the-Kings-Robert-Henderson.jpeg',
		Title:    'Farewell to the Kings Robert Henderson',
		LinkPage: 'https://www.outdoorphotographer.com/blog/photo-of-the-day-by-robert-henderson-17/'
	}

	if (natureData.Source.length > 0) {
		var box = makeBox(2, 2);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x26FA;<a href="https://www.outdoorphotographer.com/blog/category/photo-of-the-day/">Outdoor Photo of the Day</a>')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', natureData.Source)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', natureData.Source);
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', natureData.LinkPage)
			.html(natureData.Title);
	}
});

//////////////////////////////////////////////////

modules.push(function wikipedia() {
	var pictureData = {
		Source:   'http://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/Euthalia_aconthea_%28common_baron%29_caterpillar_in_Si_Phan_Don_Laos.jpg/450px-Euthalia_aconthea_%28common_baron%29_caterpillar_in_Si_Phan_Don_Laos.jpg',
		Title:    'Euthalia aconthea',
		LinkPage: 'https://en.wikipedia.org/wiki//wiki/Euthalia_aconthea',
		Description: '    <i><b><a href="/wiki/Euthalia_aconthea" title="Euthalia aconthea">Euthalia aconthea</a></b></i>, also known as the common baron, is a medium-sized species of <a href="/wiki/Butterfly" title="Butterfly">butterfly</a> in the family <a href="/wiki/Nymphalidae" title="Nymphalidae">Nymphalidae</a> native to south and south-east Asia. In 1905, <a href="/wiki/Charles_Thomas_Bingham" title="Charles Thomas Bingham">Charles Thomas Bingham</a> recorded it to be found throughout peninsular India, except in the desert tracts, and the higher ranges of the Himalayas; <a href="/wiki/Assam" title="Assam">Assam</a>; Burma; <a href="/wiki/Tanintharyi_Region" title="Tanintharyi Region">Tenasserim</a>, extending to the peninsula, and <a href="/wiki/Sumatra" title="Sumatra">Sumatra</a>. This <i>E.&#160;aconthea</i> <a href="/wiki/Caterpillar" title="Caterpillar">caterpillar</a> was photographed on <a href="/wiki/Don_Det" title="Don Det">Don Det</a>, an island in the <a href="/wiki/Mekong" title="Mekong">Mekong</a>, and part of <a href="/wiki/Si_Phan_Don" title="Si Phan Don">Si Phan Don</a>, an archipelago in southern Laos.<small style="display: block; margin-top: 0.8em;">Photograph credit: <a href="/wiki/User:Basile_Morin" title="User:Basile Morin">Basile Morin</a></small>'
	}

	if (pictureData.Source.length > 0) {
		var box = makeBox(2, 3);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x1F9E9;Wikipedia Picture of the Day')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', pictureData.Source)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', pictureData.Source);
		/*
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', pictureData.LinkPage)
			.html(pictureData.Title);
		*/
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.style('overflow', 'hidden')
			.style('margin', '5px')
			.style('display', '-webkit-box')
			.style('-webkit-line-clamp', '6')
			.style('-webkit-box-orient', 'vertical')
			.html(pictureData.Description);
	}
});

//////////////////////////////////////////////////

modules.push(function tv() {

    var tvData = [{"channelid":505,"offset":1,"event":""},{"channelid":700,"offset":1,"event":[{"name":"This is BBC Two","description":"Highlights of programmes on BBC Two. [HD]","startTime":1688004900,"duration":11700,"svcId":700,"evtId":8054,"image":"\/ms\/img\/epg\/rb\/8df1-p0bvs8dg.jpg","hasTstv":false},{"name":"Garden Rescue","description":"19\/35. Charlie and Lee are in Warrington to transform Bindu and Vivek\u0027s first garden into a productive, eco-friendly retreat. [S] [HD]","startTime":1688016600,"duration":2700,"svcId":700,"evtId":7922,"image":"\/ms\/img\/epg\/rb\/8df1-p0fv4dgt.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1687447810,"availabilityEnd":1726932535,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001n3p9\u0026ui_id=4.0.0"},"seriesNo":8,"episodeNo":19},{"name":"Money for Nothing","description":"19\/20. Sarah Moore, Zoe Murphy and Peter Fournel are in Surrey to work their upcycling magic on a G Plan unit, a stacking bookcase and a papasan seat. [S] [HD]","startTime":1688019300,"duration":2700,"svcId":700,"evtId":7923,"image":"\/ms\/img\/epg\/rb\/8df1-p0fw81sm.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1687788062,"availabilityEnd":1719496790,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001n9rz\u0026ui_id=4.0.0"},"seriesNo":14,"episodeNo":19},{"name":"Springwatch","description":"8\/12. A celebration of Britain\u0027s seas. Gillian Burke explores a seagrass meadow, plus a showcase of overlooked species at Swanage Pier. [S,SL] [HD]","startTime":1688022000,"duration":3600,"svcId":700,"evtId":7924,"image":"\/ms\/img\/epg\/rb\/8df1-p0frwn58.jpg","hasTstv":false,"seriesNo":34,"episodeNo":8},{"name":"Nicky Campbell","description":"Nicky Campbell takes your calls on the day\u0027s talking points, hearing views and experiences from across the UK. [S] [HD]","startTime":1688025600,"duration":7200,"svcId":700,"evtId":7925,"image":"\/ms\/img\/epg\/rb\/8df1-p0ff8nw5.jpg","hasTstv":false},{"name":"BBC News","description":"Twenty-four hours a day, the latest national and international stories as they break. [S] [HD]","startTime":1688032800,"duration":4500,"svcId":700,"evtId":7926,"image":"\/ms\/img\/epg\/rb\/8df1-p07jbsw9.jpg","hasTstv":false},{"name":"Politics Live","description":"The big political issues of the day. [S] [HD]","startTime":1688037300,"duration":2700,"svcId":700,"evtId":7927,"image":"\/ms\/img\/epg\/rb\/8df1-p09819qp.jpg","hasTstv":false},{"name":"Tennis: Eastbourne","description":"The live action from the Eastbourne grass-court tennis tournament continues, with players fighting it out for a place in the semi-finals at Devonshire Park. Presented by Gigi Salmon. [S] [HD]","startTime":1688040000,"duration":15300,"svcId":700,"evtId":7928,"image":"\/ms\/img\/epg\/rb\/8df1-p0fwwlz3.jpg","hasTstv":false,"seriesNo":2023},{"name":"Flog It!","description":"Paul Martin presents from Muncaster Castle in Cumbria. Experts Caroline Hawley and James Lewis choose items to take to auction. [S] [HD]","startTime":1688055300,"duration":2700,"svcId":700,"evtId":7929,"image":"\/ms\/img\/epg\/rb\/8df1-p0483s0c.jpg","hasTstv":false,"seriesNo":14,"episodeNo":36},{"name":"Richard Osman\u0027s House of Games","description":"89\/140. Former winners Maisie Adam, Ivo Graham, Dev Griffin and Zoe Lyons test their general knowledge skills on this week\u0027s Richard Osman\u0027s House of Games: Champions. [S] [HD]","startTime":1688058000,"duration":1800,"svcId":700,"evtId":7930,"image":"\/ms\/img\/epg\/rb\/8df1-p0b6hmbl.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1639679400,"availabilityEnd":1671215400,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m0012l8j\u0026ui_id=4.0.0"},"seriesNo":5,"episodeNo":89},{"name":"Great British Railway Journeys","description":"9\/15. Michael Portillo continues his rail exploration of the east of England. [S,AD] [HD]","startTime":1688059800,"duration":1800,"svcId":700,"evtId":7931,"image":"\/ms\/img\/epg\/rb\/8df1-p0fwg5xy.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1687755600,"availabilityEnd":1719378000,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001nbgd\u0026ui_id=4.0.0"},"seriesNo":14,"episodeNo":9},{"name":"Today at the Ashes: England v...","description":"...Australia. Second day highlights of the Second Test of the 2023 Ashes between England and Australia. [S] [HD]","startTime":1688061600,"duration":3600,"svcId":700,"evtId":7932,"image":"\/ms\/img\/epg\/rb\/8df1-p0fv1s7r.jpg","hasTstv":false,"seriesNo":8},{"name":"Grand Tours of Scotland\u0027s Rivers","description":"3\/3. From its source in remote Loch Spey, Paul follows the South Esk River to the east coast. He then explores the beautiful and surprising River Ayr. [S] [HD]","startTime":1688065200,"duration":3600,"svcId":700,"evtId":7933,"image":"\/ms\/img\/epg\/rb\/8df1-p0b1vxl7.jpg","hasTstv":false,"seriesNo":2,"episodeNo":3},{"name":"Inside the Iranian Uprising","description":"The story Iran has tried to hide from the world - the brutal reality of the recent street protests, told through videos of ordinary citizens. [S] [HD]","startTime":1688068800,"duration":3600,"svcId":700,"evtId":7934,"image":"\/ms\/img\/epg\/rb\/8df1-p0fxsbq3.jpg","hasTstv":false},{"name":"Big Train","description":"1\/6. Bizarre comedy sketch show featuring a host of weird and wonderful characters, including a flamenco-dancing bomb disposal unit and a French-speaking tortoise. Contains adult humour. [S]","startTime":1688072400,"duration":1800,"svcId":700,"evtId":7935,"image":"\/ms\/img\/epg\/rb\/8df1-p0fw7pvg.jpg","hasTstv":false,"seriesNo":1,"episodeNo":1},{"name":"Newsnight","description":"The day\u0027s important national and international news stories. With Kirsty Wark. [S] [HD]","startTime":1688074200,"duration":2400,"svcId":700,"evtId":7936,"image":"\/ms\/img\/epg\/rb\/8df1-p07m7twy.jpg","hasTstv":false},{"name":"Weather","description":"Weather bulletin. [S] [HD]","startTime":1688076600,"duration":300,"svcId":700,"evtId":7937,"image":"\/ms\/img\/epg\/rb\/8df1-p0dc8npj.jpg","hasTstv":false},{"name":"Parole","description":"5\/5. The Parole Board decide whether to release or detain two new offenders. Contains some strong language. [S,AD] [HD]","startTime":1688076900,"duration":3600,"svcId":700,"evtId":7938,"image":"\/ms\/img\/epg\/rb\/8df1-p0fwmymy.jpg","hasTstv":false,"seriesNo":1,"episodeNo":5},{"name":"Dr Xand\u0027s Con or Cure","description":"7\/15. Cheap teeth whitening kits - are they ever safe? Do we really need less sleep as we get older? And, it was the largest maternity scandal in the UK, but have things really changed? [S,SL] [HD]","startTime":1688080500,"duration":2700,"svcId":700,"evtId":7939,"image":"\/ms\/img\/epg\/rb\/8df1-p0fhc7pp.jpg","hasTstv":false,"seriesNo":1,"episodeNo":7},{"name":"Spy in the Ocean","description":"2\/4. Spy Creatures dive into the emotions we share with the animals of the ocean. [S,AD,SL] [HD]","startTime":1688083200,"duration":3600,"svcId":700,"evtId":7940,"image":"\/ms\/img\/chan\/BBCTwoHD-App-Placeholder-1280x720.jpg","hasTstv":false,"seriesNo":1,"episodeNo":2},{"name":"Windrush: Portraits of a...","description":"...Generation. Following a remarkable project spearheaded by the King, this documentary sees leading artists create portraits of pioneering members of the Windrush Generation. [S,AD,SL] [HD]","startTime":1688086800,"duration":4500,"svcId":700,"evtId":7941,"image":"\/ms\/img\/epg\/rb\/8df1-p0fv8l8h.jpg","hasTstv":false},{"name":"This is BBC Two","description":"Highlights of programmes on BBC Two. [HD]","startTime":1688091300,"duration":10800,"svcId":700,"evtId":7942,"image":"\/ms\/img\/epg\/rb\/8df1-p0bvs8dg.jpg","hasTstv":false}]},{"channelid":1500,"offset":1,"event":[{"name":"Grand Designs Australia","description":"Tony and Tania want to create a million-dollar house on a $400,000 budget. Working off handshake deals with the architect and builder, will their dream home become a reality? (S8 Ep4)  [AD,S]","startTime":1688006700,"duration":3300,"svcId":1500,"evtId":29293,"image":"\/ms\/img\/epg\/rb\/5d52-reality.genre.l.png","hasTstv":false,"seriesNo":8,"episodeNo":4},{"name":"Location, Location, Location","description":"In Edinburgh, Kirstie Allsopp and Phil Spencer help a couple who don\u0027t know what they want, and an American family with their hearts set on one of the priciest parts of town. (S29 Ep6\/8)  [S,SL]","startTime":1688010000,"duration":3300,"svcId":1500,"evtId":29603,"image":"\/ms\/img\/epg\/rb\/5d52-4492061.l.png","hasTstv":false,"seriesNo":29,"episodeNo":6},{"name":"Fame in the Family","description":"Rugby legend Martin Offiah hosts a dinner party for guests he\u0027s never met! Competitive Martin\u0027s convinced he can correctly guess who his long-lost cousin is, but can anyone else? (Ep14\/15)  [S]","startTime":1688013300,"duration":1800,"svcId":1500,"evtId":29604,"image":"\/ms\/img\/epg\/rb\/5d52-415096953.l.png","hasTstv":false,"seriesNo":1,"episodeNo":14},{"name":"Countdown","description":"Colin Murray and Rachel Riley host as contestants race against the clock to pit their wits against vowels, consonants and numbers. Dr Maggie Aderin-Pocock is in Dictionary Corner.  [S]","startTime":1688015100,"duration":2400,"svcId":1500,"evtId":29099,"image":"\/ms\/img\/epg\/rb\/5d52-7780253.l.png","hasTstv":false},{"name":"Cheers","description":"Norm and Cliff\u0027s Excellent Adventure: Woody gets hooked on buying rubbish from a home shopping channel. Norm and Cliff start a fight between Sam and Frasier over a credit card. (S9 Ep10\/25)  [S]","startTime":1688017500,"duration":1500,"svcId":1500,"evtId":29100,"image":"\/ms\/img\/epg\/rb\/5d52-4404.l.png","hasTstv":false,"seriesNo":9,"episodeNo":12},{"name":"Cheers","description":"Woody Interruptus: Kelly returns from Europe with a French boyfriend in tow, causing consternation to Woody. Cliff aims to cheat death by having his head cryogenically frozen. (S9 Ep11\/25)  [S]","startTime":1688019000,"duration":1500,"svcId":1500,"evtId":29101,"image":"\/ms\/img\/epg\/rb\/5d52-6015.l.png","hasTstv":false,"seriesNo":9,"episodeNo":13},{"name":"The King of Queens","description":"Foe: Pa: Arthur ruins Carrie\u0027s job interview. (S6 Ep20\/24)  [AD,S]","startTime":1688020500,"duration":1500,"svcId":1500,"evtId":29102,"image":"\/ms\/img\/epg\/rb\/5d52-384028887.l.png","hasTstv":false,"seriesNo":6,"episodeNo":20},{"name":"The King of Queens","description":"Tank Heaven: Doug sabotages Carrie\u0027s relationship with her new colleagues. Meanwhile, Spence and Danny use Arthur as a \u0027babe magnet\u0027. (S6 Ep21\/24)  [AD,S]","startTime":1688022000,"duration":1500,"svcId":1500,"evtId":29103,"image":"\/ms\/img\/epg\/rb\/5d52-384029066.l.png","hasTstv":false,"seriesNo":6,"episodeNo":21},{"name":"Frasier","description":"Moon Dance: When Niles decides that it\u0027s time to start dating again, he takes Daphne to a posh society ball, but has she got the wrong idea about his intentions? (S3 Ep13)  [AD,S]","startTime":1688023500,"duration":1800,"svcId":1500,"evtId":29104,"image":"\/ms\/img\/epg\/rb\/5d52-450051.l.png","hasTstv":false,"seriesNo":3,"episodeNo":13},{"name":"Frasier","description":"The Show Where Diane Comes Back: When Diane visits Seattle, Frasier is torn between his feelings for her and his resentment from when she ditched him at the altar. (S3 Ep14)  [AD,S]","startTime":1688025300,"duration":1800,"svcId":1500,"evtId":29105,"image":"\/ms\/img\/epg\/rb\/5d52-452143.l.png","hasTstv":false,"seriesNo":3,"episodeNo":14},{"name":"Frasier","description":"A Word to the Wise Guy: Maris needs Niles\u0027s help, and he thinks it\u0027s a chance to get back together. But he has to gain a favour from a shady character in order to assist her. (S3 Ep15)  [AD,S]","startTime":1688027100,"duration":1800,"svcId":1500,"evtId":29106,"image":"\/ms\/img\/epg\/rb\/5d52-453819.l.png","hasTstv":false,"seriesNo":3,"episodeNo":15},{"name":"Find It, Fix It, Flog It","description":"In Windsor, Henry Cole finds an Austrian moped that\u0027s missing just one key item: an engine. And Simon O\u0027Brien is taken with a fibreglass suit of armour called Ralph. (S4 Ep1)  [AD,S]","startTime":1688028900,"duration":3600,"svcId":1500,"evtId":29107,"image":"\/ms\/img\/epg\/rb\/5d52-documen.genre.l.png","hasTstv":false,"seriesNo":4,"episodeNo":1},{"name":"Couples Come Dine with Me","description":"In Nottingham, Clare and Ric plan a traditional Italian menu, Donna and Simon\u0027s food is anything but classic, and Laura and Blaine host an evening of sparkling wit and entertainment.  [S]","startTime":1688032500,"duration":3600,"svcId":1500,"evtId":29108,"image":"\/ms\/img\/epg\/rb\/5d52-4140395.l.png","hasTstv":false,"seriesNo":4,"episodeNo":4},{"name":"Channel 4 News Summary","description":"Channel 4\u0027s midday news summary.  [S]","startTime":1688036100,"duration":300,"svcId":1500,"evtId":29109,"image":"\/ms\/img\/epg\/rb\/5d52-2023374.l.png","hasTstv":false},{"name":"Live: Steph\u0027s Packed Lunch","description":"Steph McGovern presents her live lunchtime show featuring celebrity guests, fantastic food and the best entertainment, lifestyle and consumer stories making the headlines.  [S]","startTime":1688036400,"duration":7800,"svcId":1500,"evtId":29110,"image":"\/ms\/img\/epg\/rb\/5d52-talk.genre.l.png","hasTstv":false},{"name":"Countdown","description":"Colin Murray and Rachel Riley host as contestants race against the clock to pit their wits against vowels, consonants and numbers. Dr Maggie Aderin-Pocock is in Dictionary Corner.  [S]","startTime":1688044200,"duration":3000,"svcId":1500,"evtId":29111,"image":"\/ms\/img\/epg\/rb\/5d52-game.genre.l.png","hasTstv":false},{"name":"A Place in the Sun","description":"Julie and Derek are after a shabby-chic home near the city of Tarbes in southern France, with enough land to start an alpaca walking business. Jean Johansson shows them what \u00a3130k can buy.  [S]","startTime":1688047200,"duration":3600,"svcId":1500,"evtId":29112,"image":"\/ms\/img\/epg\/rb\/5d52-6821650.l.png","hasTstv":false},{"name":"Chateau DIY","description":"In the Loire Valley, Guy struggles to build a flatpack spiral staircase, while May spots some safety issues that have to be addressed before her yoga retreat can commence. (S3 Ep19)  [AD,S]","startTime":1688050800,"duration":3600,"svcId":1500,"evtId":29113,"image":"\/ms\/img\/epg\/rb\/5d52-6431542.l.png","hasTstv":false,"seriesNo":3,"episodeNo":19},{"name":"Sun, Sea and Selling Houses","description":"What terracotta treats have the Hamiltons got in store for Nigel and Hazel in M\u00e1laga? And in Alicante, the Rodriguez sisters hope to make Maria\u0027s dream of Spanish living come true. (S6 Ep4)  [S]","startTime":1688054400,"duration":3600,"svcId":1500,"evtId":29114,"image":"\/ms\/img\/epg\/rb\/5d52-reality.genre.l.png","hasTstv":false,"seriesNo":6,"episodeNo":4},{"name":"The Simpsons","description":"The Mansion Family: Mr Burns leaves town for a full medical check-up, leaving the Simpsons in charge of his mansion. Guest starring Britney Spears as herself. (S11 Ep12\/22)  [AD,S]","startTime":1688058000,"duration":1800,"svcId":1500,"evtId":29115,"image":"\/ms\/img\/epg\/rb\/5d52-1706588.l.png","hasTstv":false,"seriesNo":11,"episodeNo":12},{"name":"Hollyoaks","description":"Grace makes a tough decision that has huge consequences. Zara confesses her true feelings to Damon. Leela and Joel\u0027s relationship may be over before it\u0027s really begun.  [AD,S]","startTime":1688059800,"duration":1800,"svcId":1500,"evtId":29116,"image":"\/ms\/img\/epg\/rb\/5d52-drama.genre.l.png","hasTstv":false},{"name":"Titanic Sub Rescue - C4 News...","description":"...Special: Rescuers are in a race against time to find a tourist submersible that went missing during a dive to the wreck of the Titanic. We report on the latest and hear from experts.  [S]","startTime":1688061600,"duration":3600,"svcId":1500,"evtId":29117,"image":"\/ms\/img\/epg\/rb\/5d52-2023390.l.png","hasTstv":false},{"name":"New: Britain\u0027s Best Beach Huts","description":"Craftsman Jay Blades and interior designer Laura Jackson travel the UK\u0027s coastline in search of the quintessential seaside staple, starting with traditional beach huts with a twist. (Ep1\/3)  [AD,S]","startTime":1688065200,"duration":3600,"svcId":1500,"evtId":29118,"image":"\/ms\/img\/epg\/rb\/5d52-documen.genre.l.png","hasTstv":false,"seriesNo":1,"episodeNo":1},{"name":"New: Before We Die","description":"The thrilling crime drama concludes. With all parties determined to secure a better future for their families, the war between Hannah and Dubravka reaches a bloody conclusion. (S2 Ep5\/5)  [AD,S]","startTime":1688068800,"duration":3600,"svcId":1500,"evtId":29119,"image":"\/ms\/img\/epg\/rb\/5d52-drama.genre.l.png","hasTstv":false,"seriesNo":2,"episodeNo":5},{"name":"24 Hours in Police Custody: The...","description":"...Home County Cartel: The covert police unit tracking smugglers bringing huge quantities of drugs into the UK closes in on the ringleaders in a nerve-shredding conclusion. (Ep2\/2)  [AD,S]","startTime":1688072400,"duration":5400,"svcId":1500,"evtId":29120,"image":"\/ms\/img\/epg\/rb\/5d52-documen.genre.l.png","hasTstv":false,"seriesNo":1,"episodeNo":2},{"name":"In the Footsteps of Killers","description":"True crime series. Emilia Fox and criminologist David Wilson narrow the suspects down to one man, in the previously unsolved case of Suzy Lamplugh, who went missing in 1986. (Ep2\/3)  [AD,S]","startTime":1688077800,"duration":3600,"svcId":1500,"evtId":29461,"image":"\/ms\/img\/epg\/rb\/5d52-408792436.l.png","hasTstv":false,"seriesNo":1,"episodeNo":2},{"name":"Moors Murders: The Trial","description":"In 1966, Brady and Hindley are brought to court. Eyewitnesses describe the trial, and letters reveal the serial killers\u0027 prison lives as Britain\u0027s longest-serving inmates. (Ep3\/3)  [AD,S]","startTime":1688081400,"duration":3300,"svcId":1500,"evtId":29121,"image":"\/ms\/img\/epg\/rb\/5d52-414755657.l.png","hasTstv":false,"seriesNo":1,"episodeNo":3},{"name":"The Secret Life of the Zoo","description":"Pedro the giant anteater falls ill and faces a major operation. Chester Zoo\u0027s rare bald ibises produce a batch of new chicks. And a rhino couple are reunited after four years apart.  [S]","startTime":1688084700,"duration":1500,"svcId":1500,"evtId":29123,"image":"\/ms\/img\/epg\/rb\/5d52-nature.genre.l.png","hasTstv":false},{"name":"Super Troopers 2","description":"(2018) Comedy sequel by Jay Chandrasekhar. Can the bungling cops establish relations in a Canadian town that looks as if it might shift into the US? Strong language\/crude humour\/sex\/drugs.  [S,SL]","startTime":1688086200,"duration":6000,"svcId":1500,"evtId":29124,"image":"\/ms\/img\/epg\/rb\/5d52-296534737.l.png","hasTstv":false},{"name":"Iris Prize Best British Shorts","description":"Tommies: (2022) Iris Prize-nominated short film. In Regency-era London, five women waiting for a carriage descend into a frenzy of vicious gossip about a notorious gay scandal.  [S]","startTime":1688092200,"duration":900,"svcId":1500,"evtId":29125,"image":"\/ms\/img\/epg\/rb\/5d52-drama.genre.l.png","hasTstv":false},{"name":"Couples Come Dine with Me","description":"In Gloucestershire, there\u0027s a malfunctioning blender, a singing dog, and plenty of catty comments, as Debbie and Paul, Angela and John, and Kirsty and James compete.  [S]","startTime":1688093100,"duration":3000,"svcId":1500,"evtId":29126,"image":"\/ms\/img\/epg\/rb\/5d52-2506340.l.png","hasTstv":false,"seriesNo":2,"episodeNo":35},{"name":"Grand Designs Australia","description":"Alice is a big fan of the small house movement. On a sloping site facing the Southern Ocean, she\u0027s creating a petite 40-square-metre pod with everything she needs and nothing more. (S8 Ep5)  [AD,S]","startTime":1688096100,"duration":3300,"svcId":1500,"evtId":29127,"image":"\/ms\/img\/epg\/rb\/5d52-reality.genre.l.png","hasTstv":false,"seriesNo":8,"episodeNo":5}]}];

    var box = makeBox(2, 3);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#x1F4FA;<a href="https://www.freesat.co.uk/tv-guide">TV</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div')
        .style('text-align', 'left');

    var channels = { 505: "BBC 1", 700: "BBC 2", 1500: "Channel 4" };

    var today = new Date();
    var primeTime = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 18, 0, 0);
    var unixStart = (+primeTime) / 1000;
    var unixEnd = unixStart + 60 * 60 * 6;
    var first = true;

    for (var channel of tvData) {
        if (!first) {
            first = false;
        } else {
            inside
                .append('br');
        }

        inside
            .append('p')
            .append('b')
            .text(channels[channel.channelid]);
        var list = inside
            .append('ul');
        for (var event of channel.event) {
            console.log(event);
            if (+event.startTime >= unixStart && +event.startTime < unixEnd) {
                list
                    .append('li')
                    .attr('class', 'ttt')
                    .attr('data-tt', '<img src=\"https://fdp-sv15-image-v1-0.gcprod1.freetime-platform.net/270x180-0' + event.image + '\" /><br/><b>' + event.name + '</b><br/>' + (+event.duration / 60) + ' minutes<br/>' + event.description)
                    .html('<span class="code">' + new Date(+event.startTime * 1000).toLocaleTimeString('en-GB').substr(0, 5) + "</span> - " + event.name);
            }
        }
    }
});

//////////////////////////////////////////////////

modules.push(function backlog() {
	var box = makeBox(1, 2);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4CB;Backlog')
	var table = box
		.append('div')
		.attr('class', 'inside')
		.append('table')
		.style('text-align', 'right');

	var row = table
		.append('tr');
	row
		.append('td')
		.text("Audiobooks:");
	row
		.append('td')
		.text('12')

	row = table
		.append('tr');
	row
		.append('td')
		.text("Books:");
	row
		.append('td')
		.text('14');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Films:");
	row
		.append('td')
		.text('362');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Games:");
	row
		.append('td')
		.text('8');

	row = table
		.append('tr');
	row
		.append('td')
		.text("TV:");
	row
		.append('td')
		.text('177');

	row = table
		.append('tr');
	row
		.append('td')
		.text("YouTube:");
	row
		.append('td')
		.text('3');

	row = table
		.append('tr');
	row
		.append('td')
		.html('&nbsp;');
	row
		.append('td')
		.html('&nbsp;');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Downloaded Files:");
	row
		.append('td')
		.text('18');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Steam Wishlist:");
	row
		.append('td')
		.text('0');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Work Inbox:");
	row
		.append('td')
		.text('19');
});

//////////////////////////////////////////////////

modules.push(function youtube() {

    var data = [
{ id: '6J6oWa4AYfU', title: "Ford Capri MK3 2.8i special - a cool 80s classic car - overrated or cult car?", label: "Ford Capri MK3 2.8i special - a cool 80s classic car - overrated or cult car? by idriveaclassic 13 days ago 19 minutes 54,900 views" },
{ id: 'ET0l5ht1MWE', title: "BMW Isetta - the 50s micro car that saved BMW!", label: "BMW Isetta - the 50s micro car that saved BMW! by idriveaclassic 2 weeks ago 15 minutes 67,645 views" },
{ id: 'XCA62a4kVzU', title: "1000 miles in a Morris Minor to France - will we make it?! (Minors on Tour 2023 road trip)", label: "1000 miles in a Morris Minor to France - will we make it?! (Minors on Tour 2023 road trip) by idriveaclassic 1 month ago 21 minutes 18,154 views" },
];

    var box = makeBox(2, 2);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#x1F4FC;<a href="https://www.youtube.com/feed/trending">YouTube Trending</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div');
    var table = inside
        .append('table')
        .style('width', '80%')
        .style('margin', '0 auto');

    var count = 0;
    for (var video of data) {
        var row = table
            .append('tr');
        row
            .append('td')
            .append('a')
            .attr('href', "https://www.youtube.com/watch?v=" + video.id)
            .append('img')
            .attr('src', 'https://i.ytimg.com/vi/' + video.id + '/hqdefault.jpg')
            .style('width', (480 / 4) + 'px')
            .style('height', (360 / 4) + 'px')
            .style('text-align', 'right')
            .attr('title', video.label);
        row
            .append('td')
            .style('text-align', 'left')
            .html(++count + '<br/><a href="https://www.youtube.com/watch?v=' + video.id + '">' + video.title + '</a>');
    }
});

//////////////////////////////////////////////////

modules.push(function f1() {
	var html =  "<a href='https://www.formula1.com/en/racing/2023/Austria.html'><img src='https://www.formula1.com/content/dam/fom-website/races/2023/Austrian_Grand_Prix.png' style='height:auto;width:auto;max-height:180px;max-width:180px;' /></a><br/><span style='font-size:85%'>2 July</span>";
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F3C1;<a href="https://www.formula1.com/en/racing/2023.html">Next F1 Race</a>')
	box = box
		.append('div')
		.attr('class', 'inside')
		.append('div')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function media() {
	var html = '<p style="font-weight:bold;padding:10px 0 0 0">Audiobooks</p><ul><li><a href="https://www.google.com/search?q=Audiobooks+-+The Turbulent Term of Tyke Tyler (1977)">The Turbulent Term of Tyke Tyler (1977)</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Around the World in 80 Days (1873)">Around the World in 80 Days (1873)</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Animal Farm (1945)">Animal Farm (1945)</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Sherlock Holmes: A Study in Scarlet (1887)">Sherlock Holmes: A Study in Scarlet (1887)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Books</p><ul><li><a href="https://www.google.com/search?q=Books+-+The Monkey\'s Paw (1902)">The Monkey\'s Paw (1902)</a></li><li><a href="https://www.google.com/search?q=Books+-+Fire Season (2011)">Fire Season (2011)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Films</p><ul><li><a href="https://www.google.com/search?q=Films+-+The Purge (2013)">The Purge (2013)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Prince (2023)">The Prince (2023)</a></li><li><a href="https://www.google.com/search?q=Films+-+John Wick (2014)">John Wick (2014)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Whale (2022)">The Whale (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Gosford Park (2001)">Gosford Park (2001)</a></li><li><a href="https://www.google.com/search?q=Films+-+Dead Poets Society (1989)">Dead Poets Society (1989)</a></li><li><a href="https://www.google.com/search?q=Films+-+Sleepy Hollow (1999)">Sleepy Hollow (1999)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Shawshank Redemption (1994)">The Shawshank Redemption (1994)</a></li><li><a href="https://www.google.com/search?q=Films+-+Glass Onion (2022)">Glass Onion (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Mean Creek (2004)">Mean Creek (2004)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Games</p><ul><li><a href="https://www.google.com/search?q=Games+-+Beltex (2022)">Beltex (2022)</a></li><li><a href="https://www.google.com/search?q=Games+-+Dishonored: Knife of Dunwall (2013)">Dishonored: Knife of Dunwall (2013)</a></li><li><a href="https://www.google.com/search?q=Games+-+A Little to the Left (2022)">A Little to the Left (2022)</a></li><li><a href="https://www.google.com/search?q=Games+-+Black Mesa (2020)">Black Mesa (2020)</a></li><li><a href="https://www.google.com/search?q=Games+-+Cyberpunk 2077 (2020)">Cyberpunk 2077 (2020)</a></li><li><a href="https://www.google.com/search?q=Games+-+Prison Architect (2015)">Prison Architect (2015)</a></li><li><a href="https://www.google.com/search?q=Games+-+Hitman WoA: Freelancer (2022)">Hitman WoA: Freelancer (2022)</a></li><li><a href="https://www.google.com/search?q=Games+-+Command & Conquer: Red Alert (2020)">Command & Conquer: Red Alert (2020)</a></li><li><a href="https://www.google.com/search?q=Games+-+100 Hidden Frogs (2021)">100 Hidden Frogs (2021)</a></li><li><a href="https://www.google.com/search?q=Games+-+Return to Monkey Island (2022)">Return to Monkey Island (2022)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">TV</p><ul><li><a href="https://www.google.com/search?q=TV+-+Black Mirror (2023, S6)">Black Mirror (2023, S6)</a></li><li><a href="https://www.google.com/search?q=TV+-+Buffy the Vampire Slayer (1998, S2)">Buffy the Vampire Slayer (1998, S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+Rise & Fall (2023, S1)">Rise & Fall (2023, S1)</a></li><li><a href="https://www.google.com/search?q=TV+-+The Cleaner (2023, S2)">The Cleaner (2023, S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+Clarkson\'s Farm (2023, S2)">Clarkson\'s Farm (2023, S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+How this Blind Girl… (2022, S1)">How this Blind Girl… (2022, S1)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (2015, S6)">Downton Abbey (2015, S6)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (2014, S5)">Downton Abbey (2014, S5)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (2013, S4)">Downton Abbey (2013, S4)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (2012, S3)">Downton Abbey (2012, S3)</a></li></ul>';
	var box = makeBox(2, 4);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F3AC;Recently Completed Media')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

console.log('Error in singles module: Specified argument was out of the range of valid values. (Parameter \'i\')');

//////////////////////////////////////////////////

modules.push(function vanguard() {

	var data = [{ number: 176.52, tooltip: "Tue, Jun 27, 2023<br/>£176.52"},
{ number: 175.48, tooltip: "Mon, Jun 26, 2023<br/>£175.48"},
{ number: 175.84, tooltip: "Fri, Jun 23, 2023<br/>£175.84"},
{ number: 177.15, tooltip: "Thu, Jun 22, 2023<br/>£177.15"},
{ number: 177.37, tooltip: "Wed, Jun 21, 2023<br/>£177.37"},
{ number: 178.07, tooltip: "Tue, Jun 20, 2023<br/>£178.07"},
{ number: 178.24, tooltip: "Mon, Jun 19, 2023<br/>£178.24"},
{ number: 178.58, tooltip: "Fri, Jun 16, 2023<br/>£178.58"},
{ number: 179.61, tooltip: "Thu, Jun 15, 2023<br/>£179.61"},
{ number: 178.74, tooltip: "Wed, Jun 14, 2023<br/>£178.74"},
{ number: 179.51, tooltip: "Tue, Jun 13, 2023<br/>£179.51"},
{ number: 179.33, tooltip: "Mon, Jun 12, 2023<br/>£179.33"},
{ number: 177.26, tooltip: "Fri, Jun 09, 2023<br/>£177.26"},
{ number: 177.60, tooltip: "Thu, Jun 08, 2023<br/>£177.60"},
{ number: 177.93, tooltip: "Wed, Jun 07, 2023<br/>£177.93"},
{ number: 178.98, tooltip: "Tue, Jun 06, 2023<br/>£178.98"},
{ number: 178.29, tooltip: "Mon, Jun 05, 2023<br/>£178.29"},
{ number: 177.44, tooltip: "Fri, Jun 02, 2023<br/>£177.44"},
{ number: 174.03, tooltip: "Thu, Jun 01, 2023<br/>£174.03"},
{ number: 173.97, tooltip: "Wed, May 31, 2023<br/>£173.97"},
{ number: 175.34, tooltip: "Tue, May 30, 2023<br/>£175.34"},
].reverse();

	var vanguardDates = {
		"Latest":      "Tue, Jun 27, 2023",
		"vs Day":      "Mon, Jun 26, 2023",
		"vs Week":     "Tue, Jun 20, 2023",
		"vs Month":    "Tue, May 30, 2023",
		"vs Year":     ""
	}

	var vanguardValues = {
		"Latest":      "£176.52/share",
		'vs Day':      "+0.59%",
		'vs Week':     "-0.87%",
		'vs Month':    "+0.67%",
		'vs Year':     "+7.69%"
	};

	var box = makeBox(3, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#128200;<a href="https://www.vanguardinvestor.co.uk">Vanguard</a>')
	box = box
		.append('div')
		.attr('class', 'inside');		
	var insideLeft = box
		.append('div')
		.style('display', 'inline')
		.style('position', 'absolute')
		.style('left', 0)
		.style('width', '37%');
	insideLeft
		.append('p')
		.append('a')
		.attr('href', 'https://www.vanguardinvestor.co.uk/investments/vanguard-ftse-global-all-cap-index-fund-gbp-acc')
		.html('FTSE Global All Cap<br/>Index Fund - Acc');
	insideLeft
		.append('p')
		.html('&nbsp;');
	var table = insideLeft
		.append('table');	
	
	for (var item of Object.keys(vanguardValues)) {
		var row = table
			.append('tr')
			.style('font-weight', item.startsWith("Latest") ? "bold" : "normal");
		if (vanguardDates[item].length > 0) {
			row
				.attr('class', 'ttt')
				.attr('data-tt', vanguardDates[item])
        }
		row
			.append('td')
			.style('text-align', 'left')
			.html(item + ':&nbsp;');
		row
			.append('td')
			.style('text-align', 'right')
			.attr('class', 'code')
			.html(vanguardValues[item]);
	}

	var insideRight = box
		.append('div')
		.style('display', 'inline')
		.style('position', 'absolute')
		.style('right', 0)
		.style('width', '66%');
	var chart = createLineChart(400, 150, insideRight, data, 2);
});

//////////////////////////////////////////////////

console.log('Error in crypto module: Sequence contains no elements');

//////////////////////////////////////////////////

modules.push(function moon() {
	var moonData = {
		Percent:  '75.8',
		Type:     '<a href="https://www.timeanddate.com/astronomy/moon/waxing-gibbous.html" title="Waxing Gibbous on the night between 28 June and 29 June">Waxing Gibbous</a>',
		Image:    'https://www.timeanddate.com/scripts/moon.php?i=0.758&p=6.083&r=6.064',
		Location: '11609021'
	}

	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#127769;<a href="https://www.timeanddate.com/moon/@' + moonData.Location + '">Moon</a>')
	box = box
		.append('div')
		.attr('class', 'inside');	
	var inside = box
		.append('div');
	inside
		.append('img')
		.attr('src', moonData.Image)
		.attr('width', '75%')
		.attr('height', '75%');		
	inside
		.append('p')
		.html(moonData.Type + ' (' + moonData.Percent + '%)');	
});

//////////////////////////////////////////////////

modules.push(function sun() {
	var sunData = {
		Rise:     '04:47',
		Set:      '21:31',
		Location: '11609021'
	};

	var box = makeBox(1, 1);	
	box
		.append('div')
		.attr('class', 'title')
		.html('&#128262;<a href="https://www.timeanddate.com/sun/@' + sunData.Location + '">Sun</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div');	
	var table = inside
		.append('table')
		.style('width', '150px');
	var row = table
		.append('tr')
		.style('font-size', '300%');
	row
		.append('td')
		.html('&#127748;')
	row
		.append('td')
		.html('&#127751;')
	var row = table
		.append('tr');
	row
		.append('td')
		.html('Rise')
	row
		.append('td')
		.html('Set')
var row = table
		.append('tr');
	row
		.append('td')
		.html(sunData.Rise)
	row
		.append('td')
		.html(sunData.Set)
});

//////////////////////////////////////////////////

modules.push(function word() {
	var wordData = {
		Word:       '',
		Definition: '<p>A kludge is a haphazard or makeshift solution to a problem and especially to a computer or <a href="https://www.merriam-webster.com/dictionary/programming">programming</a> problem.</p>'
	}

	var clean = wordData.Definition.replace(/<[^>]+>/g, '');

	var box = makeBox(clean.length > 250 ? 2 : 1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4DC;<a href="https://www.merriam-webster.com/word-of-the-day">Word of the Day</a>')
	box = box
		.append('div')
		.attr('class', 'inside');	
	var inside = box
		.append('div');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.append('a')
		.attr('href', 'https://www.merriam-webster.com/dictionary/' + wordData.Word)
		.text(wordData.Word);
	inside
		.append('div')
		.style('padding', '5px')
		.html(wordData.Definition);	
});

//////////////////////////////////////////////////

modules.push(function twitter() {
	var html =  '<table><tr><td style="text-align: right">1</td><td><a href="https://twitter.com/search?q=Montel">Montel</a></td></tr><tr><td style="text-align: right">2</td><td><a href="https://twitter.com/search?q=%22colleen+ballinger%22">colleen ballinger</a></td></tr><tr><td style="text-align: right">3</td><td><a href="https://twitter.com/search?q=Whitney">Whitney</a></td></tr><tr><td style="text-align: right">4</td><td><a href="https://twitter.com/search?q=Kady">Kady</a></td></tr><tr><td style="text-align: right">5</td><td><a href="https://twitter.com/search?q=Madonna">Madonna</a></td></tr></table>';
	var title = 'United Kingdom';
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F426;<a href="https://twitter.com/explore/tabs/trending">Twitter Trending</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.style('text-align', 'center')
		.html(title);
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function twitter() {
	var html =  '<table><tr><td style="text-align: right">1</td><td><a href="https://twitter.com/search?q=CPAP">CPAP</a></td></tr><tr><td style="text-align: right">2</td><td><a href="https://twitter.com/search?q=colleen">colleen</a></td></tr><tr><td style="text-align: right">3</td><td><a href="https://twitter.com/search?q=Madonna">Madonna</a></td></tr><tr><td style="text-align: right">4</td><td><a href="https://twitter.com/search?q=%23NHLDraft2023">#NHLDraft2023</a></td></tr><tr><td style="text-align: right">5</td><td><a href="https://twitter.com/search?q=%22Connor+Bedard%22">Connor Bedard</a></td></tr></table>';
	var title = 'United States';
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F426;<a href="https://twitter.com/explore/tabs/trending">Twitter Trending</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.style('text-align', 'center')
		.html(title);
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function astronauts() {
	var astronautsData = {
		Amount:      '10',
		CountryHtml: '<table><tr><td><img class="flag ttt" data-tt="usa" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-usa.jpg" /></td><td><img class="flag ttt" data-tt="russia" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-russia.jpg" /></td><td><img class="flag ttt" data-tt="china" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-china.jpg" /></td><td><img class="flag ttt" data-tt="germany" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-germany.jpg" /></td></tr><tr style="vertical-align:top"><td>3</td><td>3</td><td>3</td><td>1</td></tr></table>'
	};

	var box = makeBox(1, 1);	
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F469;&#x200D;&#x1F680;<a href="https://www.howmanypeopleareinspacerightnow.com/">Astronauts</a>')
	box = box
		.append('div')
		.attr('class', 'inside')
		.append('div')
		.html("<p style='font-size:200%;font-weight:bold'>" + astronautsData.Amount + "</p><p>people are in space now.</p><p>&nbsp;</p>" + astronautsData.CountryHtml)
});

//////////////////////////////////////////////////



			createPage();

		</script>
	</body>
</html>