<!DOCTYPE html>
<html lang="en">
	<head>
		<title>00:47 14-May - Ephemeral</title>		
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="https://d3js.org/d3.v3.min.js"></script>
		<meta http-equiv="refresh" content="1800">
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik&display=swap"> 		
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;500&display=swap"> 	
		<link rel="stylesheet" type="text/css" href="style.css" />
	</head>
	<body>
		<div id="container">
		</div>
		<div id="tt" style="display: none">
			<p id="tooltip_text"></p>
		</div>
		<div id="cls">&nbsp;</div>
		<script>

////////////////////////////////////////////////// tooltips

            var tooltip = d3.select('#tt');
            var tt = d3.select('#tt');

            function setTooltip(value) {
				d3.select('#tooltip_text').html(value);
            }

            function createTooltipTriggers() {
                d3.selectAll('.ttt')
                    .on("mouseover", function (d, i) {
                        setTooltip(d3.selectAll('.ttt')[0][i].attributes['data-tt'].value);
                    })
                    .on("mouseout", function () {
                        tt.style('display', 'none');
                    })
					.on("mousemove", function () {
                        if (x <= 0 || y <= 0) {
                            tt.style('display', 'none');
                        } else {
                            tt.style('display', null);
                        }
                        var x = d3.event.pageX - (tt.node().getBoundingClientRect().width / 2);
                        var y = d3.event.pageY - (tt.node().getBoundingClientRect().height + 5);
                        tt.style('left', ~~x + 'px');
                        tt.style('top', ~~y + 'px');

                    });
			}

////////////////////////////////////////////////// charts

            function map(n, a, b, y, z) {
                return (n - a) * (z - y) / (b - a) + y;
			}

			function createLineChart(width, height, element, data, boundary = 0) {
                var svg = element
                    .append('svg')
                    .attr('width', width + 'px')
                    .attr('height', height + 'px');

                var start = Math.min(...data.map(a => a.number));
				var end = Math.max(...data.map(a => a.number));

				switch (boundary) {
					case 1:
						var distance = (end - start) * 0.1;
						start -= distance;
						start = Math.max(0, start);
						end += distance;
						break;
					case 2:
						start = 0;
						break;
				}

				var xs = [];
				var ys = [];

                for (var i = 1; i <= data.length; i++) {
                    var x1 = map(i - 1, 0, data.length - 1, 3, width - 3);
					var y1 = map(data[i - 1].number, start, end, height, 6);
					xs.push(x1);
					ys.push(y1);
				}

				var area = d3.svg.area()
					.interpolate('cardinal')
					.x(function (d, i) { return xs[i] })
					.y0(function (d, i) { return height })
					.y1(function (d, i) { return ys[i] });

				svg
					.append('path')
                    .datum(d3.range(data.length).map(function(d, i) { return i }))
					.attr("d", area)
					.attr('fill', '#eee');

                var line = d3.svg.line()
                    .interpolate('cardinal')
                    .x(function (d, i) { return xs[i] })
                    .y(function (d, i) { return ys[i] });

                svg
                    .append('path')
                    .datum(d3.range(data.length).map(function (d, i) { return i }))
                    .attr("d", line)
					.attr('fill', 'transparent')
					.style('stroke-width', 2)
					.style('stroke', '#bbb');

				for (var i = 1; i <= data.length; i++) {
					var x1 = map(i - 1, 0, data.length - 1, 3, width - 3);
                    var x2 = map(i, 0, data.length - 1, 3, width - 3);
                    var y1 = map(data[i - 1].number, start, end, height, 6);
                    var g = svg
                        .append('g')
                        .attr('class', 'group');
                    g
						.append('circle')
						.attr('class', 'highlight')
                        .attr('cx', x1)
                        .attr('cy', y1 - 0.5)
                        .attr('r', 1)
						.attr('title', data[i - 1].number);
					g
						.append('rect')
						.attr('class', 'ttt')
						.attr('width', x2 - x1)
						.attr('height', height)
						.attr('x', (x1) - ((x2 - x1) / 2))
						.attr('y', 0)
						.attr('data-tt', data[i - 1].tooltip)
						.attr('style', 'fill:transparent');
                    /*g
                        .append('circle')
                        .attr('class', 'ttt')
                        .attr('cx', x1)
                        .attr('cy', y1 - 0.5)
                        .attr('r', 4)
                        .attr('opacity', '0.01')
                        .attr('z-index', 1000)
                        .attr('data-tt', data[i - 1].tooltip);*/
				}

                svg
                    .append('line')
                    .attr('x1', 3)
                    .attr('y1', height)
                    .attr('x2', width - 3)
                    .attr('y2', height)
                    .style('stroke-width', 2)
                    .style('stroke', '#bbb');
            }

////////////////////////////////////////////////// page
					
			var inside = 210;
			var padding = 8;
			var length = padding + inside + padding;
			var columns;
			var offsetX;
			var offsetY;
			var filled = [,];
			var low = 0;
			var modules = [];
								
			function random(start, end) {
				return start + Math.floor(Math.random() * (end - start));
			}
			
			function makeBox(width, height) {			
				var startX = 0, startY = 0;
				var hasLocation = false;
				for (var a = 0; a + height < filled.length && !hasLocation; a++) {
					for (var b = 0; b + width <= columns && !hasLocation; b++) {					
						var isValid = true;
						for (var c = 0; c < height && isValid; c++) {
							for (var d = 0; d < width && isValid; d++) {
								if (filled[a + c][b + d] > 0) {
									isValid = false;
								}
							}
						}
						if (isValid) {
							hasLocation = true;							
							startX = b;
							startY = a;
						}						
					}
				}				
				if (hasLocation) {
					for (var c = startY; c < startY + height && isValid; c++) {
						for (var d = startX; d < startX + width && isValid; d++) {
							filled[c][d] = 1;
						}
					}
					low = Math.max(low, offsetY + (startY * length) + ((height * length) - (padding * 2)));				
					return d3
						.select('#container')
						.append('div')
						.attr('class', 'box')
						.style('top', offsetY + startY * length + 'px')
						.style('left', offsetX + startX * length + 'px')						
						.style('width', ((width * length) - (padding * 2)) + 'px')
						.style('height', ((height * length) - (padding * 2)) + 'px');
				}
			}
			
			function createPage() {
				low = 0;
				d3.selectAll('.box').remove();
				var docWidth = document.body.clientWidth;		
				columns = ~~((docWidth - 20) / length);
				columns = Math.min(7, columns);
				offsetX = ((docWidth - (columns * length)) / 2) + 5;				
				offsetY = 100;
				for (var a = 0; a < 50; a++) {
					filled[a] = new Array(columns);
					for (var b = 0; b < columns; b++) {
						filled[a][b] = 0;
					}
				}
				for (var func of modules) {
					func();
				}
				d3
					.select('#cls')
					.style('top', (low) + 'px')
					.style('height', ((padding * 2) + offsetY) + 'px');
				createTooltipTriggers();
			}
			
			d3.select(window).on('resize', createPage);

////////////////////////////////////////////////// boxes
			
modules.push(function bbcCombine() {
	var html = '<table style="margin:0 10px"><tr><td style="vertical-align:top"><b>UK</b><br/><ul><li class="ttt" data-tt="<b>Eurovision: Princess of Wales makes surprise appearance</b><br/>She played an instrumental piece pre-recorded in Windsor Castle\'s Crimson Drawing Room earlier this month." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/uk-65586380?at_medium=RSS&amp;at_campaign=KARANGA">Eurovision: Princess of Wales makes surprise appearance</a></li><li class="ttt" data-tt="<b>Priti Patel: Tory leadership errors cost us dearly in local elections</b><br/>The former home secretary blames &quot;those in power&quot; for Tory local election losses in a speech."><a href="https://www.bbc.co.uk/news/uk-politics-65579691?at_medium=RSS&amp;at_campaign=KARANGA">Priti Patel: Tory leadership errors cost us dearly in local elections</a></li><li class="ttt" data-tt="<b>Coronation photo shows King Charles with Prince William and Prince George</b><br/>Official photo shows the King with his elder son and grandson, who are next in line to the throne."><a href="https://www.bbc.co.uk/news/uk-65575553?at_medium=RSS&amp;at_campaign=KARANGA">Coronation photo shows King Charles with Prince William and Prince George</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/uk-65586380?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/1B0A/production/_129722960_katepiano.jpg" class="ttt" data-tt="Princess of Wales in Eurovision appearance" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>US & Canada</b><br/><ul><li class="ttt" data-tt="<b>Lori Vallow: US doomsday cult mum guilty of murdering children, rival</b><br/>Lori Vallow, 49, faces up to life in prison for murdering her two children and her husband\'s former wife." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/world-us-canada-65567072?at_medium=RSS&amp;at_campaign=KARANGA">Lori Vallow: US doomsday cult mum guilty of murdering children, rival</a></li><li class="ttt" data-tt="<b>Ex-Marine charged with New York subway chokehold death of Jordan Neely</b><br/>Daniel Penny, 24, faces up to 15 years if convicted of the death of 30-year-old Jordan Neely."><a href="https://www.bbc.co.uk/news/world-us-canada-65573879?at_medium=RSS&amp;at_campaign=KARANGA">Ex-Marine charged with New York subway chokehold death of Jordan Neely</a></li><li class="ttt" data-tt="<b>Brittney Griner plays first match for Phoenix Mercury since release from Russian custody</b><br/>American Brittney Griner plays for the first time since leaving prison in Russia in a preseason match for Phoenix Mercury on Friday."><a href="https://www.bbc.co.uk/sport/basketball/65580970?at_medium=RSS&amp;at_campaign=KARANGA">Brittney Griner plays first match for Phoenix Mercury since release from Ru...</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/world-us-canada-65567072?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/C2BB/production/_129715894_lori-daybell_jj.jpg" class="ttt" data-tt="Lori Vallow and JJ" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>World</b><br/><ul><li class="ttt" data-tt="<b>Ukraine Eurovision act\'s city Ternopil attacked before performance</b><br/>Ternopil was hit by Russian missiles before Tvorchi took to the stage in Liverpool, reports say." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/world-europe-65586701?at_medium=RSS&amp;at_campaign=KARANGA">Ukraine Eurovision act\'s city Ternopil attacked before performance</a></li><li class="ttt" data-tt="<b>Israel-Gaza: Shaky start to ceasefire ending five days of fighting</b><br/>Palestinian rocket attacks and Israeli air strikes continued for hours after the ceasefire began."><a href="https://www.bbc.co.uk/news/world-middle-east-65585950?at_medium=RSS&amp;at_campaign=KARANGA">Israel-Gaza: Shaky start to ceasefire ending five days of fighting</a></li><li class="ttt" data-tt="<b>Turkey election: Opposition dares to dream of Erdogan defeat</b><br/>President Erdogan, who says he has kept Turkey standing tall, faces a united opposition in Sunday\'s vote."><a href="https://www.bbc.co.uk/news/world-europe-65568647?at_medium=RSS&amp;at_campaign=KARANGA">Turkey election: Opposition dares to dream of Erdogan defeat</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/world-europe-65586701?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/11ED8/production/_129723437_capture.jpg" class="ttt" data-tt="Tvoirchi" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>Formula 1</b><br/><ul><li class="ttt" data-tt="<b>Charles Leclerc says Ferrari \'struggling like crazy\' with car</b><br/>Ferrari driver Charles Leclerc says it is &quot;incredibly difficult to be on the limit&quot; with the team\'s car after a disappointing Miami GP." style="font-weight:bold"><a href="https://www.bbc.co.uk/sport/formula1/65527601?at_medium=RSS&amp;at_campaign=KARANGA">Charles Leclerc says Ferrari \'struggling like crazy\' with car</a></li><li class="ttt" data-tt="<b>Miami Grand Prix: Max Verstappen\'s statement win underlines superiority over Sergio Perez</b><br/>Max Verstappen\'s victory in the Miami was an emphatic statement of his superiority over Red Bull team-mate Sergio Perez, writes Andrew Benson."><a href="https://www.bbc.co.uk/sport/formula1/65522015?at_medium=RSS&amp;at_campaign=KARANGA">Miami Grand Prix: Max Verstappen\'s statement win underlines superiority ov...</a></li><li class="ttt" data-tt="<b>Miami Grand Prix: Max Verstappen wins from ninth on grid to extend championship lead</b><br/>Red Bull\'s Max Verstappen carves through the field to win the Miami Grand Prix from ninth on the grid."><a href="https://www.bbc.co.uk/sport/formula1/65521789?at_medium=RSS&amp;at_campaign=KARANGA">Miami Grand Prix: Max Verstappen wins from ninth on grid to extend champion...</a></li></ul></td><td><a href="https://www.bbc.co.uk/sport/formula1/65527601?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/live-experience/cps/624/cpsprodpb/C597/production/_129638505_leclerc.jpg"  style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>Technology</b><br/><ul><li class="ttt" data-tt="<b>Elon Musk names Linda Yaccarino new Twitter CEO</b><br/>NBCUniversal\'s former head of advertising is revealed as the new boss of the social network." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/business-65574826?at_medium=RSS&amp;at_campaign=KARANGA">Elon Musk names Linda Yaccarino new Twitter CEO</a></li><li class="ttt" data-tt="<b>Tears of the Kingdom: Fans react to Zelda sequel launch</b><br/>Nintendo\'s new Zelda game, Tears of the Kingdom, is already a hit with fans and critics."><a href="https://www.bbc.co.uk/news/technology-65571807?at_medium=RSS&amp;at_campaign=KARANGA">Tears of the Kingdom: Fans react to Zelda sequel launch</a></li><li class="ttt" data-tt="<b>Pakistan shut down the internet - but that didn\'t stop the protests</b><br/>Millions were plunged offline after Imran Khan\'s arrest but the blackout hasn\'t stopped protests."><a href="https://www.bbc.co.uk/news/world-asia-65541769?at_medium=RSS&amp;at_campaign=KARANGA">Pakistan shut down the internet - but that didn\'t stop the protests</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/business-65574826?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/1557D/production/_129712478_gettyimages-1469401572.jpg" class="ttt" data-tt="Linda Yaccarino" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr></table>';
	var box = makeBox(3, 2);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4F0;<a href="https://www.bbc.co.uk/news">BBC News</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function weather() {
    var weatherLocation = "11609021";

    var data={"copyright":"Contents are strictly for use by timeanddate.com","units":{"temp":"°C","prec":"mm","wind":"mph","baro":"mbar"},"detail":[{"hl":true,"hls":"8 May – 14 May","date":16840224E5,"ts":"Sun, 14","ds":"Sun, 14 May","icon":33,"desc":"Passing showers. Overcast.","temp":18,"templow":6,"cf":18,"wind":10,"wd":280,"hum":56,"pc":43,"rain":1.2 },{"hl":true,"hls":"15 May – 21 May","date":16841088E5,"ts":"Mon, 15","ds":"Mon, 15 May","icon":33,"desc":"Showers late. Mostly cloudy.","temp":13,"templow":6,"cf":10,"wind":13,"wd":0,"hum":56,"pc":49,"rain":1.7 },{"date":16841952E5,"ts":"Tue, 16","ds":"Tue, 16 May","icon":33,"desc":"Showers late. Afternoon clouds.","temp":14,"templow":6,"cf":13,"wind":10,"wd":340,"hum":56,"pc":39,"rain":1.2 },{"date":16842816E5,"ts":"Wed, 17","ds":"Wed, 17 May","icon":33,"desc":"Showers late. Cloudy.","temp":15,"templow":7,"cf":14,"wind":9,"wd":10,"hum":59,"pc":19,"rain":0.6 },{"date":1684368E6,"ts":"Thu, 18","ds":"Thu, 18 May","icon":33,"desc":"Showers late. Mostly cloudy.","temp":19,"templow":5,"cf":19,"wind":8,"wd":40,"hum":43,"pc":23,"rain":0.5 },{"date":16844544E5,"ts":"Fri, 19","ds":"Fri, 19 May","icon":7,"desc":"Cloudy.","temp":14,"templow":3,"cf":11,"wind":14,"wd":40,"hum":61,"pc":1},{"date":16845408E5,"ts":"Sat, 20","ds":"Sat, 20 May","icon":7,"desc":"Cloudy.","temp":17,"templow":9,"cf":17,"wind":18,"wd":50,"hum":59,"pc":0},{"date":16846272E5,"ts":"Sun, 21","ds":"Sun, 21 May","icon":33,"desc":"Passing showers. Overcast.","temp":17,"templow":10,"cf":16,"wind":12,"wd":40,"hum":93,"pc":50,"rain":1.7 },{"hl":true,"hls":"22 May – 28 May","date":16847136E5,"ts":"Mon, 22","ds":"Mon, 22 May","icon":33,"desc":"Showers early. Overcast.","temp":17,"templow":11,"cf":16,"wind":16,"wd":60,"hum":72,"pc":55,"rain":0.4 },{"date":16848E8,"ts":"Tue, 23","ds":"Tue, 23 May","icon":2,"desc":"Mostly sunny.","temp":17,"templow":10,"cf":17,"wind":14,"wd":60,"hum":68,"pc":4},{"date":16848864E5,"ts":"Wed, 24","ds":"Wed, 24 May","icon":33,"desc":"Passing showers. Cloudy.","temp":17,"templow":11,"cf":17,"wind":10,"wd":50,"hum":86,"pc":59,"rain":1.5 },{"date":16849728E5,"ts":"Thu, 25","ds":"Thu, 25 May","icon":18,"desc":"Sprinkles early. Cloudy.","temp":17,"templow":11,"cf":17,"wind":7,"wd":40,"hum":77,"pc":46,"rain":0.2 },{"date":16850592E5,"ts":"Fri, 26","ds":"Fri, 26 May","icon":7,"desc":"Cloudy.","temp":17,"templow":11,"cf":17,"wind":6,"wd":110,"hum":66,"pc":6},{"date":16851456E5,"ts":"Sat, 27","ds":"Sat, 27 May","icon":33,"desc":"Passing showers. Overcast.","temp":17,"templow":10,"cf":16,"wind":5,"wd":330,"hum":93,"pc":59,"rain":5.5 },{"date":1685232E6,"ts":"Sun, 28","ds":"Sun, 28 May","icon":21,"desc":"Isolated tstorms. Cloudy.","temp":18,"templow":10,"cf":17,"wind":7,"wd":320,"hum":72,"pc":51,"rain":0.9 }],"grid":{"temp":{"low":3,"high":19,"range":16},"prec":{"high":5.5},"time":86400000,"sections":15},"conv":{"prec":{"offset":0,"scale":1},"temp":{"offset":0,"scale":1},"wind":{"offset":0,"scale":0.869},"baro":{"offset":0,"scale":1}}};


    var box = makeBox(2, 2);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#127746;<a href="https://www.timeanddate.com/weather/@' + weatherLocation + '/ext">Weather</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div');
    var table = inside
        .append('table');

    for (var day of data.detail.slice(0, 7)) {
        var row = table
            .append('tr');
        row
            .append('td')
            .style('text-align', 'right')
            .style('font-weight', 'bold')
            .html(day.ds.split(',')[0] + ':&nbsp;');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html(day.templow + '&#xb0;');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html('to');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html(day.temp + '&#xb0;');
        row
            .append('td')
            .style('text-align', 'center')
            .append('img')
            .attr('src', 'https://c.tadst.com/gfx/w/svg/wt-' + day.icon + '.svg')
            .attr('width', '32px')
            .attr('height', '32px');
        row
            .append('td')
            .style('text-align', 'left')
            .html(day.desc)
    }
});

//////////////////////////////////////////////////

modules.push(function astronomy() {
	var imageData = {
		Source:    'https://apod.nasa.gov/apod/image/2305/AS17-152-23420_Ord1024c.jpg',
		Title:     'Apollo 17: The Crescent Earth',
		LinkImage: 'https://apod.nasa.gov/apod/image/2305/AS17-152-23420_Ord.jpg',
		LinkPage:  'https://apod.nasa.gov/apod/ap230513.html'
	}

	if (!imageData.Source.endsWith('/')) {
		var box = makeBox(2, 2);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x1F680;<a href="https://apod.nasa.gov/apod/astropix.html">Astronomy Picture of the Day</a>')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', imageData.LinkImage)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', imageData.Source);
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', imageData.LinkPage)
			.html(imageData.Title);
	}
});

//////////////////////////////////////////////////

modules.push(function nature() {
	var natureData = {
		Source:   'https://cdn2.outdoorphotographer.com/2023/05/Farewell-to-the-Kings-Robert-Henderson.jpeg',
		Title:    'Farewell to the Kings Robert Henderson',
		LinkPage: 'https://www.outdoorphotographer.com/blog/photo-of-the-day-by-robert-henderson-17/'
	}

	if (natureData.Source.length > 0) {
		var box = makeBox(2, 2);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x26FA;<a href="https://www.outdoorphotographer.com/blog/category/photo-of-the-day/">Outdoor Photo of the Day</a>')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', natureData.Source)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', natureData.Source);
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', natureData.LinkPage)
			.html(natureData.Title);
	}
});

//////////////////////////////////////////////////

modules.push(function wikipedia() {
	var pictureData = {
		Source:   'http://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Seven_Sisters_3.jpg/400px-Seven_Sisters_3.jpg',
		Title:    'Belle Tout Lighthouse',
		LinkPage: 'https://en.wikipedia.org/wiki//wiki/Belle_Tout_Lighthouse',
		Description: '    The <b><a href="/wiki/Belle_Tout_Lighthouse" title="Belle Tout Lighthouse">Belle Tout Lighthouse</a></b> is a decommissioned <a href="/wiki/Lighthouse" title="Lighthouse">lighthouse</a> and British landmark located at <a href="/wiki/Beachy_Head" title="Beachy Head">Beachy Head</a>, East Sussex, close to the town of <a href="/wiki/Eastbourne" title="Eastbourne">Eastbourne</a>. The cliffs near Beachy Head saw numerous <a href="/wiki/Shipwreck" title="Shipwreck">shipwrecks</a> in the 17th and early 18th centuries and a petition to erect a lighthouse started around 1691. Despite this, the lighthouse was not built until 1828, initially as a temporary wooden structure, and then as a permanent <a href="/wiki/Granite" title="Granite">granite</a> lighthouse which was designed by <a href="/wiki/Thomas_Stevenson" title="Thomas Stevenson">Thomas Stevenson</a> and became operational in 1834. The light was provided by a three-sided rotating array of oil lamps with ten lamps on each side, each lamp mounted within a <a href="/wiki/Parabolic_reflector" title="Parabolic reflector">parabolic reflector</a>. The Belle Tout lighthouse was decommissioned in 1902, when the replacement <a href="/wiki/Beachy_Head_Lighthouse" title="Beachy Head Lighthouse">Beachy Head Lighthouse</a> was built at the bottom of the cliffs. In 1999, the Grade&#160;II <a href="/wiki/Listed_building" title="Listed building">listed building</a> was moved in one piece to prevent it from succumbing to coastal erosion, and since 2010 it has operated as a luxury <a href="/wiki/Bed_and_breakfast" title="Bed and breakfast">bed and breakfast</a>.<small style="display: block; margin-top: 0.8em;">Photograph credit: <a href="/wiki/User:Kallerna" title="User:Kallerna">Kallerna</a></small>'
	}

	if (pictureData.Source.length > 0) {
		var box = makeBox(2, 3);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x1F9E9;Wikipedia Picture of the Day')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', pictureData.Source)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', pictureData.Source);
		/*
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', pictureData.LinkPage)
			.html(pictureData.Title);
		*/
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.style('overflow', 'hidden')
			.style('margin', '5px')
			.style('display', '-webkit-box')
			.style('-webkit-line-clamp', '6')
			.style('-webkit-box-orient', 'vertical')
			.html(pictureData.Description);
	}
});

//////////////////////////////////////////////////

modules.push(function tv() {

    var tvData = [{"channelid":505,"offset":1,"event":""},{"channelid":700,"offset":1,"event":[{"name":"This is BBC Two","description":"Highlights of programmes on BBC Two. [HD]","startTime":1684032000,"duration":10500,"svcId":700,"evtId":6856,"image":"\/ms\/img\/epg\/rb\/8df1-p0bvs8dg.jpg","hasTstv":false},{"name":"Gardeners\u0027 World","description":"A special programme from the first big flower show of the season - the RHS Malvern Spring Festival. Rachel de Thame and Nick Bailey explore show gardens packed full of ideas. [S] [HD]","startTime":1684042500,"duration":3600,"svcId":700,"evtId":6857,"image":"\/ms\/img\/epg\/rb\/8df1-p0fmytlb.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1683921671,"availabilityEnd":1715457671,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001ltth\u0026ui_id=4.0.0"},"episodeNo":9},{"name":"Countryfile","description":"Matt Baker and Margherita Taylor are back in the New Forest in Hampshire to catch up with the community and families who have come together to help Ukrainian refugees. [S] [HD]","startTime":1684046100,"duration":3300,"svcId":700,"evtId":6858,"image":"\/ms\/img\/epg\/rb\/8df1-p0fmh1rk.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1683482362,"availabilityEnd":1715018362,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001lt2h\u0026ui_id=4.0.0"},"episodeNo":6},{"name":"Beechgrove Garden","description":"6\/26. Blooms, veggies and fruit all get the expert treatment from George Anderson and Calum Clunie at Beechgrove Garden. [S] [HD]","startTime":1684049400,"duration":1800,"svcId":700,"evtId":6859,"image":"\/ms\/img\/epg\/rb\/8df1-p0fmf4hx.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1683833428,"availabilityEnd":2043032340,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=_DTT_m001lttb\u0026ui_id=4.0.0"},"seriesNo":7,"episodeNo":6},{"name":"Landward","description":"6\/26. Dougie visits Mar Lodge Estate in the Cairngorms to see the regeneration of the forest. [S] [HD]","startTime":1684051200,"duration":1800,"svcId":700,"evtId":6860,"image":"\/ms\/img\/epg\/rb\/8df1-p0flmwrl.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1683835199,"availabilityEnd":1715371199,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=_DTT_m001lvmn\u0026ui_id=4.0.0"},"seriesNo":19,"episodeNo":6},{"name":"Saturday Kitchen Best Bites","description":"Matt Tebbutt takes a look back at some of his favourite recipes and best moments from Saturday Kitchen. [S] [HD]","startTime":1684053000,"duration":5400,"svcId":700,"evtId":6861,"image":"\/ms\/img\/epg\/rb\/8df1-p0476l29.jpg","hasTstv":false,"seriesNo":2023},{"name":"Family Cooking Showdown","description":"Competitive food show. The three remaining families must volunteer one family member to cook without knowing the dish they have to prepare - a salted caramel tart. [S,AD] [HD]","startTime":1684058400,"duration":3600,"svcId":700,"evtId":6862,"image":"\/ms\/img\/epg\/rb\/8df1-p06nl3c0.jpg","hasTstv":false,"seriesNo":2,"episodeNo":2},{"name":"Food \u0026 Drink: Great British Grub","description":"3\/10. Tom Kerridge and Hugh Fearnley-Whittingstall go head to head to come up with the best British dish, while Oliver Peyton takes a look at cured meats from Blighty. [S,AD] [HD]","startTime":1684062000,"duration":1800,"svcId":700,"evtId":6863,"image":"\/ms\/img\/epg\/rb\/8df1-p02g4z04.jpg","hasTstv":false,"seriesNo":3,"episodeNo":3},{"name":"Dames: Talking Pictures","description":"Celia Imrie takes a look at some of the leading ladies who\u0027ve proved time and again, year after year, that they are amongst the very best of British talent. [S] [HD]","startTime":1684063800,"duration":2700,"svcId":700,"evtId":6864,"image":"\/ms\/img\/epg\/rb\/8df1-p090s001.jpg","hasTstv":false},{"name":"Tea with Mussolini","description":"Italian lad Luca, part-raised by English ladies living in Florence in 1935, re-enters their lives just as the encroaching war sees them forcibly relocated. [1999] [S] [HD]","startTime":1684066500,"duration":6600,"svcId":700,"evtId":6865,"image":"\/ms\/img\/epg\/rb\/8df1-p091qz3s.jpg","hasTstv":false},{"name":"Flog It!","description":"Paul Martin presents from Southwell, near Nottingham, where experts Caroline Hawley and Mark Stacey find antiques and collectables for auction. [S] [HD]","startTime":1684073100,"duration":3300,"svcId":700,"evtId":6866,"image":"\/ms\/img\/epg\/rb\/8df1-p0483s0c.jpg","hasTstv":false,"seriesNo":13,"episodeNo":7},{"name":"Race Across the World: The Reunion","description":"9\/9. With a thrilling third series of the Bafta-winning adventure now over, our five pairs meet up again to reflect on the race of a lifetime. [S,AD] [HD]","startTime":1684076400,"duration":3600,"svcId":700,"evtId":6867,"image":"\/ms\/img\/epg\/rb\/8df1-p0fb81rw.jpg","hasTstv":false,"seriesNo":3,"episodeNo":9},{"name":"Commando: Britain\u0027s Ocean Warriors","description":"4\/4. Would-be mountain leaders are pushed to the limit in the frozen wilds of northern Norway. [S] [HD]","startTime":1684080000,"duration":3600,"svcId":700,"evtId":6868,"image":"\/ms\/img\/epg\/rb\/8df1-p0c8xyj0.jpg","hasTstv":false,"seriesNo":1,"episodeNo":4},{"name":"Hairy Bikers\u0027 Mediterranean...","description":"...Adventure. 6\/6. The bikers travel from Valencia to Torremolinos in the footsteps of the Moors - eating their way through the spicy delights of southern Spanish cuisine. [S,AD] [HD]","startTime":1684083600,"duration":3600,"svcId":700,"evtId":6869,"image":"\/ms\/img\/epg\/rb\/8df1-p05wwc3d.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1655960400,"availabilityEnd":1971579600,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=b09rdth2\u0026ui_id=4.0.0"},"seriesNo":1,"episodeNo":6},{"name":"Inside the Factory","description":"Gregg visits a factory that churns out 32 million mints per day. Cherry Healey visits the largest sugar beet factory in Europe, and Ruth Goodman explores minty mouthwash marketing. [S,AD] [HD]","startTime":1684087200,"duration":3600,"svcId":700,"evtId":6870,"image":"\/ms\/img\/epg\/rb\/8df1-p0fl5gth.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1683662435,"availabilityEnd":1715284835,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001lt5l\u0026ui_id=4.0.0"},"seriesNo":10},{"name":"Antiques Roadshow","description":"Fiona and the team visit the Ulster Folk Museum near Belfast, where treasures include an unusual black opal, some creepy dolls and medals awarded for the Easter Rising in Dublin in 1916. [S] [HD]","startTime":1684090800,"duration":3600,"svcId":700,"evtId":6871,"image":"\/ms\/img\/epg\/rb\/8df1-p0c2hbtt.jpg","hasTstv":false,"seriesNo":44},{"name":"Simon Reeve\u0027s South America","description":"2\/5. Simon travels through Brazil, from the heart of the Amazon rainforest to the coast and the glamorous-but-troubled city of Rio de Janeiro. [S,AD] [HD]","startTime":1684094400,"duration":3600,"svcId":700,"evtId":6872,"image":"\/ms\/img\/epg\/rb\/8df1-p0cyrv2f.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1664586503,"availabilityEnd":1820692800,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=p0cxpygm\u0026ui_id=4.0.0"},"seriesNo":1,"episodeNo":2},{"name":"The Mauritanian","description":"Mohamedou Ould Slahi is picked up from Mauritania and taken to Guantanamo Bay. Contains very strong language, sexual violence and some upsetting scenes. [S] [HD]","startTime":1684098000,"duration":7500,"svcId":700,"evtId":6873,"image":"\/ms\/img\/epg\/rb\/8df1-p0fmnd86.jpg","hasTstv":false},{"name":"Miriam Margolyes - Almost...","description":"...Australian. 1\/3. Miriam Margolyes embarks on a two-month journey to discover what it is to be Australian. Contains some strong language. [S,AD] [HD]","startTime":1684105500,"duration":3600,"svcId":700,"evtId":6874,"image":"\/ms\/img\/epg\/rb\/8df1-p08kn60n.jpg","hasTstv":false,"seriesNo":1,"episodeNo":1},{"name":"Question Time","description":"Fiona Bruce presents an hour of discussion and debate from Bexhill-on-Sea. On the panel: Helen Whately MP, Thangam Debbonaire MP, Richard Coles, Ash Sarkar and Nick Ferrari. [S,SL] [HD]","startTime":1684109100,"duration":3600,"svcId":700,"evtId":6875,"image":"\/ms\/img\/epg\/rb\/8df1-p0fmvvfc.jpg","hasTstv":false,"seriesNo":2023,"episodeNo":29},{"name":"Last Woman on Earth with Sara...","description":"...Pascoe. 3\/3. Sara Pascoe learns Jordan\u0027s dying jobs, including herding in the desert with the Bedouin. [S,AD,SL] [HD]","startTime":1684112700,"duration":3600,"svcId":700,"evtId":6876,"image":"\/ms\/img\/epg\/rb\/8df1-p0fh9135.jpg","hasTstv":false,"seriesNo":2,"episodeNo":3},{"name":"This is BBC Two","description":"Highlights of programmes on BBC Two. [HD]","startTime":1684116300,"duration":13200,"svcId":700,"evtId":6877,"image":"\/ms\/img\/epg\/rb\/8df1-p0bvs8dg.jpg","hasTstv":false}]},{"channelid":1500,"offset":1,"event":""}];

    var box = makeBox(2, 3);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#x1F4FA;<a href="https://www.freesat.co.uk/tv-guide">TV</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div')
        .style('text-align', 'left');

    var channels = { 505: "BBC 1", 700: "BBC 2", 1500: "Channel 4" };

    var today = new Date();
    var primeTime = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 18, 0, 0);
    var unixStart = (+primeTime) / 1000;
    var unixEnd = unixStart + 60 * 60 * 6;
    var first = true;

    for (var channel of tvData) {
        if (!first) {
            first = false;
        } else {
            inside
                .append('br');
        }

        inside
            .append('p')
            .append('b')
            .text(channels[channel.channelid]);
        var list = inside
            .append('ul');
        for (var event of channel.event) {
            console.log(event);
            if (+event.startTime >= unixStart && +event.startTime < unixEnd) {
                list
                    .append('li')
                    .attr('class', 'ttt')
                    .attr('data-tt', '<img src=\"https://fdp-sv15-image-v1-0.gcprod1.freetime-platform.net/270x180-0' + event.image + '\" /><br/><b>' + event.name + '</b><br/>' + (+event.duration / 60) + ' minutes<br/>' + event.description)
                    .html('<span class="code">' + new Date(+event.startTime * 1000).toLocaleTimeString('en-GB').substr(0, 5) + "</span> - " + event.name);
            }
        }
    }
});

//////////////////////////////////////////////////

console.log('Error in backlog module: The server is not available. Contact your administrator if this condition persists.');

//////////////////////////////////////////////////

modules.push(function youtube() {

    var data = [
{ id: 'Cb6ruEWxFAE', title: "The Coronation Weekend | Behind the scenes with The Prince and Princess of Wales", label: "The Coronation Weekend | Behind the scenes with The Prince and Princess of Wales by The Prince and Princess of Wales 14 hours ago 4 minutes, 55 seconds 447,872 views" },
{ id: 'Zx07e5F27mg', title: "LEWIS CAPALDI | CHICKEN SHOP DATE", label: "LEWIS CAPALDI | CHICKEN SHOP DATE by Amelia Dimoldenberg 1 day ago 5 minutes, 58 seconds 709,819 views" },
{ id: 'CgtaQkfOUek', title: "How To COMPLETE Bundesliga Year In Review Objective!", label: "How To COMPLETE Bundesliga Year In Review Objective! by NepentheZ 2 1 day ago 9 minutes, 1 second 253,071 views" },
];

    var box = makeBox(2, 2);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#x1F4FC;<a href="https://www.youtube.com/feed/trending">YouTube Trending</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div');
    var table = inside
        .append('table')
        .style('width', '80%')
        .style('margin', '0 auto');

    var count = 0;
    for (var video of data) {
        var row = table
            .append('tr');
        row
            .append('td')
            .append('a')
            .attr('href', "https://www.youtube.com/watch?v=" + video.id)
            .append('img')
            .attr('src', 'https://i.ytimg.com/vi/' + video.id + '/hqdefault.jpg')
            .style('width', (480 / 4) + 'px')
            .style('height', (360 / 4) + 'px')
            .style('text-align', 'right')
            .attr('title', video.label);
        row
            .append('td')
            .style('text-align', 'left')
            .html(++count + '<br/><a href="https://www.youtube.com/watch?v=' + video.id + '">' + video.title + '</a>');
    }
});

//////////////////////////////////////////////////

modules.push(function f1() {
	var html =  "<a href='https://www.formula1.com/en/racing/2023/EmiliaRomagna.html'><img src='https://www.formula1.com/content/dam/fom-website/races/2023/Emilia_Romagna_Grand_Prix.png' style='height:auto;width:auto;max-height:180px;max-width:180px;' /></a><br/><span style='font-size:85%'>21 May</span>";
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F3C1;<a href="https://www.formula1.com/en/racing/2023.html">Next F1 Race</a>')
	box = box
		.append('div')
		.attr('class', 'inside')
		.append('div')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function media() {
	var html = '<p style="font-weight:bold;padding:10px 0 0 0">Audiobooks</p><ul><li><a href="https://www.google.com/search?q=Audiobooks+-+The Turbulent Term of Tyke Tyler">The Turbulent Term of Tyke Tyler</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Around the World in 80 Days">Around the World in 80 Days</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Animal Farm">Animal Farm</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Sherlock Holmes: A Study in Scarlet">Sherlock Holmes: A Study in Scarlet</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Books</p><ul><li><a href="https://www.google.com/search?q=Books+-+The Monkey\'s Paw (1902)">The Monkey\'s Paw (1902)</a></li><li><a href="https://www.google.com/search?q=Books+-+Fire Season (2011)">Fire Season (2011)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Films</p><ul><li><a href="https://www.google.com/search?q=Films+-+John Wick (2014)">John Wick (2014)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Whale (2022)">The Whale (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Gosford Park (2001)">Gosford Park (2001)</a></li><li><a href="https://www.google.com/search?q=Films+-+Dead Poets Society (1989)">Dead Poets Society (1989)</a></li><li><a href="https://www.google.com/search?q=Films+-+Sleepy Hollow (1999)">Sleepy Hollow (1999)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Shawshank Redemption (1994)">The Shawshank Redemption (1994)</a></li><li><a href="https://www.google.com/search?q=Films+-+Glass Onion (2022)">Glass Onion (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Mean Creek (2004)">Mean Creek (2004)</a></li><li><a href="https://www.google.com/search?q=Films+-+Triangle of Sadness (2022)">Triangle of Sadness (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Knives Out (2019)">Knives Out (2019)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Games</p><ul><li><a href="https://www.google.com/search?q=Games+-+Black Mesa">Black Mesa</a></li><li><a href="https://www.google.com/search?q=Games+-+Cyberpunk 2077">Cyberpunk 2077</a></li><li><a href="https://www.google.com/search?q=Games+-+Prison Architect">Prison Architect</a></li><li><a href="https://www.google.com/search?q=Games+-+Hitman WoA: Freelancer">Hitman WoA: Freelancer</a></li><li><a href="https://www.google.com/search?q=Games+-+Command & Conquer: Red Alert">Command & Conquer: Red Alert</a></li><li><a href="https://www.google.com/search?q=Games+-+100 Hidden Frogs">100 Hidden Frogs</a></li><li><a href="https://www.google.com/search?q=Games+-+Return to Monkey Island">Return to Monkey Island</a></li><li><a href="https://www.google.com/search?q=Games+-+Hitman 3">Hitman 3</a></li><li><a href="https://www.google.com/search?q=Games+-+Firewatch">Firewatch</a></li><li><a href="https://www.google.com/search?q=Games+-+Sniper Elite 4">Sniper Elite 4</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">TV</p><ul><li><a href="https://www.google.com/search?q=TV+-+Rise & Fall (S1)">Rise & Fall (S1)</a></li><li><a href="https://www.google.com/search?q=TV+-+The Cleaner (S2)">The Cleaner (S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+Clarkson\'s Farm (S2)">Clarkson\'s Farm (S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+How this Blind Girl… (S1)">How this Blind Girl… (S1)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S6)">Downton Abbey (S6)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S5)">Downton Abbey (S5)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S4)">Downton Abbey (S4)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S3)">Downton Abbey (S3)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S2)">Downton Abbey (S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S1)">Downton Abbey (S1)</a></li></ul>';
	var box = makeBox(2, 4);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F3AC;Recently Completed Media')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function singles() {

	function encode(text) {
		text = text.toLowerCase();
		text = text.replace(/&#39;/g, "'");
		text = text.replace(/&amp;/g, "and");
		return text;
    }

	var when = "12 May 2023 -  18 May 2023"
	var singlesData = {
		1: { Artist: "<a href='https://www.officialcharts.com/artist/28097/calvin-harris-ellie-goulding/'>calvin harris/ellie goulding</a>", Title: "<a href='https://www.officialcharts.com/search/singles/miracle/'>MIRACLE</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/41c-MdW3tfL._SL75_.jpg" },
2: { Artist: "<a href='https://www.officialcharts.com/artist/61748/david-kushner/'>david kushner</a>", Title: "<a href='https://www.officialcharts.com/search/singles/daylight/'>DAYLIGHT</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/51xqm8tKwsL._SL75_.jpg" },
3: { Artist: "<a href='https://www.officialcharts.com/artist/6692/ed-sheeran/'>ed sheeran</a>", Title: "<a href='https://www.officialcharts.com/search/singles/eyes-closed/'>EYES CLOSED</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/411mB8h9-uL._SL75_.jpg" },
4: { Artist: "<a href='https://www.officialcharts.com/artist/63953/libianca/'>libianca</a>", Title: "<a href='https://www.officialcharts.com/search/singles/people/'>PEOPLE</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/416HTM1LzFL._SL75_.jpg" },
5: { Artist: "<a href='https://www.officialcharts.com/artist/58181/rema/'>rema</a>", Title: "<a href='https://www.officialcharts.com/search/singles/calm-down/'>CALM DOWN</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/41BGcu-vUtL._SL75_.jpg" },

	};

	var box = makeBox(2, 2);
	box
		.append('div')
		.attr('class', 'title')
		.append('a')
		.attr('href', 'https://www.officialcharts.com/charts/singles-chart/')
		.html('&#x1F3B5;UK Singles Chart')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div');
	inside
		.append('p')
		.html(when + '<br/>&nbsp;');
	var table = inside
		.append('table');
	var position = 0;
	for (var item of Object.keys(singlesData)) {
		var title = encode(singlesData[item].Title.match(/>([^<]+)</)[1]);
		var artist = encode(singlesData[item].Artist.match(/>([^<]+)</)[1]);
		var row = table
			.append('tr');
		row
			.append('td')
			.html(++position);
		row
			.append('td')
			.append('a')
			.attr('href', 'https://www.youtube.com/results?search_query=' + artist + ' - ' + title)
			.append('img')
			.attr('src', singlesData[item].Image);
		row = row
			.append('td')
			.style('text-align', 'left')
		row
			.append('a')
			.attr('href', 'https://google.com/search?q=' + singlesData[item].Title + ' - ' + singlesData[item].Artist)
			.html(singlesData[item].Title)
		row
			.append('span')
			.html('<br/>' + singlesData[item].Artist);
	}
});

//////////////////////////////////////////////////

modules.push(function vanguard() {

	var data = [{ number: 173.64, tooltip: "Fri, May 12, 2023<br/>£173.64"},
{ number: 173.28, tooltip: "Thu, May 11, 2023<br/>£173.28"},
{ number: 172.48, tooltip: "Wed, May 10, 2023<br/>£172.48"},
{ number: 172.15, tooltip: "Tue, May 09, 2023<br/>£172.15"},
{ number: 172.44, tooltip: "Fri, May 05, 2023<br/>£172.44"},
{ number: 170.62, tooltip: "Thu, May 04, 2023<br/>£170.62"},
{ number: 171.92, tooltip: "Wed, May 03, 2023<br/>£171.92"},
{ number: 173.27, tooltip: "Tue, May 02, 2023<br/>£173.27"},
{ number: 173.62, tooltip: "Fri, Apr 28, 2023<br/>£173.62"},
{ number: 173.72, tooltip: "Thu, Apr 27, 2023<br/>£173.72"},
{ number: 171.70, tooltip: "Wed, Apr 26, 2023<br/>£171.70"},
{ number: 173.13, tooltip: "Tue, Apr 25, 2023<br/>£173.13"},
{ number: 174.57, tooltip: "Mon, Apr 24, 2023<br/>£174.57"},
{ number: 175.30, tooltip: "Fri, Apr 21, 2023<br/>£175.30"},
{ number: 174.67, tooltip: "Thu, Apr 20, 2023<br/>£174.67"},
{ number: 175.34, tooltip: "Wed, Apr 19, 2023<br/>£175.34"},
{ number: 176.00, tooltip: "Tue, Apr 18, 2023<br/>£176.00"},
{ number: 176.51, tooltip: "Mon, Apr 17, 2023<br/>£176.51"},
{ number: 175.17, tooltip: "Fri, Apr 14, 2023<br/>£175.17"},
{ number: 174.39, tooltip: "Thu, Apr 13, 2023<br/>£174.39"},
].reverse();

	var vanguardDates = {
		"Latest":      "Fri, May 12, 2023",
		"vs Day":      "Thu, May 11, 2023",
		"vs Week":     "Thu, May 04, 2023",
		"vs Month":    "Thu, Apr 13, 2023",
		"vs Year":     ""
	}

	var vanguardValues = {
		"Latest":      "£173.64/share",
		'vs Day':      "+0.21%",
		'vs Week':     "+1.77%",
		'vs Month':    "-0.43%",
		'vs Year':     "+2.61%"
	};

	var box = makeBox(3, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#128200;<a href="https://www.vanguardinvestor.co.uk">Vanguard</a>')
	box = box
		.append('div')
		.attr('class', 'inside');		
	var insideLeft = box
		.append('div')
		.style('display', 'inline')
		.style('position', 'absolute')
		.style('left', 0)
		.style('width', '37%');
	insideLeft
		.append('p')
		.append('a')
		.attr('href', 'https://www.vanguardinvestor.co.uk/investments/vanguard-ftse-global-all-cap-index-fund-gbp-acc')
		.html('FTSE Global All Cap<br/>Index Fund - Acc');
	insideLeft
		.append('p')
		.html('&nbsp;');
	var table = insideLeft
		.append('table');	
	
	for (var item of Object.keys(vanguardValues)) {
		var row = table
			.append('tr')
			.style('font-weight', item.startsWith("Latest") ? "bold" : "normal");
		if (vanguardDates[item].length > 0) {
			row
				.attr('class', 'ttt')
				.attr('data-tt', vanguardDates[item])
        }
		row
			.append('td')
			.style('text-align', 'left')
			.html(item + ':&nbsp;');
		row
			.append('td')
			.style('text-align', 'right')
			.attr('class', 'code')
			.html(vanguardValues[item]);
	}

	var insideRight = box
		.append('div')
		.style('display', 'inline')
		.style('position', 'absolute')
		.style('right', 0)
		.style('width', '66%');
	var chart = createLineChart(400, 150, insideRight, data, 2);
});

//////////////////////////////////////////////////

console.log('Error in crypto module: Sequence contains no elements');

//////////////////////////////////////////////////

modules.push(function moon() {
	var moonData = {
		Percent:  '34.4',
		Type:     '<a href="https://www.timeanddate.com/astronomy/moon/waning-crescent.html" title="Waning Crescent on the night between 13 May and 14 May">Waning Crescent</a>',
		Image:    'https://www.timeanddate.com/scripts/moon.php?i=0.344&p=3.368&r=0.266',
		Location: '11609021'
	}

	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#127769;<a href="https://www.timeanddate.com/moon/@' + moonData.Location + '">Moon</a>')
	box = box
		.append('div')
		.attr('class', 'inside');	
	var inside = box
		.append('div');
	inside
		.append('img')
		.attr('src', moonData.Image)
		.attr('width', '75%')
		.attr('height', '75%');		
	inside
		.append('p')
		.html(moonData.Type + ' (' + moonData.Percent + '%)');	
});

//////////////////////////////////////////////////

modules.push(function sun() {
	var sunData = {
		Rise:     '05:13',
		Set:      '20:52',
		Location: '11609021'
	};

	var box = makeBox(1, 1);	
	box
		.append('div')
		.attr('class', 'title')
		.html('&#128262;<a href="https://www.timeanddate.com/sun/@' + sunData.Location + '">Sun</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div');	
	var table = inside
		.append('table')
		.style('width', '150px');
	var row = table
		.append('tr')
		.style('font-size', '300%');
	row
		.append('td')
		.html('&#127748;')
	row
		.append('td')
		.html('&#127751;')
	var row = table
		.append('tr');
	row
		.append('td')
		.html('Rise')
	row
		.append('td')
		.html('Set')
var row = table
		.append('tr');
	row
		.append('td')
		.html(sunData.Rise)
	row
		.append('td')
		.html(sunData.Set)
});

//////////////////////////////////////////////////

modules.push(function word() {
	var wordData = {
		Word:       '',
		Definition: '<p><em>Florescence</em> refers to a state or period of being in bloom or of flourishing.</p>'
	}

	var clean = wordData.Definition.replace(/<[^>]+>/g, '');

	var box = makeBox(clean.length > 250 ? 2 : 1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4DC;<a href="https://www.merriam-webster.com/word-of-the-day">Word of the Day</a>')
	box = box
		.append('div')
		.attr('class', 'inside');	
	var inside = box
		.append('div');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.append('a')
		.attr('href', 'https://www.merriam-webster.com/dictionary/' + wordData.Word)
		.text(wordData.Word);
	inside
		.append('div')
		.style('padding', '5px')
		.html(wordData.Definition);	
});

//////////////////////////////////////////////////

modules.push(function twitter() {
	var html =  '<table><tr><td style="text-align: right">1</td><td><a href="https://twitter.com/search?q=%23Eurovision2023">#Eurovision2023</a></td></tr><tr><td style="text-align: right">2</td><td><a href="https://twitter.com/search?q=Finland">Finland</a></td></tr><tr><td style="text-align: right">3</td><td><a href="https://twitter.com/search?q=Norway">Norway</a></td></tr><tr><td style="text-align: right">4</td><td><a href="https://twitter.com/search?q=Germany">Germany</a></td></tr><tr><td style="text-align: right">5</td><td><a href="https://twitter.com/search?q=Croatia">Croatia</a></td></tr></table>';
	var title = 'United Kingdom';
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F426;<a href="https://twitter.com/explore/tabs/trending">Twitter Trending</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.style('text-align', 'center')
		.html(title);
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function twitter() {
	var html =  '<table><tr><td style="text-align: right">1</td><td><a href="https://twitter.com/search?q=Feds">Feds</a></td></tr><tr><td style="text-align: right">2</td><td><a href="https://twitter.com/search?q=%23Eurovision2023">#Eurovision2023</a></td></tr><tr><td style="text-align: right">3</td><td><a href="https://twitter.com/search?q=%23PulseAI">#PulseAI</a></td></tr><tr><td style="text-align: right">4</td><td><a href="https://twitter.com/search?q=%22Patriot+Front%22">Patriot Front</a></td></tr><tr><td style="text-align: right">5</td><td><a href="https://twitter.com/search?q=%22Chris+Sale%22">Chris Sale</a></td></tr></table>';
	var title = 'United States';
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F426;<a href="https://twitter.com/explore/tabs/trending">Twitter Trending</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.style('text-align', 'center')
		.html(title);
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function astronauts() {
	var astronautsData = {
		Amount:      '10',
		CountryHtml: '<table><tr><td><img class="flag ttt" data-tt="usa" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-usa.jpg" /></td><td><img class="flag ttt" data-tt="russia" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-russia.jpg" /></td><td><img class="flag ttt" data-tt="china" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-china.jpg" /></td><td><img class="flag ttt" data-tt="germany" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-germany.jpg" /></td></tr><tr style="vertical-align:top"><td>3</td><td>3</td><td>3</td><td>1</td></tr></table>'
	};

	var box = makeBox(1, 1);	
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F469;&#x200D;&#x1F680;<a href="https://www.howmanypeopleareinspacerightnow.com/">Astronauts</a>')
	box = box
		.append('div')
		.attr('class', 'inside')
		.append('div')
		.html("<p style='font-size:200%;font-weight:bold'>" + astronautsData.Amount + "</p><p>people are in space now.</p><p>&nbsp;</p>" + astronautsData.CountryHtml)
});

//////////////////////////////////////////////////



			createPage();

		</script>
	</body>
</html>