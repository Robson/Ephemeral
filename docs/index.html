<!DOCTYPE html>
<html lang="en">
	<head>
		<title>00:28 9-Jul - Ephemeral</title>		
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="https://d3js.org/d3.v3.min.js"></script>
		<meta http-equiv="refresh" content="1800">
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik&display=swap"> 		
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;500&display=swap"> 	
		<link rel="stylesheet" type="text/css" href="style.css" />
	</head>
	<body>
		<div id="container">
		</div>
		<div id="tt" style="display: none">
			<p id="tooltip_text"></p>
		</div>
		<div id="cls">&nbsp;</div>
		<script>

////////////////////////////////////////////////// tooltips

            var tooltip = d3.select('#tt');
            var tt = d3.select('#tt');

            function setTooltip(value) {
				d3.select('#tooltip_text').html(value);
            }

            function createTooltipTriggers() {
                d3.selectAll('.ttt')
                    .on("mouseover", function (d, i) {
                        setTooltip(d3.selectAll('.ttt')[0][i].attributes['data-tt'].value);
                    })
                    .on("mouseout", function () {
                        tt.style('display', 'none');
                    })
					.on("mousemove", function () {
                        if (x <= 0 || y <= 0) {
                            tt.style('display', 'none');
                        } else {
                            tt.style('display', null);
                        }
                        var x = d3.event.pageX - (tt.node().getBoundingClientRect().width / 2);
                        var y = d3.event.pageY - (tt.node().getBoundingClientRect().height + 5);
                        tt.style('left', ~~x + 'px');
                        tt.style('top', ~~y + 'px');

                    });
			}

////////////////////////////////////////////////// charts

            function map(n, a, b, y, z) {
                return (n - a) * (z - y) / (b - a) + y;
			}

			function createLineChart(width, height, element, data, boundary = 0) {
                var svg = element
                    .append('svg')
                    .attr('width', width + 'px')
                    .attr('height', height + 'px');

                var start = Math.min(...data.map(a => a.number));
				var end = Math.max(...data.map(a => a.number));

				switch (boundary) {
					case 1:
						var distance = (end - start) * 0.1;
						start -= distance;
						start = Math.max(0, start);
						end += distance;
						break;
					case 2:
						start = 0;
						break;
				}

				var xs = [];
				var ys = [];

                for (var i = 1; i <= data.length; i++) {
                    var x1 = map(i - 1, 0, data.length - 1, 3, width - 3);
					var y1 = map(data[i - 1].number, start, end, height, 6);
					xs.push(x1);
					ys.push(y1);
				}

				var area = d3.svg.area()
					.interpolate('cardinal')
					.x(function (d, i) { return xs[i] })
					.y0(function (d, i) { return height })
					.y1(function (d, i) { return ys[i] });

				svg
					.append('path')
                    .datum(d3.range(data.length).map(function(d, i) { return i }))
					.attr("d", area)
					.attr('fill', '#eee');

                var line = d3.svg.line()
                    .interpolate('cardinal')
                    .x(function (d, i) { return xs[i] })
                    .y(function (d, i) { return ys[i] });

                svg
                    .append('path')
                    .datum(d3.range(data.length).map(function (d, i) { return i }))
                    .attr("d", line)
					.attr('fill', 'transparent')
					.style('stroke-width', 2)
					.style('stroke', '#bbb');

				for (var i = 1; i <= data.length; i++) {
					var x1 = map(i - 1, 0, data.length - 1, 3, width - 3);
                    var x2 = map(i, 0, data.length - 1, 3, width - 3);
                    var y1 = map(data[i - 1].number, start, end, height, 6);
                    var g = svg
                        .append('g')
                        .attr('class', 'group');
                    g
						.append('circle')
						.attr('class', 'highlight')
                        .attr('cx', x1)
                        .attr('cy', y1 - 0.5)
                        .attr('r', 1)
						.attr('title', data[i - 1].number);
					g
						.append('rect')
						.attr('class', 'ttt')
						.attr('width', x2 - x1)
						.attr('height', height)
						.attr('x', (x1) - ((x2 - x1) / 2))
						.attr('y', 0)
						.attr('data-tt', data[i - 1].tooltip)
						.attr('style', 'fill:transparent');
                    /*g
                        .append('circle')
                        .attr('class', 'ttt')
                        .attr('cx', x1)
                        .attr('cy', y1 - 0.5)
                        .attr('r', 4)
                        .attr('opacity', '0.01')
                        .attr('z-index', 1000)
                        .attr('data-tt', data[i - 1].tooltip);*/
				}

                svg
                    .append('line')
                    .attr('x1', 3)
                    .attr('y1', height)
                    .attr('x2', width - 3)
                    .attr('y2', height)
                    .style('stroke-width', 2)
                    .style('stroke', '#bbb');
            }

////////////////////////////////////////////////// page
					
			var inside = 210;
			var padding = 8;
			var length = padding + inside + padding;
			var columns;
			var offsetX;
			var offsetY;
			var filled = [,];
			var low = 0;
			var modules = [];
								
			function random(start, end) {
				return start + Math.floor(Math.random() * (end - start));
			}
			
			function makeBox(width, height) {			
				var startX = 0, startY = 0;
				var hasLocation = false;
				for (var a = 0; a + height < filled.length && !hasLocation; a++) {
					for (var b = 0; b + width <= columns && !hasLocation; b++) {					
						var isValid = true;
						for (var c = 0; c < height && isValid; c++) {
							for (var d = 0; d < width && isValid; d++) {
								if (filled[a + c][b + d] > 0) {
									isValid = false;
								}
							}
						}
						if (isValid) {
							hasLocation = true;							
							startX = b;
							startY = a;
						}						
					}
				}				
				if (hasLocation) {
					for (var c = startY; c < startY + height && isValid; c++) {
						for (var d = startX; d < startX + width && isValid; d++) {
							filled[c][d] = 1;
						}
					}
					low = Math.max(low, offsetY + (startY * length) + ((height * length) - (padding * 2)));				
					return d3
						.select('#container')
						.append('div')
						.attr('class', 'box')
						.style('top', offsetY + startY * length + 'px')
						.style('left', offsetX + startX * length + 'px')						
						.style('width', ((width * length) - (padding * 2)) + 'px')
						.style('height', ((height * length) - (padding * 2)) + 'px');
				}
			}
			
			function createPage() {
				low = 0;
				d3.selectAll('.box').remove();
				var docWidth = document.body.clientWidth;		
				columns = ~~((docWidth - 20) / length);
				columns = Math.min(7, columns);
				offsetX = ((docWidth - (columns * length)) / 2) + 5;				
				offsetY = 100;
				for (var a = 0; a < 50; a++) {
					filled[a] = new Array(columns);
					for (var b = 0; b < columns; b++) {
						filled[a][b] = 0;
					}
				}
				for (var func of modules) {
					func();
				}
				d3
					.select('#cls')
					.style('top', (low) + 'px')
					.style('height', ((padding * 2) + offsetY) + 'px');
				createTooltipTriggers();
			}
			
			d3.select(window).on('resize', createPage);

////////////////////////////////////////////////// boxes
			
modules.push(function bbcCombine() {
	var html = '<table style="margin:0 10px"><tr><td style="vertical-align:top"><b>UK</b><br/><ul><li class="ttt" data-tt="<b>Rishi Sunak says the UK discourages use of cluster bombs in Ukraine</b><br/>The UK is one the countries which bans the weapons but will continue to support Ukraine, PM says." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/uk-66142554?at_medium=RSS&amp;at_campaign=KARANGA">Rishi Sunak says the UK discourages use of cluster bombs in Ukraine</a></li><li class="ttt" data-tt="<b>Girl who died in school crash \'adored and loved\', say family</b><br/>Selena Lau was described as &quot;an intelligent and cheeky girl adored and loved by everyone&quot;."><a href="https://www.bbc.co.uk/news/uk-england-london-66140022?at_medium=RSS&amp;at_campaign=KARANGA">Girl who died in school crash \'adored and loved\', say family</a></li><li class="ttt" data-tt="<b>BBC presenter accused of paying teen for explicit photos - report</b><br/>The Sun newspaper says an unnamed BBC presenter paid the teenager tens of thousands of pounds."><a href="https://www.bbc.co.uk/news/entertainment-arts-66140356?at_medium=RSS&amp;at_campaign=KARANGA">BBC presenter accused of paying teen for explicit photos - report</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/uk-66142554?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/107EA/production/_130326576_p0fzrt2m.jpg" class="ttt" data-tt="Prime minister Rishi Sunak" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>US & Canada</b><br/><ul><li class="ttt" data-tt="<b>Cluster bombs: Unease grows over US sending cluster bombs to Ukraine</b><br/>Washington is supplying the weapons to Kyiv, but they are outlawed in more than 100 countries." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/world-us-canada-66144153?at_medium=RSS&amp;at_campaign=KARANGA">Cluster bombs: Unease grows over US sending cluster bombs to Ukraine</a></li><li class="ttt" data-tt="<b>Janet Yellen asks China to co-operate on climate change action</b><br/>Treasury Secretary Janet Yellen calls on Beijing to invest more in efforts to transition from fossil fuels."><a href="https://www.bbc.co.uk/news/world-asia-66141559?at_medium=RSS&amp;at_campaign=KARANGA">Janet Yellen asks China to co-operate on climate change action</a></li><li class="ttt" data-tt="<b>El Paso Walmart gunman who killed 23 gets multiple life sentences</b><br/>The attacker may still face the death penalty if convicted for murder charges in state court."><a href="https://www.bbc.co.uk/news/world-us-canada-66111468?at_medium=RSS&amp;at_campaign=KARANGA">El Paso Walmart gunman who killed 23 gets multiple life sentences</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/world-us-canada-66144153?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/146EC/production/_130329638_8ad546e9cb5f6099df2f5f3d1280b5cbfade55aa1639_783_3320_18681000x563.jpg" class="ttt" data-tt="submunition of a cluster bomb found in Ukraine" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>World</b><br/><ul><li class="ttt" data-tt="<b>Cluster bombs: Unease grows over US sending cluster bombs to Ukraine</b><br/>Washington is supplying the weapons to Kyiv, but they are outlawed in more than 100 countries." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/world-us-canada-66144153?at_medium=RSS&amp;at_campaign=KARANGA">Cluster bombs: Unease grows over US sending cluster bombs to Ukraine</a></li><li class="ttt" data-tt="<b>Zelensky visits Snake Island on Ukraine War\'s 500th day</b><br/>The island became a symbol of Ukraine\'s resistance after troops there defied a Russian order to surrender."><a href="https://www.bbc.co.uk/news/world-europe-66141701?at_medium=RSS&amp;at_campaign=KARANGA">Zelensky visits Snake Island on Ukraine War\'s 500th day</a></li><li class="ttt" data-tt="<b>Latvia swears in Edgars Rinkevics as EU\'s first openly gay president</b><br/>Edgars Rinkevics came out in 2014 and has been a vocal champion of LGBT rights."><a href="https://www.bbc.co.uk/news/world-europe-66141706?at_medium=RSS&amp;at_campaign=KARANGA">Latvia swears in Edgars Rinkevics as EU\'s first openly gay president</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/world-us-canada-66144153?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/146EC/production/_130329638_8ad546e9cb5f6099df2f5f3d1280b5cbfade55aa1639_783_3320_18681000x563.jpg" class="ttt" data-tt="submunition of a cluster bomb found in Ukraine" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>Formula 1</b><br/><ul><li class="ttt" data-tt="<b>British Grand Prix: Max Verstappen pips Lando Norris to pole</b><br/>Red Bull\'s Max Verstappen steals pole position from McLaren\'s Lando Norris in a gripping and surprising qualifying session at the British Grand Prix." style="font-weight:bold"><a href="https://www.bbc.co.uk/sport/formula1/66142467?at_medium=RSS&amp;at_campaign=KARANGA">British Grand Prix: Max Verstappen pips Lando Norris to pole</a></li><li class="ttt" data-tt="<b>Jennie Gow: BBC Sport presenter returns to Formula 1 after stroke</b><br/>BBC Sport presenter Jennie Gow returns to Formula 1 for the first time since having a stroke in December."><a href="https://www.bbc.co.uk/sport/formula1/66143457?at_medium=RSS&amp;at_campaign=KARANGA">Jennie Gow: BBC Sport presenter returns to Formula 1 after stroke</a></li><li class="ttt" data-tt="<b>British Grand Prix: Brad Pitt at Silverstone filming Formula 1-inspired movie</b><br/>Brad Pitt begins filming at Silverstone for a new Formula 1-inspired movie."><a href="https://www.bbc.co.uk/sport/formula1/66142472?at_medium=RSS&amp;at_campaign=KARANGA">British Grand Prix: Brad Pitt at Silverstone filming Formula 1-inspired movie</a></li></ul></td><td><a href="https://www.bbc.co.uk/sport/formula1/66142467?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/live-experience/cps/624/cpsprodpb/16BFE/production/_130328139_norrisandverstappen.jpg"  style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>Technology</b><br/><ul><li class="ttt" data-tt="<b>Threads: Twitter threatens legal action over Meta\'s new app</b><br/>Its owner Elon Musk says &quot;competition is fine, cheating is not&quot; a day after the rival app launched." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/world-us-canada-66129215?at_medium=RSS&amp;at_campaign=KARANGA">Threads: Twitter threatens legal action over Meta\'s new app</a></li><li class="ttt" data-tt="<b>Instagram\'s Threads: \'Almost every influencer will be hopping on it\'</b><br/>Some of the people using Threads on its first day tell the BBC what they think about the app and its future."><a href="https://www.bbc.co.uk/news/technology-66122246?at_medium=RSS&amp;at_campaign=KARANGA">Instagram\'s Threads: \'Almost every influencer will be hopping on it\'</a></li><li class="ttt" data-tt="<b>Threads could cause real problems for Twitter</b><br/>Meta\'s new app benefits from its two billion Instagram followers that give it a huge shot in the arm."><a href="https://www.bbc.co.uk/news/technology-66118168?at_medium=RSS&amp;at_campaign=KARANGA">Threads could cause real problems for Twitter</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/world-us-canada-66129215?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/69A1/production/_130314072_gettyimages-1508076608.jpg" class="ttt" data-tt="Threads app on a phone with a Twitter logo in the background." style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr></table>';
	var box = makeBox(3, 2);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4F0;<a href="https://www.bbc.co.uk/news">BBC News</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function weather() {
    var weatherLocation = "11609021";

    var data={"copyright":"Contents are strictly for use by timeanddate.com","units":{"temp":"°C","prec":"mm","wind":"mph","baro":"mbar"},"detail":[{"hl":true,"hls":"3 Jul – 9 Jul","date":16888608E5,"ts":"Sun, 9","ds":"Sun, 9 Jul","icon":21,"desc":"Isolated tstorms late. Cloudy.","temp":20,"templow":14,"cf":20,"wind":12,"wd":200,"hum":60,"pc":73,"rain":1.9 },{"hl":true,"hls":"10 Jul – 16 Jul","date":16889472E5,"ts":"Mon, 10","ds":"Mon, 10 Jul","icon":33,"desc":"Showers late. Cloudy.","temp":20,"templow":12,"cf":20,"wind":12,"wd":200,"hum":60,"pc":71,"rain":3.3 },{"date":16890336E5,"ts":"Tue, 11","ds":"Tue, 11 Jul","icon":33,"desc":"Rain showers. Mostly cloudy.","temp":20,"templow":13,"cf":20,"wind":16,"wd":230,"hum":65,"pc":77,"rain":10.6 },{"date":168912E7,"ts":"Wed, 12","ds":"Wed, 12 Jul","icon":33,"desc":"Passing showers. Broken clouds.","temp":19,"templow":12,"cf":19,"wind":16,"wd":250,"hum":60,"pc":47,"rain":2.3 },{"date":16892064E5,"ts":"Thu, 13","ds":"Thu, 13 Jul","icon":7,"desc":"Cloudy.","temp":20,"templow":10,"cf":20,"wind":12,"wd":260,"hum":54,"pc":2},{"date":16892928E5,"ts":"Fri, 14","ds":"Fri, 14 Jul","icon":33,"desc":"Showers late. Overcast.","temp":19,"templow":12,"cf":18,"wind":15,"wd":190,"hum":72,"pc":41,"rain":1.7 },{"date":16893792E5,"ts":"Sat, 15","ds":"Sat, 15 Jul","icon":21,"desc":"Isolated tstorms. Cloudy.","temp":20,"templow":13,"cf":20,"wind":13,"wd":240,"hum":57,"pc":57,"rain":9},{"date":16894656E5,"ts":"Sun, 16","ds":"Sun, 16 Jul","icon":18,"desc":"Sprinkles. Mostly cloudy.","temp":17,"templow":11,"cf":17,"wind":16,"wd":250,"hum":61,"pc":51,"rain":0.9 },{"hl":true,"hls":"17 Jul – 23 Jul","date":1689552E6,"ts":"Mon, 17","ds":"Mon, 17 Jul","icon":18,"desc":"Drizzle. Overcast.","temp":18,"templow":11,"cf":17,"wind":17,"wd":220,"hum":75,"pc":56,"rain":2.1 },{"date":16896384E5,"ts":"Tue, 18","ds":"Tue, 18 Jul","icon":33,"desc":"Passing showers. Cloudy.","temp":18,"templow":13,"cf":18,"wind":13,"wd":230,"hum":73,"pc":50,"rain":0.8 },{"date":16897248E5,"ts":"Wed, 19","ds":"Wed, 19 Jul","icon":21,"desc":"Isolated tstorms. Overcast.","temp":18,"templow":14,"cf":18,"wind":15,"wd":210,"hum":74,"pc":51,"rain":2.3 },{"date":16898112E5,"ts":"Thu, 20","ds":"Thu, 20 Jul","icon":21,"desc":"Isolated tstorms. Mostly cloudy.","temp":21,"templow":15,"cf":21,"wind":17,"wd":230,"hum":63,"pc":58,"rain":1.8 },{"date":16898976E5,"ts":"Fri, 21","ds":"Fri, 21 Jul","icon":33,"desc":"Passing showers. Increasing cloudiness.","temp":21,"templow":14,"cf":21,"wind":17,"wd":210,"hum":75,"pc":66,"rain":8.9 },{"date":1689984E6,"ts":"Sat, 22","ds":"Sat, 22 Jul","icon":33,"desc":"Rain showers. Decreasing cloudiness.","temp":22,"templow":13,"cf":23,"wind":13,"wd":300,"hum":70,"pc":74,"rain":9.7 },{"date":16900704E5,"ts":"Sun, 23","ds":"Sun, 23 Jul","icon":21,"desc":"Isolated tstorms. Afternoon clouds.","temp":18,"templow":11,"cf":17,"wind":11,"wd":260,"hum":60,"pc":54,"rain":1}],"grid":{"temp":{"low":10,"high":22,"range":12},"prec":{"high":10.6},"time":86400000,"sections":15},"conv":{"prec":{"offset":0,"scale":1},"temp":{"offset":0,"scale":1},"wind":{"offset":0,"scale":0.869},"baro":{"offset":0,"scale":1}}};


    var box = makeBox(2, 2);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#127746;<a href="https://www.timeanddate.com/weather/@' + weatherLocation + '/ext">Weather</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div');
    var table = inside
        .append('table');

    for (var day of data.detail.slice(0, 7)) {
        var row = table
            .append('tr');
        row
            .append('td')
            .style('text-align', 'right')
            .style('font-weight', 'bold')
            .html(day.ds.split(',')[0] + ':&nbsp;');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html(day.templow + '&#xb0;');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html('to');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html(day.temp + '&#xb0;');
        row
            .append('td')
            .style('text-align', 'center')
            .append('img')
            .attr('src', 'https://c.tadst.com/gfx/w/svg/wt-' + day.icon + '.svg')
            .attr('width', '32px')
            .attr('height', '32px');
        row
            .append('td')
            .style('text-align', 'left')
            .html(day.desc)
    }
});

//////////////////////////////////////////////////

modules.push(function astronomy() {
	var imageData = {
		Source:    'https://apod.nasa.gov/apod/image/2307/PSP_007769_9010_IRB_Stickney1024.jpg',
		Title:     'Stickney Crater',
		LinkImage: 'https://apod.nasa.gov/apod/image/2307/PSP_007769_9010_IRB_Stickney.jpg',
		LinkPage:  'https://apod.nasa.gov/apod/ap230708.html'
	}

	if (!imageData.Source.endsWith('/')) {
		var box = makeBox(2, 2);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x1F680;<a href="https://apod.nasa.gov/apod/astropix.html">Astronomy Picture of the Day</a>')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', imageData.LinkImage)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', imageData.Source);
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', imageData.LinkPage)
			.html(imageData.Title);
	}
});

//////////////////////////////////////////////////

modules.push(function nature() {
	var natureData = {
		Source:   'https://cdn2.outdoorphotographer.com/2023/05/Farewell-to-the-Kings-Robert-Henderson.jpeg',
		Title:    'Farewell to the Kings Robert Henderson',
		LinkPage: 'https://www.outdoorphotographer.com/blog/photo-of-the-day-by-robert-henderson-17/'
	}

	if (natureData.Source.length > 0) {
		var box = makeBox(2, 2);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x26FA;<a href="https://www.outdoorphotographer.com/blog/category/photo-of-the-day/">Outdoor Photo of the Day</a>')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', natureData.Source)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', natureData.Source);
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', natureData.LinkPage)
			.html(natureData.Title);
	}
});

//////////////////////////////////////////////////

modules.push(function wikipedia() {
	var pictureData = {
		Source:   'http://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Pauline_Kirby_%285493900611%29.jpg/350px-Pauline_Kirby_%285493900611%29.jpg',
		Title:    'Pauline Kirby',
		LinkPage: 'https://en.wikipedia.org/wiki//wiki/Pauline_Kirby',
		Description: '    <b><a href="/wiki/Pauline_Kirby" title="Pauline Kirby">Pauline Kirby</a></b> (July 9, 1905 – November 10, 1981) was a member of the <a href="/wiki/United_States_Army_Nurse_Corps" title="United States Army Nurse Corps">United States Army Nurse Corps</a>. She was born in <a href="/wiki/Greenwood,_Mississippi" title="Greenwood, Mississippi">Greenwood, Mississippi</a>. She held several positions during her 30 years in the United States Army Nurse Corps and the <a href="/wiki/Army_of_the_United_States" title="Army of the United States">Army of the United States</a>, and was one of the first two Nurse Corps officers to serve in the temporary grade of <a href="/wiki/Colonel" title="Colonel">Colonel</a>.<small style="display: block; margin-top: 0.8em;">Photograph credit: <a href="/wiki/United_States_Army" title="United States Army">United States Army</a>; restored by <a href="/wiki/User:Adam_Cuerden" title="User:Adam Cuerden">Adam Cuerden</a></small>'
	}

	if (pictureData.Source.length > 0) {
		var box = makeBox(2, 3);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x1F9E9;Wikipedia Picture of the Day')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', pictureData.Source)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', pictureData.Source);
		/*
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', pictureData.LinkPage)
			.html(pictureData.Title);
		*/
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.style('overflow', 'hidden')
			.style('margin', '5px')
			.style('display', '-webkit-box')
			.style('-webkit-line-clamp', '6')
			.style('-webkit-box-orient', 'vertical')
			.html(pictureData.Description);
	}
});

//////////////////////////////////////////////////

modules.push(function tv() {

    var tvData = [{"channelid":505,"offset":1,"event":""},{"channelid":700,"offset":1,"event":[{"name":"This is BBC Two","description":"Highlights of programmes on BBC Two. [HD]","startTime":1688868600,"duration":12300,"svcId":700,"evtId":8352,"image":"\/ms\/img\/epg\/rb\/8df1-p0bvs8dg.jpg","hasTstv":false},{"name":"Gardeners\u0027 World","description":"In a special programme, Gardeners\u0027 World comes from the RHS Hampton Court Palace Garden Festival. Arit Anderson, Toby Buckland and Adam Frost share highlights of the show gardens. [S] [HD]","startTime":1688880900,"duration":3600,"svcId":700,"evtId":8273,"image":"\/ms\/img\/epg\/rb\/8df1-p0fzjsk2.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1688760000,"availabilityEnd":1720382400,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001nkhk\u0026ui_id=4.0.0"},"episodeNo":16},{"name":"Countryfile","description":"John Craven and Margherita Taylor are in Charsfield to celebrate one of the UK\u0027s most respected rural writers, Ronald Blythe, whose works were inspired by the Suffolk countryside. [S] [HD]","startTime":1688884500,"duration":3300,"svcId":700,"evtId":8274,"image":"\/ms\/img\/epg\/rb\/8df1-p0fz326g.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1688328053,"availabilityEnd":1719864053,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001nj82\u0026ui_id=4.0.0"}},{"name":"Beechgrove Garden","description":"14\/26. It\u0027s viewer question time at Beechgrove Garden as Carole Baxter and head gardener Scott Smith tackle some of the topical queries they have received. [S] [HD]","startTime":1688887800,"duration":1800,"svcId":700,"evtId":8275,"image":"\/ms\/img\/epg\/rb\/8df1-p0fywrtc.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1688671779,"availabilityEnd":2043032340,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=_DTT_m001nkhh\u0026ui_id=4.0.0"},"seriesNo":7,"episodeNo":14},{"name":"The Edible Garden","description":"6\/6. Alys Fowler tries to avoid shop-bought fruit and veg and live off home-grown produce. Alys shows how an edible garden can provide for the leaner months. [S,AD] [HD]","startTime":1688889600,"duration":1800,"svcId":700,"evtId":8276,"image":"\/ms\/img\/epg\/rb\/8df1-p08mq76z.jpg","hasTstv":false,"episodeNo":6},{"name":"Saturday Kitchen Best Bites","description":"Matt Tebbutt takes a look back at some of his favourite recipes and best moments from Saturday Kitchen. [S] [HD]","startTime":1688891400,"duration":5400,"svcId":700,"evtId":8277,"image":"\/ms\/img\/epg\/rb\/8df1-p0476l29.jpg","hasTstv":false,"seriesNo":2023},{"name":"Wimbledon","description":"Live coverage of day seven from the All England Club as the Wimbledon Championships reach the fourth-round stage. Presented by Isa Guha and Clare Balding. [S] [HD]","startTime":1688896800,"duration":14400,"svcId":700,"evtId":8278,"image":"\/ms\/img\/epg\/rb\/8df1-p0fwmvx5.jpg","hasTstv":false,"seriesNo":2023},{"name":"Wimbledon","description":"Further coverage of day seven from the All England Club as the Wimbledon Championships reach the fourth-round stage. Presented by Isa Guha and Clare Balding. [S] [HD]","startTime":1688911200,"duration":10800,"svcId":700,"evtId":8279,"image":"\/ms\/img\/epg\/rb\/8df1-p0fwmvx5.jpg","hasTstv":false,"seriesNo":2023},{"name":"The Second Best Exotic Marigold...","description":"...Hotel. With only one room still vacant, Sonny dreams of opening a second hotel, but a rivalry with his fianc\u00e9e\u0027s friend threatens his marriage plans and expansionist ambitions. [2015] [S,AD] [HD]","startTime":1688922000,"duration":7200,"svcId":700,"evtId":8280,"image":"\/ms\/img\/epg\/rb\/8df1-p0d1h0s2.jpg","hasTstv":false},{"name":"Wimbledon","description":"As day seven of the world-famous championships draws to a close, can anyone cause an upset and reach the quarter-finals at Wimbledon? [S] [HD]","startTime":1688929200,"duration":3600,"svcId":700,"evtId":8281,"image":"\/ms\/img\/epg\/rb\/8df1-p0fwmvx5.jpg","hasTstv":false,"seriesNo":2023},{"name":"Today at Wimbledon","description":"Qasa Alom and guests look back at the day\u0027s play at Wimbledon. Featuring highlights from the biggest matches, along with analysis and discussion of the main talking points. [S] [HD]","startTime":1688932800,"duration":3600,"svcId":700,"evtId":8282,"image":"\/ms\/img\/epg\/rb\/8df1-p0fwmvx5.jpg","hasTstv":false,"seriesNo":2023},{"name":"The Misadventures of Romesh...","description":"...Ranganathan. 1\/4. In Zimbabwe, Rom gets caught in a storm and re-enacts the film Titanic on a houseboat. Contains some strong language. [S,AD] [HD]","startTime":1688936400,"duration":3600,"svcId":700,"evtId":8283,"image":"\/ms\/img\/epg\/rb\/8df1-p07htxrw.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1647324000,"availabilityEnd":1710482340,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m00077gn\u0026ui_id=4.0.0"},"seriesNo":2,"episodeNo":1},{"name":"Today at the Test: England v...","description":"...Australia. Highlights of day four in the Third Test of the Ashes series between England and Australia. [S] [HD]","startTime":1688940000,"duration":3600,"svcId":700,"evtId":8284,"image":"\/ms\/img\/epg\/rb\/8df1-p0fv1s7r.jpg","hasTstv":false,"seriesNo":8},{"name":"Your Home Made Perfect","description":"3\/8. Using virtual reality, two top architects compete to remodel actress Jill Halfpenny and her son Harvey\u0027s flat in the north east of England. [S,AD] [HD]","startTime":1688943600,"duration":3600,"svcId":700,"evtId":8285,"image":"\/ms\/img\/epg\/rb\/8df1-p0fxjnk2.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1688500832,"availabilityEnd":1723665540,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001nk43\u0026ui_id=4.0.0"},"seriesNo":4,"episodeNo":3},{"name":"Question Time","description":"Fiona Bruce presents an hour of topical debate from Fleetwood in Lancashire, with Johnny Mercer MP, Bridget Phillipson MP, Kate Andrews and Dale Vince. [S,SL] [HD]","startTime":1688947200,"duration":3600,"svcId":700,"evtId":8286,"image":"\/ms\/img\/chan\/BBCTwoHD-App-Placeholder-1280x720.jpg","hasTstv":false,"seriesNo":2023,"episodeNo":37},{"name":"Africa Rising with Afua Hirsch","description":"3\/3. Afua Hirsch discovers new art, music and theatre in South Africa\u0027s townships as she explores creativity emerging in amapiano dancing, hair braiding and black surf culture. [S,AD,SL] [HD]","startTime":1688950800,"duration":3600,"svcId":700,"evtId":8287,"image":"\/ms\/img\/epg\/rb\/8df1-p0ft1y3p.jpg","hasTstv":false,"seriesNo":1,"episodeNo":3},{"name":"This is BBC Two","description":"Highlights of programmes on BBC Two. [HD]","startTime":1688954400,"duration":12600,"svcId":700,"evtId":8288,"image":"\/ms\/img\/epg\/rb\/8df1-p0bvs8dg.jpg","hasTstv":false}]},{"channelid":1500,"offset":1,"event":[{"name":"Chateau DIY","description":"At Ch\u00e2teau de Bourneau, Erin and JB are alarmed to discover that their dormer windows are falling apart, leading to water damage. (S3 Ep25)  [AD,S]","startTime":1688869500,"duration":3000,"svcId":1500,"evtId":30321,"hasTstv":false,"seriesNo":3,"episodeNo":25},{"name":"Hollyoaks Omnibus","description":"The village comes together for Juliet\u0027s funeral, and Donna-Marie is struggling to cope. As the teenagers of the village get ready for their prom, Charlie doesn\u0027t know what he really wants.  [AD,S,SL]","startTime":1688872500,"duration":7200,"svcId":1500,"evtId":34642,"hasTstv":false},{"name":"Cheers","description":"Baby Balk: Rebecca and Sam decide to have a baby together, but when she tells him she wants the conception to be special, it puts him off. They each seek the Cranes\u0027 advice. (S10 Ep1\/26)  [S]","startTime":1688879700,"duration":1500,"svcId":1500,"evtId":34409,"image":"\/ms\/img\/epg\/rb\/5d52-598975.l.png","hasTstv":false,"seriesNo":10,"episodeNo":1},{"name":"Cheers","description":"Get Your Kicks on Route 666: Frasier takes the guys on a road trip to rediscover his \u0027inner man\u0027, but things don\u0027t go to plan. Carla hires a relative to help out at the bar. (S10 Ep2\/26)  [S]","startTime":1688881200,"duration":1500,"svcId":1500,"evtId":34410,"image":"\/ms\/img\/epg\/rb\/5d52-52150.l.png","hasTstv":false,"seriesNo":10,"episodeNo":2},{"name":"The King of Queens","description":"Black List: Doug tries to find his \u0027roots\u0027 when Deacon snubs him for a new Black friend. And Carrie\u0027s manicurist refuses to see her. (S7 Ep16\/22)  [AD,S]","startTime":1688882700,"duration":1500,"svcId":1500,"evtId":34949,"image":"\/ms\/img\/epg\/rb\/5d52-comedy.genre.l.png","hasTstv":false,"seriesNo":7,"episodeNo":16},{"name":"The King of Queens","description":"Wish Boned: Doug agrees to take Arthur on a trip to St Louis, on the condition that he never has to see his naked back again. But all does not go to plan. (S7 Ep17\/22)  [AD,S]","startTime":1688884200,"duration":1800,"svcId":1500,"evtId":34412,"image":"\/ms\/img\/epg\/rb\/5d52-385569754.l.png","hasTstv":false,"seriesNo":7,"episodeNo":17},{"name":"The King of Queens","description":"Van, Go: Doug upsets a waitress so much that she demands to fight him once he\u0027s finished his meal. (S7 Ep18\/22)  [AD,S]","startTime":1688886000,"duration":1800,"svcId":1500,"evtId":34413,"image":"\/ms\/img\/epg\/rb\/5d52-385569766.l.png","hasTstv":false,"seriesNo":7,"episodeNo":18},{"name":"Bake Off: The Professionals","description":"The search for the best patisserie team in Britain returns as new host Ellie Taylor and Liam Charles welcome more new pastry chefs. Whose op\u00e9ra aux fruit hits the high notes? (S6 Ep1\/10)  [AD,S]","startTime":1688887800,"duration":3600,"svcId":1500,"evtId":34950,"image":"\/ms\/img\/epg\/rb\/5d52-7814309.l.png","hasTstv":false,"seriesNo":6,"episodeNo":1},{"name":"Live: Sunday Brunch","description":"Leigh Francis chats about taking his characters out on tour for the very first time. Ray BLK talks about musical TV series Champion. Plus: Kieran Hodgson, Alastair Campbell and more.  [S]","startTime":1688891400,"duration":10800,"svcId":1500,"evtId":34414,"image":"\/ms\/img\/epg\/rb\/5d52-7844746.l.png","hasTstv":false},{"name":"The Simpsons","description":"The Computer Wore Menace Shoes: After Homer publishes damaging rumours on \u0027Mr X\u0027s Web Page\u0027, he ends up on a Prisoner-style island, complete with guest star Patrick McGoohan. (S12 Ep6\/21)  [AD,S]","startTime":1688902200,"duration":1500,"svcId":1500,"evtId":34415,"image":"\/ms\/img\/epg\/rb\/5d52-1081919.l.png","hasTstv":false,"seriesNo":12,"episodeNo":6},{"name":"The Simpsons","description":"A Tale of Two Springfields: When area code and class rivalries split Springfield in two, Homer becomes mayor of \u0027New Springfield\u0027. (S12 Ep2\/21)  [AD,S]","startTime":1688903700,"duration":2100,"svcId":1500,"evtId":34416,"image":"\/ms\/img\/epg\/rb\/5d52-1594309.l.png","hasTstv":false,"seriesNo":12,"episodeNo":2},{"name":"Live: F1 British GP Build-Up","description":"The British drivers will be excited to return to their home circuit and will be hoping to end up on the podium in front of the local fans. Steve Jones and Lee McKenzie present.  [S]","startTime":1688905800,"duration":3600,"svcId":1500,"evtId":34417,"image":"\/ms\/img\/epg\/rb\/5d52-7844757.l.png","hasTstv":false},{"name":"Live: F1 British Grand Prix","description":"The British drivers return to their home circuit, aiming to end up on the podium in front of the local fans. Can they manage it? Steve Jones and Lee McKenzie present.  [S]","startTime":1688909400,"duration":9600,"svcId":1500,"evtId":34418,"image":"\/ms\/img\/epg\/rb\/5d52-7844769.l.png","hasTstv":false},{"name":"Live: F1 British GP Reaction","description":"Did any of the British drivers make it onto the podium in front of the home fans? Or did Max Verstappen continue his dominance? Steve Jones and Lee McKenzie have all the live reaction.  [S]","startTime":1688919000,"duration":3000,"svcId":1500,"evtId":34419,"image":"\/ms\/img\/epg\/rb\/5d52-7844773.l.png","hasTstv":false},{"name":"Guy Martin\u0027s World Speed Records","description":"Guy Martin looks back at his most amazing high-speed achievements, from fastest tractor to fastest toboggan and the wall of death.  [AD,S]","startTime":1688922000,"duration":1800,"svcId":1500,"evtId":34420,"image":"\/ms\/img\/epg\/rb\/5d52-documen.genre.l.png","hasTstv":false},{"name":"Channel 4 News","description":"Channel 4\u0027s flagship news programme. Including the weather.  [S]","startTime":1688923800,"duration":1800,"svcId":1500,"evtId":34421,"image":"\/ms\/img\/epg\/rb\/5d52-2023390.l.png","hasTstv":false},{"name":"Jamie\u0027s One-Pan Wonders","description":"Jamie Oliver gathers some of his favourite one-pan dishes that always deliver, from roast lamb and fish pie to toffee apple desserts... all done in one pan, all totally delicious.  [S]","startTime":1688925600,"duration":3600,"svcId":1500,"evtId":34422,"image":"\/ms\/img\/epg\/rb\/5d52-7844790.l.png","hasTstv":false},{"name":"New: Exploring India\u0027s...","description":"...Treasures with Bettany Hughes: The North: Bettany discovers India\u0027s greatest archaeological, architectural and cultural treasures, starting at Varanasi and then the Lake Palace. (Ep1\/2)  [AD,S]","startTime":1688929200,"duration":3600,"svcId":1500,"evtId":34423,"image":"\/ms\/img\/epg\/rb\/5d52-documen.genre.l.png","hasTstv":false,"seriesNo":1,"episodeNo":1},{"name":"A Quiet Place II","description":"(2020) Network premiere. Horror sequel with Emily Blunt and Cillian Murphy. Can a family evade aliens with super-hearing, armed only with a hearing aid, and find a community to live in?  [AD,S]","startTime":1688932800,"duration":6600,"svcId":1500,"evtId":34424,"image":"\/ms\/img\/epg\/rb\/5d52-3495171.l.png","hasTstv":false},{"name":"Celebrity Gogglebox","description":"On the \u0027Box this time, Is It Cake, Too?, Hijack, Steph\u0027s Packed Lunch and Dr. Pimple Popper. As seen by Mo Gilligan, Jon Richardson, Gyles Brandreth, Melanie C and NDubz. (S5 Ep4)  [AD,S]","startTime":1688939400,"duration":3600,"svcId":1500,"evtId":34951,"image":"\/ms\/img\/epg\/rb\/5d52-reality.genre.l.png","hasTstv":false,"seriesNo":5,"episodeNo":4},{"name":"F1 British GP Highlights","description":"Last year, Carlos Sainz took his first grand prix victory here on his 150th\u00a0race in Formula 1. Will he be victorious again or will Max Verstappen\u0027s dominance continue? Steve Jones presents.  [S]","startTime":1688943000,"duration":3600,"svcId":1500,"evtId":34426,"image":"\/ms\/img\/epg\/rb\/5d52-7844839.l.png","hasTstv":false},{"name":"Ramsay\u0027s Kitchen Nightmares USA","description":"In Florida, Gordon Ramsay visits Italian restaurant Anna Vincenzo\u0027s, where owner CeCe has lost her way in the kitchen. But can she take constructive criticism from Gordon? (S3 Ep9)  [S,SL]","startTime":1688946600,"duration":3300,"svcId":1500,"evtId":34952,"image":"\/ms\/img\/epg\/rb\/5d52-1020846.l.png","hasTstv":false,"seriesNo":2,"episodeNo":9},{"name":"Come Dine with Me","description":"Edinburgh. The first host, 27-year-old interior designer and gentle giant James, plans to blow his guests\u0027 minds with his spicy Mexican menu. (Ep1\/5)  [AD,S]","startTime":1688949900,"duration":1500,"svcId":1500,"evtId":34427,"image":"\/ms\/img\/epg\/rb\/5d52-game.genre.l.png","hasTstv":false},{"name":"Come Dine with Me","description":"Edinburgh. Grandmother Katy plans an out-of-season \u0027Christmas tartan\u0027 evening, complete with costumes, games and a few revelations. (Ep2\/5)  [AD,S]","startTime":1688951400,"duration":1500,"svcId":1500,"evtId":34428,"image":"\/ms\/img\/epg\/rb\/5d52-game.genre.l.png","hasTstv":false},{"name":"Come Dine with Me","description":"Edinburgh. Glamorous solicitor Aisling hosts an Irish party. She has a piper on her doorstep, but Katy\u0027s not a fan of her main, and the guests all struggle with \u0027clean eating\u0027. (Ep3\/5)  [AD,S]","startTime":1688952900,"duration":1800,"svcId":1500,"evtId":34429,"image":"\/ms\/img\/epg\/rb\/5d52-game.genre.l.png","hasTstv":false},{"name":"Come Dine with Me","description":"Edinburgh. American writer Harry serves up a menu inspired by his family, while Bruce breaks his own etiquette rules, and Aisling draws Bruce\u0027s portrait with razor-sharp hilarity. (Ep4\/5)  [AD,S]","startTime":1688954700,"duration":1500,"svcId":1500,"evtId":34430,"image":"\/ms\/img\/epg\/rb\/5d52-game.genre.l.png","hasTstv":false},{"name":"Come Dine with Me","description":"Edinburgh. Style-conscious Bruce hosts the final night. All week he\u0027s expressed a taste for the finer things in life. With expectations high, can he put his food where his mouth is? (Ep5\/5)  [AD,S]","startTime":1688956200,"duration":1800,"svcId":1500,"evtId":34431,"image":"\/ms\/img\/epg\/rb\/5d52-game.genre.l.png","hasTstv":false},{"name":"The Dog House","description":"Lexi seeks a bedtime buddy. Jasmine wants a pooch now her twin sister\u0027s off to uni. And a rare cross of lurcher and old English sheepdog helps a priest find his inner silliness. (S2 Ep7)  [AD,S,SL]","startTime":1688958000,"duration":3300,"svcId":1500,"evtId":34954,"image":"\/ms\/img\/epg\/rb\/5d52-4172736.l.png","hasTstv":false,"seriesNo":2,"episodeNo":7},{"name":"Grand Designs Australia","description":"David and Sarah love Tamborine Mountain in Queensland, where they got married 22 years ago. They\u0027re now building a long-awaited home away from home there, on lush mountain acreage. (S8 Ep9)  [AD,S]","startTime":1688961300,"duration":3300,"svcId":1500,"evtId":34953,"image":"\/ms\/img\/epg\/rb\/5d52-reality.genre.l.png","hasTstv":false,"seriesNo":8,"episodeNo":9}]}];

    var box = makeBox(2, 3);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#x1F4FA;<a href="https://www.freesat.co.uk/tv-guide">TV</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div')
        .style('text-align', 'left');

    var channels = { 505: "BBC 1", 700: "BBC 2", 1500: "Channel 4" };

    var today = new Date();
    var primeTime = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 18, 0, 0);
    var unixStart = (+primeTime) / 1000;
    var unixEnd = unixStart + 60 * 60 * 6;
    var first = true;

    for (var channel of tvData) {
        if (!first) {
            first = false;
        } else {
            inside
                .append('br');
        }

        inside
            .append('p')
            .append('b')
            .text(channels[channel.channelid]);
        var list = inside
            .append('ul');
        for (var event of channel.event) {
            console.log(event);
            if (+event.startTime >= unixStart && +event.startTime < unixEnd) {
                list
                    .append('li')
                    .attr('class', 'ttt')
                    .attr('data-tt', '<img src=\"https://fdp-sv15-image-v1-0.gcprod1.freetime-platform.net/270x180-0' + event.image + '\" /><br/><b>' + event.name + '</b><br/>' + (+event.duration / 60) + ' minutes<br/>' + event.description)
                    .html('<span class="code">' + new Date(+event.startTime * 1000).toLocaleTimeString('en-GB').substr(0, 5) + "</span> - " + event.name);
            }
        }
    }
});

//////////////////////////////////////////////////

modules.push(function backlog() {
	var box = makeBox(1, 2);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4CB;Backlog')
	var table = box
		.append('div')
		.attr('class', 'inside')
		.append('table')
		.style('text-align', 'right');

	var row = table
		.append('tr');
	row
		.append('td')
		.text("Audiobooks:");
	row
		.append('td')
		.text('12')

	row = table
		.append('tr');
	row
		.append('td')
		.text("Books:");
	row
		.append('td')
		.text('14');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Films:");
	row
		.append('td')
		.text('364');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Games:");
	row
		.append('td')
		.text('9');

	row = table
		.append('tr');
	row
		.append('td')
		.text("TV:");
	row
		.append('td')
		.text('177');

	row = table
		.append('tr');
	row
		.append('td')
		.text("YouTube:");
	row
		.append('td')
		.text('3');

	row = table
		.append('tr');
	row
		.append('td')
		.html('&nbsp;');
	row
		.append('td')
		.html('&nbsp;');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Downloaded Files:");
	row
		.append('td')
		.text('32');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Steam Wishlist:");
	row
		.append('td')
		.text('0');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Work Inbox:");
	row
		.append('td')
		.text('72');
});

//////////////////////////////////////////////////

modules.push(function youtube() {

    var data = [
{ id: 'lVkKLf4DCn8', title: "Taylor Swift - I Can See You (Taylor’s Version) (From The Vault) (Official Video)", label: "Taylor Swift - I Can See You (Taylor’s Version) (From The Vault) (Official Video) by Taylor Swift 18 hours ago 5 minutes, 7 seconds 6,268,708 views" },
{ id: 'lJrHLnhJl-M', title: "Press This Button = Win $100,000!", label: "Press This Button = Win $100,000! by MrBeast Gaming 1 day ago 13 minutes, 31 seconds 11,028,945 views" },
{ id: 'J92DqeB40qc', title: "SIDHU MOOSE WALA, DIVINE - Chorni | Official Audio", label: "SIDHU MOOSE WALA, DIVINE - Chorni | Official Audio by DIVINE 1 day ago 3 minutes, 1 second 7,720,903 views" },
];

    var box = makeBox(2, 2);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#x1F4FC;<a href="https://www.youtube.com/feed/trending">YouTube Trending</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div');
    var table = inside
        .append('table')
        .style('width', '80%')
        .style('margin', '0 auto');

    var count = 0;
    for (var video of data) {
        var row = table
            .append('tr');
        row
            .append('td')
            .append('a')
            .attr('href', "https://www.youtube.com/watch?v=" + video.id)
            .append('img')
            .attr('src', 'https://i.ytimg.com/vi/' + video.id + '/hqdefault.jpg')
            .style('width', (480 / 4) + 'px')
            .style('height', (360 / 4) + 'px')
            .style('text-align', 'right')
            .attr('title', video.label);
        row
            .append('td')
            .style('text-align', 'left')
            .html(++count + '<br/><a href="https://www.youtube.com/watch?v=' + video.id + '">' + video.title + '</a>');
    }
});

//////////////////////////////////////////////////

modules.push(function f1() {
	var html =  "<a href='https://www.formula1.com/en/racing/2023/Hungary.html'><img src='https://www.formula1.com/content/dam/fom-website/races/2023/Hungarian_Grand_Prix.png' style='height:auto;width:auto;max-height:180px;max-width:180px;' /></a><br/><span style='font-size:85%'>23 July</span>";
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F3C1;<a href="https://www.formula1.com/en/racing/2023.html">Next F1 Race</a>')
	box = box
		.append('div')
		.attr('class', 'inside')
		.append('div')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function media() {
	var html = '<p style="font-weight:bold;padding:10px 0 0 0">Audiobooks</p><ul><li><a href="https://www.google.com/search?q=Audiobooks+-+The Turbulent Term of Tyke Tyler (1977)">The Turbulent Term of Tyke Tyler (1977)</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Around the World in 80 Days (1873)">Around the World in 80 Days (1873)</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Animal Farm (1945)">Animal Farm (1945)</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Sherlock Holmes: A Study in Scarlet (1887)">Sherlock Holmes: A Study in Scarlet (1887)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Books</p><ul><li><a href="https://www.google.com/search?q=Books+-+The Monkey\'s Paw (1902)">The Monkey\'s Paw (1902)</a></li><li><a href="https://www.google.com/search?q=Books+-+Fire Season (2011)">Fire Season (2011)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Films</p><ul><li><a href="https://www.google.com/search?q=Films+-+Us (2019)">Us (2019)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Purge (2013)">The Purge (2013)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Prince (2023)">The Prince (2023)</a></li><li><a href="https://www.google.com/search?q=Films+-+John Wick (2014)">John Wick (2014)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Whale (2022)">The Whale (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Gosford Park (2001)">Gosford Park (2001)</a></li><li><a href="https://www.google.com/search?q=Films+-+Dead Poets Society (1989)">Dead Poets Society (1989)</a></li><li><a href="https://www.google.com/search?q=Films+-+Sleepy Hollow (1999)">Sleepy Hollow (1999)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Shawshank Redemption (1994)">The Shawshank Redemption (1994)</a></li><li><a href="https://www.google.com/search?q=Films+-+Glass Onion (2022)">Glass Onion (2022)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Games</p><ul><li><a href="https://www.google.com/search?q=Games+-+Beltex (2022)">Beltex (2022)</a></li><li><a href="https://www.google.com/search?q=Games+-+Dishonored: Knife of Dunwall (2013)">Dishonored: Knife of Dunwall (2013)</a></li><li><a href="https://www.google.com/search?q=Games+-+A Little to the Left (2022)">A Little to the Left (2022)</a></li><li><a href="https://www.google.com/search?q=Games+-+Black Mesa (2020)">Black Mesa (2020)</a></li><li><a href="https://www.google.com/search?q=Games+-+Cyberpunk 2077 (2020)">Cyberpunk 2077 (2020)</a></li><li><a href="https://www.google.com/search?q=Games+-+Prison Architect (2015)">Prison Architect (2015)</a></li><li><a href="https://www.google.com/search?q=Games+-+Hitman WoA: Freelancer (2022)">Hitman WoA: Freelancer (2022)</a></li><li><a href="https://www.google.com/search?q=Games+-+Command & Conquer: Red Alert (2020)">Command & Conquer: Red Alert (2020)</a></li><li><a href="https://www.google.com/search?q=Games+-+100 Hidden Frogs (2021)">100 Hidden Frogs (2021)</a></li><li><a href="https://www.google.com/search?q=Games+-+Return to Monkey Island (2022)">Return to Monkey Island (2022)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">TV</p><ul><li><a href="https://www.google.com/search?q=TV+-+Black Mirror (2023, S6)">Black Mirror (2023, S6)</a></li><li><a href="https://www.google.com/search?q=TV+-+Buffy the Vampire Slayer (1998, S2)">Buffy the Vampire Slayer (1998, S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+Rise & Fall (2023, S1)">Rise & Fall (2023, S1)</a></li><li><a href="https://www.google.com/search?q=TV+-+The Cleaner (2023, S2)">The Cleaner (2023, S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+Clarkson\'s Farm (2023, S2)">Clarkson\'s Farm (2023, S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+How this Blind Girl… (2022, S1)">How this Blind Girl… (2022, S1)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (2015, S6)">Downton Abbey (2015, S6)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (2014, S5)">Downton Abbey (2014, S5)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (2013, S4)">Downton Abbey (2013, S4)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (2012, S3)">Downton Abbey (2012, S3)</a></li></ul>';
	var box = makeBox(2, 4);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F3AC;Recently Completed Media')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

console.log('Error in singles module: Specified argument was out of the range of valid values. (Parameter \'i\')');

//////////////////////////////////////////////////

modules.push(function vanguard() {

	var data = [{ number: 175.67, tooltip: "Fri, Jul 07, 2023<br/>£175.67"},
{ number: 177.33, tooltip: "Thu, Jul 06, 2023<br/>£177.33"},
{ number: 179.30, tooltip: "Wed, Jul 05, 2023<br/>£179.30"},
{ number: 179.97, tooltip: "Tue, Jul 04, 2023<br/>£179.97"},
{ number: 180.41, tooltip: "Mon, Jul 03, 2023<br/>£180.41"},
{ number: 179.41, tooltip: "Fri, Jun 30, 2023<br/>£179.41"},
{ number: 179.00, tooltip: "Thu, Jun 29, 2023<br/>£179.00"},
{ number: 178.60, tooltip: "Wed, Jun 28, 2023<br/>£178.60"},
{ number: 176.52, tooltip: "Tue, Jun 27, 2023<br/>£176.52"},
{ number: 175.48, tooltip: "Mon, Jun 26, 2023<br/>£175.48"},
{ number: 175.84, tooltip: "Fri, Jun 23, 2023<br/>£175.84"},
{ number: 177.15, tooltip: "Thu, Jun 22, 2023<br/>£177.15"},
{ number: 177.37, tooltip: "Wed, Jun 21, 2023<br/>£177.37"},
{ number: 178.07, tooltip: "Tue, Jun 20, 2023<br/>£178.07"},
{ number: 178.24, tooltip: "Mon, Jun 19, 2023<br/>£178.24"},
{ number: 178.58, tooltip: "Fri, Jun 16, 2023<br/>£178.58"},
{ number: 179.61, tooltip: "Thu, Jun 15, 2023<br/>£179.61"},
{ number: 178.74, tooltip: "Wed, Jun 14, 2023<br/>£178.74"},
{ number: 179.51, tooltip: "Tue, Jun 13, 2023<br/>£179.51"},
{ number: 179.33, tooltip: "Mon, Jun 12, 2023<br/>£179.33"},
{ number: 177.26, tooltip: "Fri, Jun 09, 2023<br/>£177.26"},
{ number: 177.60, tooltip: "Thu, Jun 08, 2023<br/>£177.60"},
].reverse();

	var vanguardDates = {
		"Latest":      "Fri, Jul 07, 2023",
		"vs Day":      "Thu, Jul 06, 2023",
		"vs Week":     "Fri, Jun 30, 2023",
		"vs Month":    "Thu, Jun 08, 2023",
		"vs Year":     ""
	}

	var vanguardValues = {
		"Latest":      "£175.67/share",
		'vs Day':      "-0.94%",
		'vs Week':     "-2.08%",
		'vs Month':    "-1.09%",
		'vs Year':     "+5.37%"
	};

	var box = makeBox(3, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#128200;<a href="https://www.vanguardinvestor.co.uk">Vanguard</a>')
	box = box
		.append('div')
		.attr('class', 'inside');		
	var insideLeft = box
		.append('div')
		.style('display', 'inline')
		.style('position', 'absolute')
		.style('left', 0)
		.style('width', '37%');
	insideLeft
		.append('p')
		.append('a')
		.attr('href', 'https://www.vanguardinvestor.co.uk/investments/vanguard-ftse-global-all-cap-index-fund-gbp-acc')
		.html('FTSE Global All Cap<br/>Index Fund - Acc');
	insideLeft
		.append('p')
		.html('&nbsp;');
	var table = insideLeft
		.append('table');	
	
	for (var item of Object.keys(vanguardValues)) {
		var row = table
			.append('tr')
			.style('font-weight', item.startsWith("Latest") ? "bold" : "normal");
		if (vanguardDates[item].length > 0) {
			row
				.attr('class', 'ttt')
				.attr('data-tt', vanguardDates[item])
        }
		row
			.append('td')
			.style('text-align', 'left')
			.html(item + ':&nbsp;');
		row
			.append('td')
			.style('text-align', 'right')
			.attr('class', 'code')
			.html(vanguardValues[item]);
	}

	var insideRight = box
		.append('div')
		.style('display', 'inline')
		.style('position', 'absolute')
		.style('right', 0)
		.style('width', '66%');
	var chart = createLineChart(400, 150, insideRight, data, 2);
});

//////////////////////////////////////////////////

console.log('Error in crypto module: Sequence contains no elements');

//////////////////////////////////////////////////

modules.push(function moon() {
	var moonData = {
		Percent:  '62.3',
		Type:     '<a href="https://www.timeanddate.com/astronomy/moon/waning-gibbous.html" title="Waning Gibbous on the night between 8 July and 9 July">Waning Gibbous</a>',
		Image:    'https://www.timeanddate.com/scripts/moon.php?i=0.623&p=3.400&r=0.271',
		Location: '11609021'
	}

	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#127769;<a href="https://www.timeanddate.com/moon/@' + moonData.Location + '">Moon</a>')
	box = box
		.append('div')
		.attr('class', 'inside');	
	var inside = box
		.append('div');
	inside
		.append('img')
		.attr('src', moonData.Image)
		.attr('width', '75%')
		.attr('height', '75%');		
	inside
		.append('p')
		.html(moonData.Type + ' (' + moonData.Percent + '%)');	
});

//////////////////////////////////////////////////

modules.push(function sun() {
	var sunData = {
		Rise:     '04:55',
		Set:      '21:26',
		Location: '11609021'
	};

	var box = makeBox(1, 1);	
	box
		.append('div')
		.attr('class', 'title')
		.html('&#128262;<a href="https://www.timeanddate.com/sun/@' + sunData.Location + '">Sun</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div');	
	var table = inside
		.append('table')
		.style('width', '150px');
	var row = table
		.append('tr')
		.style('font-size', '300%');
	row
		.append('td')
		.html('&#127748;')
	row
		.append('td')
		.html('&#127751;')
	var row = table
		.append('tr');
	row
		.append('td')
		.html('Rise')
	row
		.append('td')
		.html('Set')
var row = table
		.append('tr');
	row
		.append('td')
		.html(sunData.Rise)
	row
		.append('td')
		.html(sunData.Set)
});

//////////////////////////////////////////////////

modules.push(function word() {
	var wordData = {
		Word:       '',
		Definition: '<p><em>Rectitude</em> is a formal noun that means “moral integrity or <a href="https://www.merriam-webster.com/dictionary/righteousness">righteousness</a>” or “the quality or state of being correct in judgment or procedure.”</p>'
	}

	var clean = wordData.Definition.replace(/<[^>]+>/g, '');

	var box = makeBox(clean.length > 250 ? 2 : 1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4DC;<a href="https://www.merriam-webster.com/word-of-the-day">Word of the Day</a>')
	box = box
		.append('div')
		.attr('class', 'inside');	
	var inside = box
		.append('div');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.append('a')
		.attr('href', 'https://www.merriam-webster.com/dictionary/' + wordData.Word)
		.text(wordData.Word);
	inside
		.append('div')
		.style('padding', '5px')
		.html(wordData.Definition);	
});

//////////////////////////////////////////////////

modules.push(function twitter() {
	var html =  '<table><tr><td style="text-align: right">1</td><td><a href="https://twitter.com/search?q=Osborne">Osborne</a></td></tr><tr><td style="text-align: right">2</td><td><a href="https://twitter.com/search?q=%22James+Trafford%22">James Trafford</a></td></tr><tr><td style="text-align: right">3</td><td><a href="https://twitter.com/search?q=%23bbcpresenter">#bbcpresenter</a></td></tr><tr><td style="text-align: right">4</td><td><a href="https://twitter.com/search?q=%23U21EURO">#U21EURO</a></td></tr><tr><td style="text-align: right">5</td><td><a href="https://twitter.com/search?q=%23UFC290">#UFC290</a></td></tr></table>';
	var title = 'United Kingdom';
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F426;<a href="https://twitter.com/explore/tabs/trending">Twitter Trending</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.style('text-align', 'center')
		.html(title);
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function twitter() {
	var html =  '<table><tr><td style="text-align: right">1</td><td><a href="https://twitter.com/search?q=%22Jonah+Hill%22">Jonah Hill</a></td></tr><tr><td style="text-align: right">2</td><td><a href="https://twitter.com/search?q=%22Elly+De+La+Cruz%22">Elly De La Cruz</a></td></tr><tr><td style="text-align: right">3</td><td><a href="https://twitter.com/search?q=%23UFC290">#UFC290</a></td></tr><tr><td style="text-align: right">4</td><td><a href="https://twitter.com/search?q=Ribovics">Ribovics</a></td></tr><tr><td style="text-align: right">5</td><td><a href="https://twitter.com/search?q=%22Cason+Wallace%22">Cason Wallace</a></td></tr></table>';
	var title = 'United States';
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F426;<a href="https://twitter.com/explore/tabs/trending">Twitter Trending</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.style('text-align', 'center')
		.html(title);
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function astronauts() {
	var astronautsData = {
		Amount:      '10',
		CountryHtml: '<table><tr><td><img class="flag ttt" data-tt="usa" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-usa.jpg" /></td><td><img class="flag ttt" data-tt="russia" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-russia.jpg" /></td><td><img class="flag ttt" data-tt="china" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-china.jpg" /></td><td><img class="flag ttt" data-tt="germany" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-germany.jpg" /></td></tr><tr style="vertical-align:top"><td>3</td><td>3</td><td>3</td><td>1</td></tr></table>'
	};

	var box = makeBox(1, 1);	
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F469;&#x200D;&#x1F680;<a href="https://www.howmanypeopleareinspacerightnow.com/">Astronauts</a>')
	box = box
		.append('div')
		.attr('class', 'inside')
		.append('div')
		.html("<p style='font-size:200%;font-weight:bold'>" + astronautsData.Amount + "</p><p>people are in space now.</p><p>&nbsp;</p>" + astronautsData.CountryHtml)
});

//////////////////////////////////////////////////



			createPage();

		</script>
	</body>
</html>