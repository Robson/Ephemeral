<!DOCTYPE html>
<html lang="en">
	<head>
		<title>00:14 7-Apr - Ephemeral</title>		
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="https://d3js.org/d3.v3.min.js"></script>
		<meta http-equiv="refresh" content="1800">
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik&display=swap"> 		
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;500&display=swap"> 	
		<link rel="stylesheet" type="text/css" href="style.css" />
	</head>
	<body>
		<div id="container">
		</div>
		<div id="tt" style="display: none">
			<p id="tooltip_text"></p>
		</div>
		<div id="cls">&nbsp;</div>
		<script>

////////////////////////////////////////////////// tooltips

            var tooltip = d3.select('#tt');
            var tt = d3.select('#tt');

            function setTooltip(value) {
				d3.select('#tooltip_text').html(value);
            }

            function createTooltipTriggers() {
                d3.selectAll('.ttt')
                    .on("mouseover", function (d, i) {
                        setTooltip(d3.selectAll('.ttt')[0][i].attributes['data-tt'].value);
                    })
                    .on("mouseout", function () {
                        tt.style('display', 'none');
                    })
					.on("mousemove", function () {
                        if (x <= 0 || y <= 0) {
                            tt.style('display', 'none');
                        } else {
                            tt.style('display', null);
                        }
                        var x = d3.event.pageX - (tt.node().getBoundingClientRect().width / 2);
                        var y = d3.event.pageY - (tt.node().getBoundingClientRect().height + 5);
                        tt.style('left', ~~x + 'px');
                        tt.style('top', ~~y + 'px');

                    });
			}

////////////////////////////////////////////////// charts

            function map(n, a, b, y, z) {
                return (n - a) * (z - y) / (b - a) + y;
			}

			function createLineChart(width, height, element, data, boundary = 0) {
                var svg = element
                    .append('svg')
                    .attr('width', width + 'px')
                    .attr('height', height + 'px');

                var start = Math.min(...data.map(a => a.number));
				var end = Math.max(...data.map(a => a.number));

				switch (boundary) {
					case 1:
						var distance = (end - start) * 0.1;
						start -= distance;
						start = Math.max(0, start);
						end += distance;
						break;
					case 2:
						start = 0;
						break;
				}

				var xs = [];
				var ys = [];

                for (var i = 1; i <= data.length; i++) {
                    var x1 = map(i - 1, 0, data.length - 1, 3, width - 3);
					var y1 = map(data[i - 1].number, start, end, height, 6);
					xs.push(x1);
					ys.push(y1);
				}

				var area = d3.svg.area()
					.interpolate('cardinal')
					.x(function (d, i) { return xs[i] })
					.y0(function (d, i) { return height })
					.y1(function (d, i) { return ys[i] });

				svg
					.append('path')
                    .datum(d3.range(data.length).map(function(d, i) { return i }))
					.attr("d", area)
					.attr('fill', '#eee');

                var line = d3.svg.line()
                    .interpolate('cardinal')
                    .x(function (d, i) { return xs[i] })
                    .y(function (d, i) { return ys[i] });

                svg
                    .append('path')
                    .datum(d3.range(data.length).map(function (d, i) { return i }))
                    .attr("d", line)
					.attr('fill', 'transparent')
					.style('stroke-width', 2)
					.style('stroke', '#bbb');

				for (var i = 1; i <= data.length; i++) {
					var x1 = map(i - 1, 0, data.length - 1, 3, width - 3);
                    var x2 = map(i, 0, data.length - 1, 3, width - 3);
                    var y1 = map(data[i - 1].number, start, end, height, 6);
                    var g = svg
                        .append('g')
                        .attr('class', 'group');
                    g
						.append('circle')
						.attr('class', 'highlight')
                        .attr('cx', x1)
                        .attr('cy', y1 - 0.5)
                        .attr('r', 1)
						.attr('title', data[i - 1].number);
					g
						.append('rect')
						.attr('class', 'ttt')
						.attr('width', x2 - x1)
						.attr('height', height)
						.attr('x', (x1) - ((x2 - x1) / 2))
						.attr('y', 0)
						.attr('data-tt', data[i - 1].tooltip)
						.attr('style', 'fill:transparent');
                    /*g
                        .append('circle')
                        .attr('class', 'ttt')
                        .attr('cx', x1)
                        .attr('cy', y1 - 0.5)
                        .attr('r', 4)
                        .attr('opacity', '0.01')
                        .attr('z-index', 1000)
                        .attr('data-tt', data[i - 1].tooltip);*/
				}

                svg
                    .append('line')
                    .attr('x1', 3)
                    .attr('y1', height)
                    .attr('x2', width - 3)
                    .attr('y2', height)
                    .style('stroke-width', 2)
                    .style('stroke', '#bbb');
            }

////////////////////////////////////////////////// page
					
			var inside = 210;
			var padding = 8;
			var length = padding + inside + padding;
			var columns;
			var offsetX;
			var offsetY;
			var filled = [,];
			var low = 0;
			var modules = [];
								
			function random(start, end) {
				return start + Math.floor(Math.random() * (end - start));
			}
			
			function makeBox(width, height) {			
				var startX = 0, startY = 0;
				var hasLocation = false;
				for (var a = 0; a + height < filled.length && !hasLocation; a++) {
					for (var b = 0; b + width <= columns && !hasLocation; b++) {					
						var isValid = true;
						for (var c = 0; c < height && isValid; c++) {
							for (var d = 0; d < width && isValid; d++) {
								if (filled[a + c][b + d] > 0) {
									isValid = false;
								}
							}
						}
						if (isValid) {
							hasLocation = true;							
							startX = b;
							startY = a;
						}						
					}
				}				
				if (hasLocation) {
					for (var c = startY; c < startY + height && isValid; c++) {
						for (var d = startX; d < startX + width && isValid; d++) {
							filled[c][d] = 1;
						}
					}
					low = Math.max(low, offsetY + (startY * length) + ((height * length) - (padding * 2)));				
					return d3
						.select('#container')
						.append('div')
						.attr('class', 'box')
						.style('top', offsetY + startY * length + 'px')
						.style('left', offsetX + startX * length + 'px')						
						.style('width', ((width * length) - (padding * 2)) + 'px')
						.style('height', ((height * length) - (padding * 2)) + 'px');
				}
			}
			
			function createPage() {
				low = 0;
				d3.selectAll('.box').remove();
				var docWidth = document.body.clientWidth;		
				columns = ~~((docWidth - 20) / length);
				columns = Math.min(7, columns);
				offsetX = ((docWidth - (columns * length)) / 2) + 5;				
				offsetY = 100;
				for (var a = 0; a < 50; a++) {
					filled[a] = new Array(columns);
					for (var b = 0; b < columns; b++) {
						filled[a][b] = 0;
					}
				}
				for (var func of modules) {
					func();
				}
				d3
					.select('#cls')
					.style('top', (low) + 'px')
					.style('height', ((padding * 2) + offsetY) + 'px');
				createTooltipTriggers();
			}
			
			d3.select(window).on('resize', createPage);

////////////////////////////////////////////////// boxes
			
modules.push(function bbcCombine() {
	var html = '<table style="margin:0 10px"><tr><td style="vertical-align:top"><b>UK</b><br/><ul><li class="ttt" data-tt="<b>Give me more power to sack officers - Met chief</b><br/>Sir Mark Rowley says he wants to drive rogue officers out after a series of high profile scandals." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/uk-65203633?at_medium=RSS&amp;at_campaign=KARANGA">Give me more power to sack officers - Met chief</a></li><li class="ttt" data-tt="<b>Beckton fire: Man arrested on suspicion of murder after person dies</b><br/>Five people are also known to have been injured in the fire in east London, and taken to hospital."><a href="https://www.bbc.co.uk/news/uk-65209573?at_medium=RSS&amp;at_campaign=KARANGA">Beckton fire: Man arrested on suspicion of murder after person dies</a></li><li class="ttt" data-tt="<b>Cardiff flat owner gets tax bills for 11,000 Chinese firms</b><br/>Dylan Davies\'s hundreds of VAT bills for companies he had never heard of totalled Â£500,000."><a href="https://www.bbc.co.uk/news/uk-wales-65205520?at_medium=RSS&amp;at_campaign=KARANGA">Cardiff flat owner gets tax bills for 11,000 Chinese firms</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/uk-65203633?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/59B9/production/_129296922_ddb0f5f31c913836553a88d9fc17135be16562f80_0_1652_10991000x665.jpg" class="ttt" data-tt="Met officers photographed from behind" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>US & Canada</b><br/><ul><li class="ttt" data-tt="<b>Tennessee statehouse expels Democrat for gun control protest</b><br/>Justin Jones said the vote was &quot;a farce of democracy&quot;. Republicans likened his actions to an insurrection." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/world-us-canada-65206459?at_medium=RSS&amp;at_campaign=KARANGA">Tennessee statehouse expels Democrat for gun control protest</a></li><li class="ttt" data-tt="<b>Biden administration blames chaotic Afghan pull-out on Trump</b><br/>A report says President Biden was &quot;severely constrained&quot;, but implies evacuations could have begun sooner."><a href="https://www.bbc.co.uk/news/world-us-canada-65208663?at_medium=RSS&amp;at_campaign=KARANGA">Biden administration blames chaotic Afghan pull-out on Trump</a></li><li class="ttt" data-tt="<b>Four key findings in Maryland clerical abuse report</b><br/>The scope of the abuse by Catholic priests was staggering and the cover-up clear, says top prosecutor."><a href="https://www.bbc.co.uk/news/world-us-canada-65191469?at_medium=RSS&amp;at_campaign=KARANGA">Four key findings in Maryland clerical abuse report</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/world-us-canada-65206459?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/158E1/production/_129298288_9bff34233812c131009762c3205a578114f5d135.jpg" class="ttt" data-tt="Tennessee Representatives Justin Pearson, Gloria Johnson and Justin Jones walk through a crowd of supporters at the Tennessee State Capitol as Republicans who control the Tennessee House of Representatives prepare to vote on whether to expel three Democratic members for their role in a gun control demonstration at the state House last week" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>World</b><br/><ul><li class="ttt" data-tt="<b>Biden administration blames chaotic Afghan pull-out on Trump</b><br/>A report says President Biden was &quot;severely constrained&quot;, but implies evacuations could have begun sooner." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/world-us-canada-65208663?at_medium=RSS&amp;at_campaign=KARANGA">Biden administration blames chaotic Afghan pull-out on Trump</a></li><li class="ttt" data-tt="<b>Israel blames Hamas for Lebanon rocket barrage as tensions rise</b><br/>The attack, which saw 34 rockets fired into northern Israel, comes at a time of rising tension."><a href="https://www.bbc.co.uk/news/world-middle-east-65204423?at_medium=RSS&amp;at_campaign=KARANGA">Israel blames Hamas for Lebanon rocket barrage as tensions rise</a></li><li class="ttt" data-tt="<b>Macron counting on Xi to \'bring Russia to senses\'</b><br/>The French president urges his Chinese counterpart to use his influence to end the Ukraine war."><a href="https://www.bbc.co.uk/news/world-asia-china-65198757?at_medium=RSS&amp;at_campaign=KARANGA">Macron counting on Xi to \'bring Russia to senses\'</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/world-us-canada-65208663?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/19C8/production/_129300660_mediaitem129300659.jpg" class="ttt" data-tt="Chaos at Kabul airport" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>Formula 1</b><br/><ul><li class="ttt" data-tt="<b>Formula 1: Red Bull budget cap penalty \'very light\', says Ferrari\'s Frederic Vasseur</b><br/>Ferrari say Red Bull\'s strong start to the season is partly due to their being given a &quot;very light&quot; punishment for breaking Formula 1\'s budget cap." style="font-weight:bold"><a href="https://www.bbc.co.uk/sport/formula1/65209594?at_medium=RSS&amp;at_campaign=KARANGA">Formula 1: Red Bull budget cap penalty \'very light\', says Ferrari\'s Fred...</a></li><li class="ttt" data-tt="<b>Fernando Alonso: How the Spaniard helped Aston Martin leap on to the podium places</b><br/>Fernando Alonso\'s contribution to Aston Martin\'s leap to the podium should not be underestimated, says team principal Mike Krack."><a href="https://www.bbc.co.uk/sport/formula1/65200473?at_medium=RSS&amp;at_campaign=KARANGA">Fernando Alonso: How the Spaniard helped Aston Martin leap on to the podium...</a></li><li class="ttt" data-tt="<b>Formula 1: Australian GP chief to investigate post-race fan invasion</b><br/>The head of the Australian Grand Prix will investigate after fans got on to the track before the end of Sunday\'s race."><a href="https://www.bbc.co.uk/sport/formula1/65160441?at_medium=RSS&amp;at_campaign=KARANGA">Formula 1: Australian GP chief to investigate post-race fan invasion</a></li></ul></td><td><a href="https://www.bbc.co.uk/sport/formula1/65209594?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/live-experience/cps/624/cpsprodpb/4F4C/production/_129300302_41176611c79c5c7c87d341413e14dc718211d464.jpg"  style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>Technology</b><br/><ul><li class="ttt" data-tt="<b>ChatGPT: Mayor starts legal bid over false bribery claim</b><br/>Brian Hood says chatbot ChatGPT spread false information about him serving time in prison." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/technology-65202597?at_medium=RSS&amp;at_campaign=KARANGA">ChatGPT: Mayor starts legal bid over false bribery claim</a></li><li class="ttt" data-tt="<b>Bob Lee dead: Cash App founder dies after San Francisco stabbing</b><br/>The 43-year-old tech guru died after being stabbed on a San Francisco street, his family says."><a href="https://www.bbc.co.uk/news/world-us-canada-65191466?at_medium=RSS&amp;at_campaign=KARANGA">Bob Lee dead: Cash App founder dies after San Francisco stabbing</a></li><li class="ttt" data-tt="<b>Genesis Market: Popular cybercrime website shut down by police</b><br/>Genesis Market allowed online fraudsters to buy passwords and other personal data for less than $1."><a href="https://www.bbc.co.uk/news/uk-65180488?at_medium=RSS&amp;at_campaign=KARANGA">Genesis Market: Popular cybercrime website shut down by police</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/technology-65202597?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/15D73/production/_129295498_ybcu5y7q.jpeg-2.jpg" class="ttt" data-tt="Brian Hood" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr></table>';
	var box = makeBox(3, 2);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4F0;<a href="https://www.bbc.co.uk/news">BBC News</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function weather() {
    var weatherLocation = "11609021";

    var data={"copyright":"Contents are strictly for use by timeanddate.com","units":{"temp":"Â°C","prec":"mm","wind":"mph","baro":"mbar"},"detail":[{"hl":true,"hls":"3 Apr â 9 Apr","date":16808256E5,"ts":"Fri, 7","ds":"Fri, 7 Apr","icon":1,"desc":"Sunny.","temp":12,"templow":2,"cf":10,"wind":7,"wd":321,"hum":50,"pc":5},{"date":1680912E6,"ts":"Sat, 8","ds":"Sat, 8 Apr","icon":18,"desc":"Light rain. Afternoon clouds.","temp":13,"templow":2,"cf":12,"wind":7,"wd":124,"hum":54,"pc":21,"rain":0.4 },{"date":16809984E5,"ts":"Sun, 9","ds":"Sun, 9 Apr","icon":7,"desc":"Overcast.","temp":14,"templow":4,"cf":12,"wind":14,"wd":162,"hum":57,"pc":0},{"hl":true,"hls":"10 Apr â 16 Apr","date":16810848E5,"ts":"Mon, 10","ds":"Mon, 10 Apr","icon":21,"desc":"Isolated tstorms. Cloudy.","temp":12,"templow":7,"cf":9,"wind":14,"wd":243,"hum":70,"pc":61,"rain":6.3 },{"date":16811712E5,"ts":"Tue, 11","ds":"Tue, 11 Apr","icon":19,"desc":"Rain. Overcast.","temp":10,"templow":6,"cf":7,"wind":15,"wd":240,"hum":71,"pc":64,"rain":9.3 },{"date":16812576E5,"ts":"Wed, 12","ds":"Wed, 12 Apr","icon":19,"desc":"Rain. Cloudy.","temp":10,"templow":5,"cf":5,"wind":20,"wd":280,"hum":65,"pc":68,"rain":8.6 },{"date":1681344E6,"ts":"Thu, 13","ds":"Thu, 13 Apr","icon":33,"desc":"Rain showers. Overcast.","temp":8,"templow":3,"cf":5,"wind":13,"wd":230,"hum":76,"pc":78,"rain":16},{"date":16814304E5,"ts":"Fri, 14","ds":"Fri, 14 Apr","icon":33,"desc":"Passing showers. Cloudy.","temp":11,"templow":3,"cf":8,"wind":14,"wd":280,"hum":70,"pc":54,"rain":2.2 },{"date":16815168E5,"ts":"Sat, 15","ds":"Sat, 15 Apr","icon":7,"desc":"Cloudy.","temp":13,"templow":5,"cf":11,"wind":9,"wd":220,"hum":82,"pc":59,"rain":4.2 },{"date":16816032E5,"ts":"Sun, 16","ds":"Sun, 16 Apr","icon":33,"desc":"Passing showers. Overcast.","temp":13,"templow":7,"cf":11,"wind":15,"wd":260,"hum":88,"pc":59,"rain":2.2 },{"hl":true,"hls":"17 Apr â 23 Apr","date":16816896E5,"ts":"Mon, 17","ds":"Mon, 17 Apr","icon":6,"desc":"Broken clouds.","temp":15,"templow":8,"cf":14,"wind":13,"wd":310,"hum":63,"pc":5},{"date":1681776E6,"ts":"Tue, 18","ds":"Tue, 18 Apr","icon":6,"desc":"Mostly cloudy.","temp":16,"templow":8,"cf":16,"wind":3,"wd":200,"hum":68,"pc":6},{"date":16818624E5,"ts":"Wed, 19","ds":"Wed, 19 Apr","icon":4,"desc":"Morning clouds.","temp":16,"templow":8,"cf":16,"wind":13,"wd":140,"hum":66,"pc":5},{"date":16819488E5,"ts":"Thu, 20","ds":"Thu, 20 Apr","icon":7,"desc":"Cloudy.","temp":16,"templow":8,"cf":16,"wind":4,"wd":150,"hum":67,"pc":43,"rain":0.4 },{"date":16820352E5,"ts":"Fri, 21","ds":"Fri, 21 Apr","icon":4,"desc":"Afternoon clouds.","temp":17,"templow":9,"cf":16,"wind":5,"wd":50,"hum":57,"pc":5}],"grid":{"temp":{"low":2,"high":17,"range":15},"prec":{"high":16},"time":86400000,"sections":15},"conv":{"prec":{"offset":0,"scale":1},"temp":{"offset":0,"scale":1},"wind":{"offset":0,"scale":0.869},"baro":{"offset":0,"scale":1}}};


    var box = makeBox(2, 2);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#127746;<a href="https://www.timeanddate.com/weather/@' + weatherLocation + '/ext">Weather</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div');
    var table = inside
        .append('table');

    for (var day of data.detail.slice(0, 7)) {
        var row = table
            .append('tr');
        row
            .append('td')
            .style('text-align', 'right')
            .style('font-weight', 'bold')
            .html(day.ds.split(',')[0] + ':&nbsp;');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html(day.templow + '&#xb0;');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html('to');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html(day.temp + '&#xb0;');
        row
            .append('td')
            .style('text-align', 'center')
            .append('img')
            .attr('src', 'https://c.tadst.com/gfx/w/svg/wt-' + day.icon + '.svg')
            .attr('width', '32px')
            .attr('height', '32px');
        row
            .append('td')
            .style('text-align', 'left')
            .html(day.desc)
    }
});

//////////////////////////////////////////////////

modules.push(function astronomy() {
	var imageData = {
		Source:    'https://apod.nasa.gov/apod/image/2304/2023-03-22_Terran-1-GLHF_Kraus_thumb.jpg',
		Title:     'Terran 1 Burns Methalox',
		LinkImage: 'https://apod.nasa.gov/apod/image/2304/2023-03-22_Terran-1-GLHF_Kraus_Res-2048px_3849.jpg',
		LinkPage:  'https://apod.nasa.gov/apod/ap230406.html'
	}

	if (!imageData.Source.endsWith('/')) {
		var box = makeBox(2, 2);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x1F680;<a href="https://apod.nasa.gov/apod/astropix.html">Astronomy Picture of the Day</a>')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', imageData.LinkImage)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', imageData.Source);
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', imageData.LinkPage)
			.html(imageData.Title);
	}
});

//////////////////////////////////////////////////

modules.push(function nature() {
	var natureData = {
		Source:   'https://cdn2.outdoorphotographer.com/2023/04/Pemaquid-Lighthouse-By-Katherine-Plessner.jpeg',
		Title:    'Pemaquid Lighthouse By Katherine Plessner',
		LinkPage: 'https://www.outdoorphotographer.com/blog/photo-of-the-day-by-katherine-plessner-3/'
	}

	if (natureData.Source.length > 0) {
		var box = makeBox(2, 2);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x26FA;<a href="https://www.outdoorphotographer.com/blog/category/photo-of-the-day/">Outdoor Photo of the Day</a>')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', natureData.Source)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', natureData.Source);
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', natureData.LinkPage)
			.html(natureData.Title);
	}
});

//////////////////////////////////////////////////

modules.push(function wikipedia() {
	var pictureData = {
		Source:   'http://upload.wikimedia.org/wikipedia/commons/thumb/0/04/Hendrick_ter_Brugghen_The_Crucifixion_with_the_Virgin_and_Saint_John.jpg/300px-Hendrick_ter_Brugghen_The_Crucifixion_with_the_Virgin_and_Saint_John.jpg',
		Title:    'Crucifixion with the Virgin and St John',
		LinkPage: 'https://en.wikipedia.org/wiki//wiki/Crucifixion_with_the_Virgin_and_St_John',
		Description: '    The <i><b><a href="/wiki/Crucifixion_with_the_Virgin_and_St_John" title="Crucifixion with the Virgin and St John">Crucifixion with the Virgin and St&#160;John</a></b></i> is an oil painting by the Dutch artist <a href="/wiki/Hendrick_ter_Brugghen" title="Hendrick ter Brugghen">Hendrick ter Brugghen</a>, probably painted around 1625 as an <a href="/wiki/Altarpiece" title="Altarpiece">altarpiece</a> for a Catholic <a href="/wiki/Clandestine_church" title="Clandestine church">clandestine church</a> likely located in <a href="/wiki/Utrecht" title="Utrecht">Utrecht</a> in the <a href="/wiki/Calvinism" title="Calvinism">Calvinist</a> Dutch <a href="/wiki/Dutch_Republic" title="Dutch Republic">United Provinces</a>. The scene is taken from the account of the <a href="/wiki/Crucifixion_of_Jesus" title="Crucifixion of Jesus">crucifixion of Jesus</a> in <a href="/wiki/Gospel_of_John" title="Gospel of John">Gospel of John</a>, and depicts Jesus being mourned by his mother <a href="/wiki/Mary,_mother_of_Jesus" title="Mary, mother of Jesus">Mary</a> and <a href="/wiki/John_the_Apostle" title="John the Apostle">John the Apostle</a>. At the base of the cross are bones, traditionally identified as those of <a href="/wiki/Adam" title="Adam">Adam</a>. The scene is set in an atmosphere of deep dusk with stars visible in the background. The painting was not known until it was discovered in a bombed-out church in <a href="/wiki/South_Hackney" title="South Hackney">South Hackney</a>, London, in 1956. Initially unrecognized, it was identified before an appearance at <a href="/wiki/Sotheby%27s" title="Sotheby&#39;s">Sotheby\'s</a> later that year. It was acquired by the <a href="/wiki/Metropolitan_Museum_of_Art" title="Metropolitan Museum of Art">Metropolitan Museum of Art</a> in New York, where it now hangs.<small style="display: block; margin-top: 0.8em;">Painting credit: <a href="/wiki/Hendrick_ter_Brugghen" title="Hendrick ter Brugghen">Hendrick ter Brugghen</a></small>'
	}

	if (pictureData.Source.length > 0) {
		var box = makeBox(2, 3);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x1F9E9;Wikipedia Picture of the Day')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', pictureData.Source)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', pictureData.Source);
		/*
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', pictureData.LinkPage)
			.html(pictureData.Title);
		*/
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.style('overflow', 'hidden')
			.style('margin', '5px')
			.style('display', '-webkit-box')
			.style('-webkit-line-clamp', '6')
			.style('-webkit-box-orient', 'vertical')
			.html(pictureData.Description);
	}
});

//////////////////////////////////////////////////

modules.push(function tv() {

    var tvData = [{"channelid":505,"offset":1,"event":""},{"channelid":700,"offset":1,"event":[{"name":"This is BBC Two","description":"Highlights of programmes on BBC Two. [HD]","startTime":1680836400,"duration":8100,"svcId":700,"evtId":5933,"image":"\/ms\/img\/epg\/rb\/8df1-p0bvs8dg.jpg","hasTstv":false},{"name":"Homes Under the Hammer","description":"11\/30. Two unusual properties in rural Kent and Yorkshire and an impressive Victorian terrace in Greater Manchester are sold at auction. Martin, Martel and Tommy meet the buyers. [S] [HD]","startTime":1680844500,"duration":3600,"svcId":700,"evtId":5884,"image":"\/ms\/img\/epg\/rb\/8df1-p0fcfkjl.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1680606911,"availabilityEnd":1712142911,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001krnw\u0026ui_id=4.0.0"},"seriesNo":39,"episodeNo":11},{"name":"The Bidding Room","description":"13\/30. Nigel Havers hosts as five dealers bid to buy items brought in by the public, including a rice warmer, a kingfisher vase, a hop sieve, a port pourer and a harmonium. [S] [HD]","startTime":1680848100,"duration":2700,"svcId":700,"evtId":5885,"image":"\/ms\/img\/epg\/rb\/8df1-p0cvnczs.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1680795001,"availabilityEnd":1713626949,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001ks95\u0026ui_id=4.0.0"},"seriesNo":7,"episodeNo":13},{"name":"Gardeners\u0027 World","description":"4\/4. Frances Tophill visits some hardy gardeners on the Isle of Man. [S,SL] [HD]","startTime":1680850800,"duration":3600,"svcId":700,"evtId":5886,"image":"\/ms\/img\/epg\/rb\/8df1-p0f7ypbb.jpg","hasTstv":false,"episodeNo":4},{"name":"BBC News","description":"The latest headlines, breaking news and sport from the BBC newsroom. [S] [HD]","startTime":1680854400,"duration":3600,"svcId":700,"evtId":5887,"image":"\/ms\/img\/epg\/rb\/8df1-p07jbsw9.jpg","hasTstv":false},{"name":"King of Kings","description":"Colourful dramatisation of the birth, life and death of Christ, depicting the tensions between Herod\u0027s court and the Roman administration, and the execution of John the Baptist. [1961] [S] [HD]","startTime":1680858000,"duration":9300,"svcId":700,"evtId":5888,"image":"\/ms\/img\/epg\/rb\/8df1-p02n79yy.jpg","hasTstv":false},{"name":"Orson Welles: Talking Pictures","description":"A retrospective look at television appearances made over the years by Orson Welles, capturing the milestones and highlights of his life and career. [S] [HD]","startTime":1680867300,"duration":2400,"svcId":700,"evtId":5889,"image":"\/ms\/img\/epg\/rb\/8df1-p09ftnt1.jpg","hasTstv":false,"episodeNo":10},{"name":"Jill Halfpenny\u0027s Easter Journeys","description":"1\/2. Actress Jill Halfpenny joins bellringers in Hexham, visits an 18th-century bathing area carved into rock and meets a group of Christian dancers in Lindisfarne. [S,AD] [HD]","startTime":1680869700,"duration":3600,"svcId":700,"evtId":5890,"image":"\/ms\/img\/epg\/rb\/8df1-p0bzplqf.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1650029337,"availabilityEnd":1683465330,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m0016dj9\u0026ui_id=4.0.0"},"seriesNo":1,"episodeNo":1},{"name":"The Hairy Bikers\u0027 Pubs That...","description":"...Built Britain. Si and Dave explore Glasgow\u0027s shipbuilding history. Meeting former shipyard workers, they discover what pub life was like when the yard\u0027s whistles blew. [S,AD] [HD]","startTime":1680873300,"duration":1800,"svcId":700,"evtId":5891,"image":"\/ms\/img\/epg\/rb\/8df1-p03rr1vl.jpg","hasTstv":false,"episodeNo":9},{"name":"The Big Painting Challenge","description":"6\/6. The final of the amateur painting competition sees the four remaining artists tackling self-portraits before a final challenge in which they can choose any subject they want. [S,AD] [HD]","startTime":1680875100,"duration":3600,"svcId":700,"evtId":5892,"image":"\/ms\/img\/epg\/rb\/8df1-p065r8ql.jpg","hasTstv":false,"seriesNo":2,"episodeNo":6},{"name":"My Unique B\u0026B","description":"10\/15. Simon and team are in Devon, where Nigel and Maria want to convert a 1970s showman\u0027s caravan into a one-of-a-kind place for people to come and stay. [S,AD] [HD]","startTime":1680878700,"duration":1800,"svcId":700,"evtId":5893,"image":"\/ms\/img\/epg\/rb\/8df1-p0c3jt5v.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1657674173,"availabilityEnd":1689926400,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m00170rf\u0026ui_id=4.0.0"},"episodeNo":10},{"name":"Your Home Made Perfect","description":"5\/7. Two rival architects use virtual reality to pitch for the chance to transform a couple\u0027s sprawling Margate property. [S] [HD]","startTime":1680880500,"duration":3600,"svcId":700,"evtId":5894,"image":"\/ms\/img\/epg\/rb\/8df1-p08bn37n.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1624510800,"availabilityEnd":1687582800,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m000hy36\u0026ui_id=4.0.0"},"seriesNo":2,"episodeNo":5},{"name":"Flog It!","description":"13\/60. Paul Martin visits the Watts Gallery in the heart of the Surrey countryside, where David Harper uncovers a collection of British film and TV memorabilia. [S] [HD]","startTime":1680884100,"duration":2700,"svcId":700,"evtId":5895,"image":"\/ms\/img\/epg\/rb\/8df1-p0483s0c.jpg","hasTstv":false,"seriesNo":16,"episodeNo":13},{"name":"Richard Osman\u0027s House of Games","description":"20\/140. Kemah Bob, JJ Chalmers, Kevin Clifton and Victoria Derbyshire test their general knowledge skills on this week\u0027s House of Games. [S] [HD]","startTime":1680886800,"duration":1800,"svcId":700,"evtId":5896,"image":"\/ms\/img\/epg\/rb\/8df1-p09tv9cr.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1631296800,"availabilityEnd":1662832800,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m000zhhk\u0026ui_id=4.0.0"},"seriesNo":5,"episodeNo":20},{"name":"Coast to Coast Food Festival","description":"20\/20. Sean Fletcher gets tips on Indian street food and how to bake vegan cakes that taste the same as conventional ones as he explores all that is on offer at Cardiff Market. [S] [HD]","startTime":1680888600,"duration":1800,"svcId":700,"evtId":5897,"image":"\/ms\/img\/epg\/rb\/8df1-p0fcdltt.jpg","hasTstv":false,"seriesNo":1,"episodeNo":20},{"name":"Iolo\u0027s Borderlands","description":"1\/4. Iolo Williams explores Monmouthshire. He looks for a rare bee on the Gwent Levels and finds fallow deer in the Wye Valley, as well as a heavily-camouflaged bird near Abergavenny. [S,AD] [HD]","startTime":1680890400,"duration":1800,"svcId":700,"evtId":5898,"image":"\/ms\/img\/epg\/rb\/8df1-p0fcfpcf.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1680550223,"availabilityEnd":1712172623,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001ksb0\u0026ui_id=4.0.0"},"seriesNo":1,"episodeNo":1},{"name":"Beechgrove Garden","description":"1\/26. Beechgrove Garden is back and ready to guide you through a season of great growing. [S] [HD]","startTime":1680892200,"duration":1800,"svcId":700,"evtId":5899,"image":"\/ms\/img\/epg\/rb\/8df1-p0fdmd4z.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1680809450,"availabilityEnd":1996428650,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=_DTT_m001ksbl\u0026ui_id=4.0.0"},"seriesNo":7,"episodeNo":1},{"name":"Gardeners\u0027 World","description":"Monty adds some interest to the spring garden. Carol Klein visits Mothecombe Gardens in Devon, and Arit Anderson joins a group of young carers at a community garden in West Sussex. [S] [HD]","startTime":1680894000,"duration":3600,"svcId":700,"evtId":5900,"image":"\/ms\/img\/epg\/rb\/8df1-p08jbf3w.jpg","hasTstv":false,"episodeNo":4},{"name":"Pilgrimage: The Road through...","description":"...Portugal. 1\/3. Seven well-known personalities meet in Portugal to tackle a modern Catholic pilgrimage. [S,AD] [HD]","startTime":1680897600,"duration":3600,"svcId":700,"evtId":5901,"image":"\/ms\/img\/epg\/rb\/8df1-p0fcg325.jpg","hasTstv":false,"seriesNo":5,"episodeNo":1},{"name":"The Hundred-Foot Journey","description":"The Kadam family, new to France, madden Madame Mallory by opening a restaurant opposite hers. Cook Hassan and sous chef Marguerite are caught in the emotional and culinary crossfire. [2014] [S] [HD]","startTime":1680901200,"duration":6900,"svcId":700,"evtId":5902,"image":"\/ms\/img\/epg\/rb\/8df1-p0fbr6y7.jpg","hasTstv":false},{"name":"MOTDx","description":"Jermaine Jenas is joined in the studio by Jordan Hames, Emma Jones, and musician and Manchester United fan Jords. [S] [HD]","startTime":1680908100,"duration":1800,"svcId":700,"evtId":5903,"image":"\/ms\/img\/epg\/rb\/8df1-p0fd283q.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1680809509,"availabilityEnd":1686252540,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001krc0\u0026ui_id=4.0.0"},"seriesNo":5},{"name":"QI XL","description":"3\/14. Sandi Toksvig celebrates the hundredth birthday of the BBC with Zoe Lyons, Greg James, Richard Osman and Alan Davies. Contains some strong language. [S] [HD]","startTime":1680909900,"duration":2700,"svcId":700,"evtId":5904,"image":"\/ms\/img\/epg\/rb\/8df1-p0fcg462.jpg","hasTstv":false,"seriesNo":21,"episodeNo":3},{"name":"Get On Up: The Triumph of Black...","description":"...America. 2\/2. David Harewood takes us from the birth of hip-hop in the early 1980s to the present day. Contains very strong language. [S,AD] [HD]","startTime":1680912600,"duration":3600,"svcId":700,"evtId":5905,"image":"\/ms\/img\/chan\/BBCTwoHD-App-Placeholder-1280x720.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1680206420,"availabilityEnd":1838059200,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=p0f517dj\u0026ui_id=4.0.0"},"seriesNo":1,"episodeNo":2},{"name":"The Drug Wars that Killed Olivia","description":"Reporter Bronagh Munro investigates how Liverpool came to dominate the UK drug market and how organised crime brought death to Olivia Pratt-Korbel\u0027s door. [S,SL] [HD]","startTime":1680916200,"duration":3600,"svcId":700,"evtId":5906,"image":"\/ms\/img\/epg\/rb\/8df1-p0fcxfy6.jpg","hasTstv":false},{"name":"Parole","description":"4\/4. The board looks at the cases of a cocaine dealer and an offender who bit a man\u0027s ear off. Contains some strong language. [S,AD,SL] [HD]","startTime":1680919800,"duration":3600,"svcId":700,"evtId":5907,"image":"\/ms\/img\/epg\/rb\/8df1-p0f7ph7w.jpg","hasTstv":false,"seriesNo":1,"episodeNo":4},{"name":"This is BBC Two","description":"Highlights of programmes on BBC Two. [HD]","startTime":1680923400,"duration":9000,"svcId":700,"evtId":5908,"image":"\/ms\/img\/epg\/rb\/8df1-p0bvs8dg.jpg","hasTstv":false}]}];

    var box = makeBox(2, 3);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#x1F4FA;<a href="https://www.freesat.co.uk/tv-guide">TV</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div')
        .style('text-align', 'left');

    var channels = { 505: "BBC 1", 700: "BBC 2", 1500: "Channel 4" };

    var today = new Date();
    var primeTime = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 18, 0, 0);
    var unixStart = (+primeTime) / 1000;
    var unixEnd = unixStart + 60 * 60 * 6;
    var first = true;

    for (var channel of tvData) {
        if (!first) {
            first = false;
        } else {
            inside
                .append('br');
        }

        inside
            .append('p')
            .append('b')
            .text(channels[channel.channelid]);
        var list = inside
            .append('ul');
        for (var event of channel.event) {
            console.log(event);
            if (+event.startTime >= unixStart && +event.startTime < unixEnd) {
                list
                    .append('li')
                    .attr('class', 'ttt')
                    .attr('data-tt', '<img src=\"https://fdp-sv15-image-v1-0.gcprod1.freetime-platform.net/270x180-0' + event.image + '\" /><br/><b>' + event.name + '</b><br/>' + (+event.duration / 60) + ' minutes<br/>' + event.description)
                    .html('<span class="code">' + new Date(+event.startTime * 1000).toLocaleTimeString('en-GB').substr(0, 5) + "</span> - " + event.name);
            }
        }
    }
});

//////////////////////////////////////////////////

modules.push(function backlog() {
	var box = makeBox(1, 2);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4CB;Backlog')
	var table = box
		.append('div')
		.attr('class', 'inside')
		.append('table')
		.style('text-align', 'right');

	var row = table
		.append('tr');
	row
		.append('td')
		.text("Audiobooks:");
	row
		.append('td')
		.text('13')

	row = table
		.append('tr');
	row
		.append('td')
		.text("Books:");
	row
		.append('td')
		.text('14');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Films:");
	row
		.append('td')
		.text('356');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Games:");
	row
		.append('td')
		.text('10');

	row = table
		.append('tr');
	row
		.append('td')
		.text("TV:");
	row
		.append('td')
		.text('176');

	row = table
		.append('tr');
	row
		.append('td')
		.text("YouTube:");
	row
		.append('td')
		.text('3');

	row = table
		.append('tr');
	row
		.append('td')
		.html('&nbsp;');
	row
		.append('td')
		.html('&nbsp;');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Downloaded Files:");
	row
		.append('td')
		.text('16');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Steam Wishlist:");
	row
		.append('td')
		.text('154');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Work Inbox:");
	row
		.append('td')
		.text('64');
});

//////////////////////////////////////////////////

modules.push(function youtube() {

    var data = [
{ id: 'ilS38Z0vysA', title: "100 Assassins vs 10 Real Cops!", label: "100 Assassins vs 10 Real Cops! by MrBeast Gaming 1 day ago 8 minutes, 37 seconds 4,444,230 views" },
{ id: 'uA4q6gnyzz4', title: "I BUILT A $25,000 DREAM DOG HOUSE!!", label: "I BUILT A $25,000 DREAM DOG HOUSE!! by Brent Rivera 1 day ago 10 minutes, 15 seconds 1,453,084 views" },
{ id: 'u9FbaY2LVdk', title: "West Ham United 1 Newcastle United 5 | EXTENDED Premier League Highlights", label: "West Ham United 1 Newcastle United 5 | EXTENDED Premier League Highlights by Newcastle United 23 hours ago 10 minutes, 4 seconds 599,965 views" },
];

    var box = makeBox(2, 2);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#x1F4FC;<a href="https://www.youtube.com/feed/trending">YouTube Trending</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div');
    var table = inside
        .append('table')
        .style('width', '80%')
        .style('margin', '0 auto');

    var count = 0;
    for (var video of data) {
        var row = table
            .append('tr');
        row
            .append('td')
            .append('a')
            .attr('href', "https://www.youtube.com/watch?v=" + video.id)
            .append('img')
            .attr('src', 'https://i.ytimg.com/vi/' + video.id + '/hqdefault.jpg')
            .style('width', (480 / 4) + 'px')
            .style('height', (360 / 4) + 'px')
            .style('text-align', 'right')
            .attr('title', video.label);
        row
            .append('td')
            .style('text-align', 'left')
            .html(++count + '<br/><a href="https://www.youtube.com/watch?v=' + video.id + '">' + video.title + '</a>');
    }
});

//////////////////////////////////////////////////

modules.push(function f1() {
	var html =  "<a href='https://www.formula1.com/en/racing/2023/Azerbaijan.html'><img src='https://www.formula1.com/content/dam/fom-website/races/2023/Azerbaijan_Grand_Prix.png' style='height:auto;width:auto;max-height:180px;max-width:180px;' /></a><br/><span style='font-size:85%'>30 April</span>";
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F3C1;<a href="https://www.formula1.com/en/racing/2023.html">Next F1 Race</a>')
	box = box
		.append('div')
		.attr('class', 'inside')
		.append('div')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function media() {
	var html = '<p style="font-weight:bold;padding:10px 0 0 0">Audiobooks</p><ul><li><a href="https://www.google.com/search?q=Audiobooks+-+Around the World in 80 Days">Around the World in 80 Days</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Animal Farm">Animal Farm</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Sherlock Holmes: A Study in Scarlet">Sherlock Holmes: A Study in Scarlet</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Books</p><ul><li><a href="https://www.google.com/search?q=Books+-+The Monkey\'s Paw (1902)">The Monkey\'s Paw (1902)</a></li><li><a href="https://www.google.com/search?q=Books+-+Fire Season (2011)">Fire Season (2011)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Films</p><ul><li><a href="https://www.google.com/search?q=Films+-+John Wick (2014)">John Wick (2014)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Whale (2022)">The Whale (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Gosford Park (2001)">Gosford Park (2001)</a></li><li><a href="https://www.google.com/search?q=Films+-+Dead Poets Society (1989)">Dead Poets Society (1989)</a></li><li><a href="https://www.google.com/search?q=Films+-+Sleepy Hollow (1999)">Sleepy Hollow (1999)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Shawshank Redemption (1994)">The Shawshank Redemption (1994)</a></li><li><a href="https://www.google.com/search?q=Films+-+Glass Onion (2022)">Glass Onion (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Mean Creek (2004)">Mean Creek (2004)</a></li><li><a href="https://www.google.com/search?q=Films+-+Triangle of Sadness (2022)">Triangle of Sadness (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Knives Out (2019)">Knives Out (2019)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Games</p><ul><li><a href="https://www.google.com/search?q=Games+-+Prison Architect">Prison Architect</a></li><li><a href="https://www.google.com/search?q=Games+-+Hitman WoA: Freelancer">Hitman WoA: Freelancer</a></li><li><a href="https://www.google.com/search?q=Games+-+Command & Conquer: Red Alert">Command & Conquer: Red Alert</a></li><li><a href="https://www.google.com/search?q=Games+-+100 Hidden Frogs">100 Hidden Frogs</a></li><li><a href="https://www.google.com/search?q=Games+-+Return to Monkey Island">Return to Monkey Island</a></li><li><a href="https://www.google.com/search?q=Games+-+Hitman 3">Hitman 3</a></li><li><a href="https://www.google.com/search?q=Games+-+Firewatch">Firewatch</a></li><li><a href="https://www.google.com/search?q=Games+-+Sniper Elite 4">Sniper Elite 4</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">TV</p><ul><li><a href="https://www.google.com/search?q=TV+-+Clarkson\'s Farm (S2)">Clarkson\'s Farm (S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+How this Blind Girlâ¦ (S1)">How this Blind Girlâ¦ (S1)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S6)">Downton Abbey (S6)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S5)">Downton Abbey (S5)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S4)">Downton Abbey (S4)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S3)">Downton Abbey (S3)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S2)">Downton Abbey (S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S1)">Downton Abbey (S1)</a></li><li><a href="https://www.google.com/search?q=TV+-+The Traitors (S1)">The Traitors (S1)</a></li><li><a href="https://www.google.com/search?q=TV+-+Buffy the Vampire Slayer (S1)">Buffy the Vampire Slayer (S1)</a></li></ul>';
	var box = makeBox(2, 4);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F3AC;Recently Completed Media')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function singles() {

	function encode(text) {
		text = text.toLowerCase();
		text = text.replace(/&#39;/g, "'");
		text = text.replace(/&amp;/g, "and");
		return text;
    }

	var when = "31 March 2023 -  06 April 2023"
	var singlesData = {
		1: { Artist: "<a href='https://www.officialcharts.com/artist/6692/ed-sheeran/'>ed sheeran</a>", Title: "<a href='https://www.officialcharts.com/search/singles/eyes-closed/'>EYES CLOSED</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/411mB8h9-uL._SL75_.jpg" },
2: { Artist: "<a href='https://www.officialcharts.com/artist/5138/miley-cyrus/'>miley cyrus</a>", Title: "<a href='https://www.officialcharts.com/search/singles/flowers/'>FLOWERS</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/31iDAcJi6VL._SL75_.jpg" },
3: { Artist: "<a href='https://www.officialcharts.com/artist/28097/calvin-harris-ellie-goulding/'>calvin harris/ellie goulding</a>", Title: "<a href='https://www.officialcharts.com/search/singles/miracle/'>MIRACLE</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/41c-MdW3tfL._SL75_.jpg" },
4: { Artist: "<a href='https://www.officialcharts.com/artist/63953/libianca/'>libianca</a>", Title: "<a href='https://www.officialcharts.com/search/singles/people/'>PEOPLE</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/416HTM1LzFL._SL75_.jpg" },
5: { Artist: "<a href='https://www.officialcharts.com/artist/22895/weeknd/'>weeknd</a>", Title: "<a href='https://www.officialcharts.com/search/singles/die-for-you/'>DIE FOR YOU</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=http://ecx.images-amazon.com/images/I/51EyFpcKeJL.jpg" },

	};

	var box = makeBox(2, 2);
	box
		.append('div')
		.attr('class', 'title')
		.append('a')
		.attr('href', 'https://www.officialcharts.com/charts/singles-chart/')
		.html('&#x1F3B5;UK Singles Chart')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div');
	inside
		.append('p')
		.html(when + '<br/>&nbsp;');
	var table = inside
		.append('table');
	var position = 0;
	for (var item of Object.keys(singlesData)) {
		var title = encode(singlesData[item].Title.match(/>([^<]+)</)[1]);
		var artist = encode(singlesData[item].Artist.match(/>([^<]+)</)[1]);
		var row = table
			.append('tr');
		row
			.append('td')
			.html(++position);
		row
			.append('td')
			.append('a')
			.attr('href', 'https://www.youtube.com/results?search_query=' + artist + ' - ' + title)
			.append('img')
			.attr('src', singlesData[item].Image);
		row = row
			.append('td')
			.style('text-align', 'left')
		row
			.append('a')
			.attr('href', 'https://google.com/search?q=' + singlesData[item].Title + ' - ' + singlesData[item].Artist)
			.html(singlesData[item].Title)
		row
			.append('span')
			.html('<br/>' + singlesData[item].Artist);
	}
});

//////////////////////////////////////////////////

modules.push(function vanguard() {

	var data = [{ number: 172.37, tooltip: "Wed, Apr 05, 2023<br/>Â£172.37"},
{ number: 172.27, tooltip: "Tue, Apr 04, 2023<br/>Â£172.27"},
{ number: 174.37, tooltip: "Mon, Apr 03, 2023<br/>Â£174.37"},
{ number: 174.18, tooltip: "Fri, Mar 31, 2023<br/>Â£174.18"},
{ number: 172.08, tooltip: "Thu, Mar 30, 2023<br/>Â£172.08"},
{ number: 171.74, tooltip: "Wed, Mar 29, 2023<br/>Â£171.74"},
{ number: 169.42, tooltip: "Tue, Mar 28, 2023<br/>Â£169.42"},
{ number: 169.88, tooltip: "Mon, Mar 27, 2023<br/>Â£169.88"},
{ number: 170.06, tooltip: "Fri, Mar 24, 2023<br/>Â£170.06"},
{ number: 169.10, tooltip: "Thu, Mar 23, 2023<br/>Â£169.10"},
{ number: 169.48, tooltip: "Wed, Mar 22, 2023<br/>Â£169.48"},
{ number: 171.30, tooltip: "Tue, Mar 21, 2023<br/>Â£171.30"},
{ number: 168.38, tooltip: "Mon, Mar 20, 2023<br/>Â£168.38"},
{ number: 168.94, tooltip: "Fri, Mar 17, 2023<br/>Â£168.94"},
{ number: 170.44, tooltip: "Thu, Mar 16, 2023<br/>Â£170.44"},
{ number: 169.49, tooltip: "Wed, Mar 15, 2023<br/>Â£169.49"},
{ number: 169.92, tooltip: "Tue, Mar 14, 2023<br/>Â£169.92"},
{ number: 168.40, tooltip: "Mon, Mar 13, 2023<br/>Â£168.40"},
{ number: 170.01, tooltip: "Fri, Mar 10, 2023<br/>Â£170.01"},
{ number: 175.08, tooltip: "Thu, Mar 09, 2023<br/>Â£175.08"},
{ number: 178.30, tooltip: "Wed, Mar 08, 2023<br/>Â£178.30"},
{ number: 177.92, tooltip: "Tue, Mar 07, 2023<br/>Â£177.92"},
].reverse();

	var vanguardDates = {
		"Latest":      "Wed, Apr 05, 2023",
		"vs Day":      "Tue, Apr 04, 2023",
		"vs Week":     "Wed, Mar 29, 2023",
		"vs Month":    "Tue, Mar 07, 2023",
		"vs Year":     ""
	}

	var vanguardValues = {
		"Latest":      "Â£172.37/share",
		'vs Day':      "+0.06%",
		'vs Week':     "+0.37%",
		'vs Month':    "-3.12%",
		'vs Year':     "-2.09%"
	};

	var box = makeBox(3, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#128200;<a href="https://www.vanguardinvestor.co.uk">Vanguard</a>')
	box = box
		.append('div')
		.attr('class', 'inside');		
	var insideLeft = box
		.append('div')
		.style('display', 'inline')
		.style('position', 'absolute')
		.style('left', 0)
		.style('width', '37%');
	insideLeft
		.append('p')
		.append('a')
		.attr('href', 'https://www.vanguardinvestor.co.uk/investments/vanguard-ftse-global-all-cap-index-fund-gbp-acc')
		.html('FTSE Global All Cap<br/>Index Fund - Acc');
	insideLeft
		.append('p')
		.html('&nbsp;');
	var table = insideLeft
		.append('table');	
	
	for (var item of Object.keys(vanguardValues)) {
		var row = table
			.append('tr')
			.style('font-weight', item.startsWith("Latest") ? "bold" : "normal");
		if (vanguardDates[item].length > 0) {
			row
				.attr('class', 'ttt')
				.attr('data-tt', vanguardDates[item])
        }
		row
			.append('td')
			.style('text-align', 'left')
			.html(item + ':&nbsp;');
		row
			.append('td')
			.style('text-align', 'right')
			.attr('class', 'code')
			.html(vanguardValues[item]);
	}

	var insideRight = box
		.append('div')
		.style('display', 'inline')
		.style('position', 'absolute')
		.style('right', 0)
		.style('width', '66%');
	var chart = createLineChart(400, 150, insideRight, data, 2);
});

//////////////////////////////////////////////////

console.log('Error in crypto module: Sequence contains no elements');

//////////////////////////////////////////////////

modules.push(function moon() {
	var moonData = {
		Percent:  '99.4',
		Type:     '<a href="https://www.timeanddate.com/astronomy/moon/waning-gibbous.html" title="Waning Gibbous on the night between 6 April and 7 April">Waning Gibbous</a>',
		Image:    'https://www.timeanddate.com/scripts/moon.php?i=0.994&p=3.692&r=0.601',
		Location: '11609021'
	}

	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#127769;<a href="https://www.timeanddate.com/moon/@' + moonData.Location + '">Moon</a>')
	box = box
		.append('div')
		.attr('class', 'inside');	
	var inside = box
		.append('div');
	inside
		.append('img')
		.attr('src', moonData.Image)
		.attr('width', '75%')
		.attr('height', '75%');		
	inside
		.append('p')
		.html(moonData.Type + ' (' + moonData.Percent + '%)');	
});

//////////////////////////////////////////////////

modules.push(function sun() {
	var sunData = {
		Rise:     '06:27',
		Set:      '19:50',
		Location: '11609021'
	};

	var box = makeBox(1, 1);	
	box
		.append('div')
		.attr('class', 'title')
		.html('&#128262;<a href="https://www.timeanddate.com/sun/@' + sunData.Location + '">Sun</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div');	
	var table = inside
		.append('table')
		.style('width', '150px');
	var row = table
		.append('tr')
		.style('font-size', '300%');
	row
		.append('td')
		.html('&#127748;')
	row
		.append('td')
		.html('&#127751;')
	var row = table
		.append('tr');
	row
		.append('td')
		.html('Rise')
	row
		.append('td')
		.html('Set')
var row = table
		.append('tr');
	row
		.append('td')
		.html(sunData.Rise)
	row
		.append('td')
		.html(sunData.Set)
});

//////////////////////////////////////////////////

modules.push(function word() {
	var wordData = {
		Word:       '',
		Definition: '<p>A <em>seder</em> (often capitalized as <em>Seder</em>) is a service held in a Jewish home or community that includes a ceremonial dinner and that is held on the first evening, or first and second evenings, of <a href="https://www.merriam-webster.com/dictionary/Passover">Passover</a> in commemoration of the exodus from Egypt.</p>'
	}

	var clean = wordData.Definition.replace(/<[^>]+>/g, '');

	var box = makeBox(clean.length > 250 ? 2 : 1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4DC;<a href="https://www.merriam-webster.com/word-of-the-day">Word of the Day</a>')
	box = box
		.append('div')
		.attr('class', 'inside');	
	var inside = box
		.append('div');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.append('a')
		.attr('href', 'https://www.merriam-webster.com/dictionary/' + wordData.Word)
		.text(wordData.Word);
	inside
		.append('div')
		.style('padding', '5px')
		.html(wordData.Definition);	
});

//////////////////////////////////////////////////

modules.push(function twitter() {
	var html =  '<table><tr><td style="text-align: right">1</td><td><a href="https://twitter.com/search?q=%23Finalissima">#Finalissima</a></td></tr><tr><td style="text-align: right">2</td><td><a href="https://twitter.com/search?q=%23Lionesses">#Lionesses</a></td></tr><tr><td style="text-align: right">3</td><td><a href="https://twitter.com/search?q=%22Mary+Earps%22">Mary Earps</a></td></tr><tr><td style="text-align: right">4</td><td><a href="https://twitter.com/search?q=%22Chloe+Kelly%22">Chloe Kelly</a></td></tr><tr><td style="text-align: right">5</td><td><a href="https://twitter.com/search?q=%23Taskmaster">#Taskmaster</a></td></tr></table>';
	var title = 'United Kingdom';
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F426;<a href="https://twitter.com/explore/tabs/trending">Twitter Trending</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.style('text-align', 'center')
		.html(title);
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function twitter() {
	var html =  '<table><tr><td style="text-align: right">1</td><td><a href="https://twitter.com/search?q=Tennessee">Tennessee</a></td></tr><tr><td style="text-align: right">2</td><td><a href="https://twitter.com/search?q=%22Justin+Jones%22">Justin Jones</a></td></tr><tr><td style="text-align: right">3</td><td><a href="https://twitter.com/search?q=Afghanistan">Afghanistan</a></td></tr><tr><td style="text-align: right">4</td><td><a href="https://twitter.com/search?q=%22Gloria+Johnson%22">Gloria Johnson</a></td></tr><tr><td style="text-align: right">5</td><td><a href="https://twitter.com/search?q=Taibbi">Taibbi</a></td></tr></table>';
	var title = 'United States';
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F426;<a href="https://twitter.com/explore/tabs/trending">Twitter Trending</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.style('text-align', 'center')
		.html(title);
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function astronauts() {
	var astronautsData = {
		Amount:      '10',
		CountryHtml: '<table><tr><td><img class="flag ttt" data-tt="usa" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-usa.jpg" /></td><td><img class="flag ttt" data-tt="russia" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-russia.jpg" /></td><td><img class="flag ttt" data-tt="china" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-china.jpg" /></td><td><img class="flag ttt" data-tt="germany" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-germany.jpg" /></td></tr><tr style="vertical-align:top"><td>3</td><td>3</td><td>3</td><td>1</td></tr></table>'
	};

	var box = makeBox(1, 1);	
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F469;&#x200D;&#x1F680;<a href="https://www.howmanypeopleareinspacerightnow.com/">Astronauts</a>')
	box = box
		.append('div')
		.attr('class', 'inside')
		.append('div')
		.html("<p style='font-size:200%;font-weight:bold'>" + astronautsData.Amount + "</p><p>people are in space now.</p><p>&nbsp;</p>" + astronautsData.CountryHtml)
});

//////////////////////////////////////////////////



			createPage();

		</script>
	</body>
</html>