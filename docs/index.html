<!DOCTYPE html>
<html lang="en">
	<head>
		<title>00:47 27-May - Ephemeral</title>		
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="https://d3js.org/d3.v3.min.js"></script>
		<meta http-equiv="refresh" content="1800">
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik&display=swap"> 		
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;500&display=swap"> 	
		<link rel="stylesheet" type="text/css" href="style.css" />
	</head>
	<body>
		<div id="container">
		</div>
		<div id="tt" style="display: none">
			<p id="tooltip_text"></p>
		</div>
		<div id="cls">&nbsp;</div>
		<script>

////////////////////////////////////////////////// tooltips

            var tooltip = d3.select('#tt');
            var tt = d3.select('#tt');

            function setTooltip(value) {
				d3.select('#tooltip_text').html(value);
            }

            function createTooltipTriggers() {
                d3.selectAll('.ttt')
                    .on("mouseover", function (d, i) {
                        setTooltip(d3.selectAll('.ttt')[0][i].attributes['data-tt'].value);
                    })
                    .on("mouseout", function () {
                        tt.style('display', 'none');
                    })
					.on("mousemove", function () {
                        if (x <= 0 || y <= 0) {
                            tt.style('display', 'none');
                        } else {
                            tt.style('display', null);
                        }
                        var x = d3.event.pageX - (tt.node().getBoundingClientRect().width / 2);
                        var y = d3.event.pageY - (tt.node().getBoundingClientRect().height + 5);
                        tt.style('left', ~~x + 'px');
                        tt.style('top', ~~y + 'px');

                    });
			}

////////////////////////////////////////////////// charts

            function map(n, a, b, y, z) {
                return (n - a) * (z - y) / (b - a) + y;
			}

			function createLineChart(width, height, element, data, boundary = 0) {
                var svg = element
                    .append('svg')
                    .attr('width', width + 'px')
                    .attr('height', height + 'px');

                var start = Math.min(...data.map(a => a.number));
				var end = Math.max(...data.map(a => a.number));

				switch (boundary) {
					case 1:
						var distance = (end - start) * 0.1;
						start -= distance;
						start = Math.max(0, start);
						end += distance;
						break;
					case 2:
						start = 0;
						break;
				}

				var xs = [];
				var ys = [];

                for (var i = 1; i <= data.length; i++) {
                    var x1 = map(i - 1, 0, data.length - 1, 3, width - 3);
					var y1 = map(data[i - 1].number, start, end, height, 6);
					xs.push(x1);
					ys.push(y1);
				}

				var area = d3.svg.area()
					.interpolate('cardinal')
					.x(function (d, i) { return xs[i] })
					.y0(function (d, i) { return height })
					.y1(function (d, i) { return ys[i] });

				svg
					.append('path')
                    .datum(d3.range(data.length).map(function(d, i) { return i }))
					.attr("d", area)
					.attr('fill', '#eee');

                var line = d3.svg.line()
                    .interpolate('cardinal')
                    .x(function (d, i) { return xs[i] })
                    .y(function (d, i) { return ys[i] });

                svg
                    .append('path')
                    .datum(d3.range(data.length).map(function (d, i) { return i }))
                    .attr("d", line)
					.attr('fill', 'transparent')
					.style('stroke-width', 2)
					.style('stroke', '#bbb');

				for (var i = 1; i <= data.length; i++) {
					var x1 = map(i - 1, 0, data.length - 1, 3, width - 3);
                    var x2 = map(i, 0, data.length - 1, 3, width - 3);
                    var y1 = map(data[i - 1].number, start, end, height, 6);
                    var g = svg
                        .append('g')
                        .attr('class', 'group');
                    g
						.append('circle')
						.attr('class', 'highlight')
                        .attr('cx', x1)
                        .attr('cy', y1 - 0.5)
                        .attr('r', 1)
						.attr('title', data[i - 1].number);
					g
						.append('rect')
						.attr('class', 'ttt')
						.attr('width', x2 - x1)
						.attr('height', height)
						.attr('x', (x1) - ((x2 - x1) / 2))
						.attr('y', 0)
						.attr('data-tt', data[i - 1].tooltip)
						.attr('style', 'fill:transparent');
                    /*g
                        .append('circle')
                        .attr('class', 'ttt')
                        .attr('cx', x1)
                        .attr('cy', y1 - 0.5)
                        .attr('r', 4)
                        .attr('opacity', '0.01')
                        .attr('z-index', 1000)
                        .attr('data-tt', data[i - 1].tooltip);*/
				}

                svg
                    .append('line')
                    .attr('x1', 3)
                    .attr('y1', height)
                    .attr('x2', width - 3)
                    .attr('y2', height)
                    .style('stroke-width', 2)
                    .style('stroke', '#bbb');
            }

////////////////////////////////////////////////// page
					
			var inside = 210;
			var padding = 8;
			var length = padding + inside + padding;
			var columns;
			var offsetX;
			var offsetY;
			var filled = [,];
			var low = 0;
			var modules = [];
								
			function random(start, end) {
				return start + Math.floor(Math.random() * (end - start));
			}
			
			function makeBox(width, height) {			
				var startX = 0, startY = 0;
				var hasLocation = false;
				for (var a = 0; a + height < filled.length && !hasLocation; a++) {
					for (var b = 0; b + width <= columns && !hasLocation; b++) {					
						var isValid = true;
						for (var c = 0; c < height && isValid; c++) {
							for (var d = 0; d < width && isValid; d++) {
								if (filled[a + c][b + d] > 0) {
									isValid = false;
								}
							}
						}
						if (isValid) {
							hasLocation = true;							
							startX = b;
							startY = a;
						}						
					}
				}				
				if (hasLocation) {
					for (var c = startY; c < startY + height && isValid; c++) {
						for (var d = startX; d < startX + width && isValid; d++) {
							filled[c][d] = 1;
						}
					}
					low = Math.max(low, offsetY + (startY * length) + ((height * length) - (padding * 2)));				
					return d3
						.select('#container')
						.append('div')
						.attr('class', 'box')
						.style('top', offsetY + startY * length + 'px')
						.style('left', offsetX + startX * length + 'px')						
						.style('width', ((width * length) - (padding * 2)) + 'px')
						.style('height', ((height * length) - (padding * 2)) + 'px');
				}
			}
			
			function createPage() {
				low = 0;
				d3.selectAll('.box').remove();
				var docWidth = document.body.clientWidth;		
				columns = ~~((docWidth - 20) / length);
				columns = Math.min(7, columns);
				offsetX = ((docWidth - (columns * length)) / 2) + 5;				
				offsetY = 100;
				for (var a = 0; a < 50; a++) {
					filled[a] = new Array(columns);
					for (var b = 0; b < columns; b++) {
						filled[a][b] = 0;
					}
				}
				for (var func of modules) {
					func();
				}
				d3
					.select('#cls')
					.style('top', (low) + 'px')
					.style('height', ((padding * 2) + offsetY) + 'px');
				createTooltipTriggers();
			}
			
			d3.select(window).on('resize', createPage);

////////////////////////////////////////////////// boxes
			
modules.push(function bbcCombine() {
	var html = '<table style="margin:0 10px"><tr><td style="vertical-align:top"><b>UK</b><br/><ul><li class="ttt" data-tt="<b>Schofield admits lying over affair with younger colleague</b><br/>The 61-year-old is leaving ITV with immediate effect as he apologises for misleading employers, his family and the public." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/entertainment-arts-65729361?at_medium=RSS&amp;at_campaign=KARANGA">Schofield admits lying over affair with younger colleague</a></li><li class="ttt" data-tt="<b>Finley Boden\'s parents jailed for \'savage\' murder </b><br/>Stephen Boden and Shannon Marsden murdered Finley Boden, who suffered 130 &quot;appalling&quot; injuries."><a href="https://www.bbc.co.uk/news/uk-england-derbyshire-65697782?at_medium=RSS&amp;at_campaign=KARANGA">Finley Boden\'s parents jailed for \'savage\' murder </a></li><li class="ttt" data-tt="<b>British Cycling to ban transgender women from competing in female category</b><br/>British Cycling is to ban transgender women from the female category of its competitions following a review and consultation."><a href="https://www.bbc.co.uk/sport/cycling/65718748?at_medium=RSS&amp;at_campaign=KARANGA">British Cycling to ban transgender women from competing in female category</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/entertainment-arts-65729361?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/130D6/production/_129883087_hi084791349.jpg" class="ttt" data-tt="File photo dated 11/01/23 of Phillip Schofield during a photo call for Dancing On Ice 2023 at the ITV Studios, Bovingdon Airfield, in Hemel Hempstead" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>US & Canada</b><br/><ul><li class="ttt" data-tt="<b>Family of Aderrien Murry, 11, shot by police demands answers</b><br/>The Mississippi boy was shot after calling police for help in a domestic disturbance, his family says." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/world-us-canada-65723214?at_medium=RSS&amp;at_campaign=KARANGA">Family of Aderrien Murry, 11, shot by police demands answers</a></li><li class="ttt" data-tt="<b>US debt ceiling talks continue with new 5 June deadline</b><br/>With an extended deadline, talks on a deal to avoid a US default appear to drag on in Washington."><a href="https://www.bbc.co.uk/news/world-us-canada-65713732?at_medium=RSS&amp;at_campaign=KARANGA">US debt ceiling talks continue with new 5 June deadline</a></li><li class="ttt" data-tt="<b>Navy finds \'perfect storm\' of problems in elite Seals course</b><br/>A Navy report found trainees in the elite unit were at risk of injuries or death in a gruelling course."><a href="https://www.bbc.co.uk/news/world-us-canada-65724065?at_medium=RSS&amp;at_campaign=KARANGA">Navy finds \'perfect storm\' of problems in elite Seals course</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/world-us-canada-65723214?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/AB29/production/_129871834_ad.jpg" class="ttt" data-tt="Aderriene Murry photo" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>World</b><br/><ul><li class="ttt" data-tt="<b>Ukraine war: Russia destroys hospital in latest missile attack</b><br/>At least two people were killed and more than 30 injured in the attack in the city of Dnipro." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/world-europe-65720853?at_medium=RSS&amp;at_campaign=KARANGA">Ukraine war: Russia destroys hospital in latest missile attack</a></li><li class="ttt" data-tt="<b>Sudan conflict: Hospital attacks potential war crimes, BBC told</b><br/>Mounting evidence seen by the BBC suggests that medical facilities are being targeted by both sides."><a href="https://www.bbc.co.uk/news/world-africa-65718968?at_medium=RSS&amp;at_campaign=KARANGA">Sudan conflict: Hospital attacks potential war crimes, BBC told</a></li><li class="ttt" data-tt="<b>Wagner: US sanctions boss of mercenary group in Mali</b><br/>The Russian mercenary group could be using African states to procure weapons for Ukraine, US says."><a href="https://www.bbc.co.uk/news/world-africa-65719825?at_medium=RSS&amp;at_campaign=KARANGA">Wagner: US sanctions boss of mercenary group in Mali</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/world-europe-65720853?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/12775/production/_129873657_photo_2023-05-26_10-09-44.jpg" class="ttt" data-tt="Fire burns out of a damaged building in Dnipro, Ukraine" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>Formula 1</b><br/><ul><li class="ttt" data-tt="<b>Monaco Grand Prix: Lewis Hamilton \'felt improvements\' in practice</b><br/>Lewis Hamilton says he &quot;felt the improvements&quot; of his upgraded Mercedes after finishing sixth fastest in practice at the Monaco Grand Prix." style="font-weight:bold"><a href="https://www.bbc.co.uk/sport/formula1/65728414?at_medium=RSS&amp;at_campaign=KARANGA">Monaco Grand Prix: Lewis Hamilton \'felt improvements\' in practice</a></li><li class="ttt" data-tt="<b>Monaco Grand Prix: Carlos Sainz tops first practice as Alex Albon crashes</b><br/>Williams driver Alex Albon brings the first practice session at the Monaco Grand Prix to an early end with a crash at the first corner."><a href="https://www.bbc.co.uk/sport/formula1/65724923?at_medium=RSS&amp;at_campaign=KARANGA">Monaco Grand Prix: Carlos Sainz tops first practice as Alex Albon crashes</a></li><li class="ttt" data-tt="<b>Monaco Grand Prix: Lewis Hamilton and Mercedes close to agreeing a new contract</b><br/>Lewis Hamilton says he has not been in talks with Ferrari, adding he and Mercedes are close to a deal to keep him at the team beyond this season."><a href="https://www.bbc.co.uk/sport/formula1/65713386?at_medium=RSS&amp;at_campaign=KARANGA">Monaco Grand Prix: Lewis Hamilton and Mercedes close to agreeing a new contract</a></li></ul></td><td><a href="https://www.bbc.co.uk/sport/formula1/65728414?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/live-experience/cps/624/cpsprodpb/2D76/production/_129883611_lewishamilton.jpg"  style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>Technology</b><br/><ul><li class="ttt" data-tt="<b>Neuralink: Elon Musk\'s brain chip firm wins US approval for human study</b><br/>The billionaire\'s Neuralink implant company wants to help restore people\'s vision and mobility." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/health-65717487?at_medium=RSS&amp;at_campaign=KARANGA">Neuralink: Elon Musk\'s brain chip firm wins US approval for human study</a></li><li class="ttt" data-tt="<b>ChatGPT-maker U-turns on threat to leave EU over AI law</b><br/>OpenAI\'s Sam Altman previously said if it fails to comply with the forthcoming AI Act, it might exit the EU."><a href="https://www.bbc.co.uk/news/technology-65708114?at_medium=RSS&amp;at_campaign=KARANGA">ChatGPT-maker U-turns on threat to leave EU over AI law</a></li><li class="ttt" data-tt="<b>Twitter engineering boss Foad Dabiri quits day after DeSantis launch glitches</b><br/>Ron DeSantis\' launch of his White House presidential campaign was hit by technical problems."><a href="https://www.bbc.co.uk/news/business-65717731?at_medium=RSS&amp;at_campaign=KARANGA">Twitter engineering boss Foad Dabiri quits day after DeSantis launch glitches</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/health-65717487?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/EF2B/production/_129872216_806fa50d14700ee7344f8f84ddd22dcc42e6bd610_90_4000_22501000x563.jpg" class="ttt" data-tt="A stylised stock image showing Elon Musk&#x27;s face and the Neuralink logo" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr></table>';
	var box = makeBox(3, 2);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4F0;<a href="https://www.bbc.co.uk/news">BBC News</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function weather() {
    var weatherLocation = "11609021";

    var data={"copyright":"Contents are strictly for use by timeanddate.com","units":{"temp":"°C","prec":"mm","wind":"mph","baro":"mbar"},"detail":[{"hl":true,"hls":"22 May – 28 May","date":16851456E5,"ts":"Sat, 27","ds":"Sat, 27 May","icon":4,"desc":"Partly cloudy.","temp":20,"templow":5,"cf":19,"wind":3,"wd":90,"hum":46,"pc":0},{"date":1685232E6,"ts":"Sun, 28","ds":"Sun, 28 May","icon":18,"desc":"Sprinkles late. Overcast.","temp":17,"templow":8,"cf":17,"wind":13,"wd":40,"hum":67,"pc":19,"rain":0.2 },{"hl":true,"hls":"29 May – 4 Jun","date":16853184E5,"ts":"Mon, 29","ds":"Mon, 29 May","icon":6,"desc":"Broken clouds.","temp":16,"templow":6,"cf":16,"wind":15,"wd":60,"hum":51,"pc":0},{"date":16854048E5,"ts":"Tue, 30","ds":"Tue, 30 May","icon":4,"desc":"Morning clouds.","temp":19,"templow":5,"cf":19,"wind":15,"wd":30,"hum":52,"pc":0},{"date":16854912E5,"ts":"Wed, 31","ds":"Wed, 31 May","icon":4,"desc":"Breaks of sun late.","temp":21,"templow":9,"cf":25,"wind":15,"wd":60,"hum":54,"pc":1},{"date":16855776E5,"ts":"Thu, 1","ds":"Thu, 1 Jun","icon":4,"desc":"Partly cloudy.","temp":22,"templow":8,"cf":25,"wind":12,"wd":70,"hum":54,"pc":0},{"date":1685664E6,"ts":"Fri, 2","ds":"Fri, 2 Jun","icon":1,"desc":"Sunny.","temp":19,"templow":6,"cf":19,"wind":13,"wd":60,"hum":57,"pc":0},{"date":16857504E5,"ts":"Sat, 3","ds":"Sat, 3 Jun","icon":1,"desc":"Sunny.","temp":19,"templow":4,"cf":18,"wind":3,"wd":110,"hum":58,"pc":4},{"date":16858368E5,"ts":"Sun, 4","ds":"Sun, 4 Jun","icon":18,"desc":"Sprinkles late. Afternoon clouds.","temp":18,"templow":10,"cf":18,"wind":12,"wd":40,"hum":73,"pc":52,"rain":0.3 },{"hl":true,"hls":"5 Jun – 11 Jun","date":16859232E5,"ts":"Mon, 5","ds":"Mon, 5 Jun","icon":7,"desc":"Cloudy.","temp":17,"templow":10,"cf":17,"wind":15,"wd":60,"hum":65,"pc":51,"rain":0.4 },{"date":16860096E5,"ts":"Tue, 6","ds":"Tue, 6 Jun","icon":6,"desc":"Mostly cloudy.","temp":17,"templow":10,"cf":16,"wind":19,"wd":50,"hum":60,"pc":6},{"date":1686096E6,"ts":"Wed, 7","ds":"Wed, 7 Jun","icon":7,"desc":"Overcast.","temp":17,"templow":10,"cf":16,"wind":12,"wd":20,"hum":66,"pc":5},{"date":16861824E5,"ts":"Thu, 8","ds":"Thu, 8 Jun","icon":4,"desc":"Increasing cloudiness.","temp":17,"templow":10,"cf":17,"wind":10,"wd":50,"hum":54,"pc":6},{"date":16862688E5,"ts":"Fri, 9","ds":"Fri, 9 Jun","icon":6,"desc":"Mostly cloudy.","temp":18,"templow":10,"cf":17,"wind":10,"wd":50,"hum":60,"pc":5},{"date":16863552E5,"ts":"Sat, 10","ds":"Sat, 10 Jun","icon":33,"desc":"Showers late. Cloudy.","temp":18,"templow":10,"cf":18,"wind":14,"wd":90,"hum":60,"pc":46,"rain":0.2 }],"grid":{"temp":{"low":4,"high":22,"range":18},"prec":{"high":0.4},"time":86400000,"sections":15},"conv":{"prec":{"offset":0,"scale":1},"temp":{"offset":0,"scale":1},"wind":{"offset":0,"scale":0.869},"baro":{"offset":0,"scale":1}}};


    var box = makeBox(2, 2);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#127746;<a href="https://www.timeanddate.com/weather/@' + weatherLocation + '/ext">Weather</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div');
    var table = inside
        .append('table');

    for (var day of data.detail.slice(0, 7)) {
        var row = table
            .append('tr');
        row
            .append('td')
            .style('text-align', 'right')
            .style('font-weight', 'bold')
            .html(day.ds.split(',')[0] + ':&nbsp;');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html(day.templow + '&#xb0;');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html('to');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html(day.temp + '&#xb0;');
        row
            .append('td')
            .style('text-align', 'center')
            .append('img')
            .attr('src', 'https://c.tadst.com/gfx/w/svg/wt-' + day.icon + '.svg')
            .attr('width', '32px')
            .attr('height', '32px');
        row
            .append('td')
            .style('text-align', 'left')
            .html(day.desc)
    }
});

//////////////////////////////////////////////////

modules.push(function astronomy() {
	var imageData = {
		Source:    'https://apod.nasa.gov/apod/image/2305/virgoCL1024.jpg',
		Title:     'Virgo Cluster Galaxies',
		LinkImage: 'https://apod.nasa.gov/apod/image/2305/virgoCL2048.jpg',
		LinkPage:  'https://apod.nasa.gov/apod/ap230526.html'
	}

	if (!imageData.Source.endsWith('/')) {
		var box = makeBox(2, 2);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x1F680;<a href="https://apod.nasa.gov/apod/astropix.html">Astronomy Picture of the Day</a>')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', imageData.LinkImage)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', imageData.Source);
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', imageData.LinkPage)
			.html(imageData.Title);
	}
});

//////////////////////////////////////////////////

modules.push(function nature() {
	var natureData = {
		Source:   'https://cdn2.outdoorphotographer.com/2023/05/Farewell-to-the-Kings-Robert-Henderson.jpeg',
		Title:    'Farewell to the Kings Robert Henderson',
		LinkPage: 'https://www.outdoorphotographer.com/blog/photo-of-the-day-by-robert-henderson-17/'
	}

	if (natureData.Source.length > 0) {
		var box = makeBox(2, 2);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x26FA;<a href="https://www.outdoorphotographer.com/blog/category/photo-of-the-day/">Outdoor Photo of the Day</a>')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', natureData.Source)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', natureData.Source);
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', natureData.LinkPage)
			.html(natureData.Title);
	}
});

//////////////////////////////////////////////////

modules.push(function wikipedia() {
	var pictureData = {
		Source:   'http://upload.wikimedia.org/wikipedia/commons/thumb/9/94/Eurasian_brown_bear_%28Ursus_arctos_arctos%29_female_1.jpg/550px-Eurasian_brown_bear_%28Ursus_arctos_arctos%29_female_1.jpg',
		Title:    'Eurasian brown bear',
		LinkPage: 'https://en.wikipedia.org/wiki//wiki/Eurasian_brown_bear',
		Description: '    The <b><a href="/wiki/Eurasian_brown_bear" title="Eurasian brown bear">Eurasian brown bear</a></b> (<i>Ursus arctos arctos</i>) is one of the most common <a href="/wiki/Subspecies" title="Subspecies">subspecies</a> of the brown bear, and is found in much of <a href="/wiki/Eurasia" title="Eurasia">Eurasia</a>. It is also called the European brown bear, common brown bear, common bear, and colloquially by many other names. The genetic diversity of present-day brown bears (<i>Ursus arctos</i>) has been extensively studied over the years and appears to be geographically structured into five main <a href="/wiki/Clade" title="Clade">clades</a> based upon analysis of the <a href="/wiki/Mitochondrial_DNA" title="Mitochondrial DNA">mitochondrial DNA</a>. This adult female was photographed near Stari Kot, Slovenia.<small style="display: block; margin-top: 0.8em;">Photograph credit: <a href="/wiki/User:Charlesjsharp" title="User:Charlesjsharp">Charles J. Sharp</a></small>'
	}

	if (pictureData.Source.length > 0) {
		var box = makeBox(2, 3);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x1F9E9;Wikipedia Picture of the Day')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', pictureData.Source)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', pictureData.Source);
		/*
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', pictureData.LinkPage)
			.html(pictureData.Title);
		*/
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.style('overflow', 'hidden')
			.style('margin', '5px')
			.style('display', '-webkit-box')
			.style('-webkit-line-clamp', '6')
			.style('-webkit-box-orient', 'vertical')
			.html(pictureData.Description);
	}
});

//////////////////////////////////////////////////

modules.push(function tv() {

    var tvData = [{"channelid":505,"offset":1,"event":""},{"channelid":700,"offset":1,"event":[{"name":"This is BBC Two","description":"Highlights of programmes on BBC Two. [HD]","startTime":1685154900,"duration":10800,"svcId":700,"evtId":7199,"image":"\/ms\/img\/epg\/rb\/8df1-p0bvs8dg.jpg","hasTstv":false},{"name":"Hey Duggee","description":"Roly\u0027s First Day. Roly has always been loud, right? Well, on his first day in the Clubhouse he was rather quiet! Hiding behind his dad, he couldn\u0027t even talk to Duggee! [S] [HD]","startTime":1685165700,"duration":600,"svcId":700,"evtId":7202,"image":"\/ms\/img\/epg\/rb\/8df1-p0cw9k8x.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1662358443,"availabilityEnd":1818212400,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001bw3t\u0026ui_id=4.0.0"},"seriesNo":4,"episodeNo":3},{"name":"Hey Duggee","description":"Spot the Difference. Duggee looks different, but what is it? By playing some looking games, the Squirrels learn how best to spot the difference. [S] [HD]","startTime":1685166300,"duration":300,"svcId":700,"evtId":7203,"image":"\/ms\/img\/epg\/rb\/8df1-p0cw9kb2.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1662358443,"availabilityEnd":1818212400,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001bw3w\u0026ui_id=4.0.0"},"seriesNo":4,"episodeNo":4},{"name":"Supertato","description":"Dino Danger. A toy dinosaur escapes from its box and scares the Grape Kids. [S,AD] [HD]","startTime":1685166600,"duration":600,"svcId":700,"evtId":7204,"image":"\/ms\/img\/epg\/rb\/8df1-p0dssqtr.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1673236800,"availabilityEnd":1823655600,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001h001\u0026ui_id=4.0.0"},"seriesNo":1,"episodeNo":20},{"name":"Shaun the Sheep","description":"Keeping the Peace. The Farmer has a lie-in, and Bitzer tries to make sure his master\u0027s rest is uninterrupted. Keeping the farm quiet proves to be a full-time job for Bitzer. [S] [HD]","startTime":1685167200,"duration":600,"svcId":700,"evtId":7205,"image":"\/ms\/img\/epg\/rb\/8df1-p04dv6h2.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1617246000,"availabilityEnd":1743390000,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=b082wl0n\u0026ui_id=4.0.0"},"seriesNo":5,"episodeNo":15},{"name":"Dennis \u0026 Gnasher Unleashed!","description":"Things Get Chilli. With Paul on vacation, Pieface falls under the influence of a fiery chilli pepper and unexpectedly turns rogue. [S] [HD]","startTime":1685167800,"duration":600,"svcId":700,"evtId":7206,"image":"\/ms\/img\/epg\/rb\/8df1-p08kyt6d.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1680231600,"availabilityEnd":1751252400,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m000l3y5\u0026ui_id=4.0.0"},"seriesNo":2,"episodeNo":8},{"name":"Boy Girl Dog Cat Mouse Cheese","description":"Staycation. Everyone is excited for the annual camping trip with Gramps, but when Cheese wins an invitation to a big movie premiere, she lies and says she has to stay home for charity work. [S] [HD]","startTime":1685168400,"duration":600,"svcId":700,"evtId":7207,"image":"\/ms\/img\/epg\/rb\/8df1-p0bh811h.png","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1643010300,"availabilityEnd":1798862400,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m0013vf6\u0026ui_id=4.0.0"},"seriesNo":2,"episodeNo":19},{"name":"The Deep","description":"The Lead. Does Dolos really have a lead on finding Ant\u0027s grandparents? Or is he leading the Nektons into a dangerous chasm between moving tectonic plates for nefarious purposes? [S] [HD]","startTime":1685169000,"duration":1500,"svcId":700,"evtId":7208,"image":"\/ms\/img\/epg\/rb\/8df1-p0c80m8q.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1653930180,"availabilityEnd":1811559600,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m0017wvs\u0026ui_id=4.0.0"},"seriesNo":4,"episodeNo":4},{"name":"Odd Squad","description":"Running on Empty, Part 1. The Mobile Unit must return a blob to London, but their van has run into trouble. [S,AD] [HD]","startTime":1685170500,"duration":600,"svcId":700,"evtId":7209,"image":"\/ms\/img\/epg\/rb\/8df1-p08j04tl.jpg","hasTstv":false,"seriesNo":3,"episodeNo":7},{"name":"Game on Grandparents","description":"Splatoon. Eliza and Vanessa go head to head with Jaiden and Sukhbir as they compete for the chance to make it to the Grand Final and become ultimate Game on Grandparents champion. [S] [HD]","startTime":1685171100,"duration":1500,"svcId":700,"evtId":7210,"image":"\/ms\/img\/epg\/rb\/8df1-p0cqw49c.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1660552452,"availabilityEnd":1803009600,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001b6v3\u0026ui_id=4.0.0"},"seriesNo":1,"episodeNo":2},{"name":"One Zoo Three","description":"Super Mums. The brothers celebrate Mother\u0027s Day. It\u0027s a big step for snow leopard cub Shen, jaguar Kiera has a break from daughter Inka, and is Tilly the red panda having a baby? [S] [HD]","startTime":1685172600,"duration":1200,"svcId":700,"evtId":7211,"image":"\/ms\/img\/epg\/rb\/8df1-p0dysn36.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1675051200,"availabilityEnd":1795147200,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=p0dt07fh\u0026ui_id=4.0.0"},"seriesNo":3,"episodeNo":2},{"name":"Newsround","description":"27\/05\/2023. Topical news magazine for children. [S] [HD]","startTime":1685173800,"duration":600,"svcId":700,"evtId":7212,"image":"\/ms\/img\/epg\/rb\/8df1-p0chnbfw.jpg","hasTstv":false},{"name":"Blue Peter: Silverpoint,...","description":"...Henry\u0027s New Dog Bed and Knights. Silverpoint, Evie Meg and Therapy Animals. Mwaksy joins the cast of CBBC drama Silverpoint, taking us for a look behind the scenes. [S] [HD]","startTime":1685174400,"duration":1800,"svcId":700,"evtId":7213,"image":"\/ms\/img\/epg\/rb\/8df1-p0fqnzpl.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1685118600,"availabilityEnd":1690302684,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=_DTT_m001m6jj\u0026ui_id=4.0.0"},"episodeNo":8},{"name":"Deadly Predators","description":"Wild and Weird. Steve finds out why tigers look green to their prey and why geckos have hairy toes. [S] [HD]","startTime":1685176200,"duration":1800,"svcId":700,"evtId":7214,"image":"\/ms\/img\/epg\/rb\/8df1-p0bzx1j3.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1650302917,"availabilityEnd":1807326000,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m0016l42\u0026ui_id=4.0.0"},"seriesNo":1,"episodeNo":6},{"name":"Pooch Perfect","description":"1\/8. Sheridan Smith is on a mission to find the nation\u0027s best dog groomer. The four groomers are given one of the most popular breeds to grace British salons - the long-haired shih tzu. [S,AD] [HD]","startTime":1685178000,"duration":3600,"svcId":700,"evtId":7215,"image":"\/ms\/img\/epg\/rb\/8df1-p092cs2j.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1611219600,"availabilityEnd":1647162000,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m000r0p4\u0026ui_id=4.0.0"},"seriesNo":1,"episodeNo":1},{"name":"Animals Behaving Badly","description":"1\/3. Liz Bonnin meets the animals using outlandish means to find a mate and raise a family, from feisty mongooses to swaggering peacocks. [S,AD] [HD]","startTime":1685181600,"duration":3600,"svcId":700,"evtId":7216,"image":"\/ms\/img\/epg\/rb\/8df1-p06dh7d3.jpg","hasTstv":false,"seriesNo":1,"episodeNo":1},{"name":"Family Cooking Showdown","description":"Competitive food show. The four winning families from this week\u0027s heats compete for just two places in finals week. They must rustle up a family treat night meal. [S,AD] [HD]","startTime":1685185200,"duration":3600,"svcId":700,"evtId":7217,"image":"\/ms\/img\/epg\/rb\/8df1-p06nl3h4.jpg","hasTstv":false,"seriesNo":2,"episodeNo":5},{"name":"Food \u0026 Drink: Unsung Heroes","description":"4\/10. Tom Kerridge and Richard Corrigan go head to head to come up with the best dish made from the unsung heroes of the British larder. [S,AD] [HD]","startTime":1685188800,"duration":1800,"svcId":700,"evtId":7218,"image":"\/ms\/img\/epg\/rb\/8df1-p02gxbvj.jpg","hasTstv":false,"seriesNo":3,"episodeNo":4},{"name":"Ingrid Bergman: Talking Pictures","description":"A retrospective look at television appearances made over the years by Hollywood icon Ingrid Bergman, capturing the milestones and highlights of her life and career. [S] [HD]","startTime":1685190600,"duration":1800,"svcId":700,"evtId":7219,"image":"\/ms\/img\/epg\/rb\/8df1-p08qsfwd.jpg","hasTstv":false,"episodeNo":11},{"name":"Casablanca","description":"Classic romantic drama. Rick\u0027s Cafe is a centre for criminals, refugees, resistance fighters and Nazis. Its cynical owner takes risks for no-one - until the arrival of Ilsa. [1942] [S,AD] [HD]","startTime":1685192400,"duration":6000,"svcId":700,"evtId":7220,"image":"\/ms\/img\/epg\/rb\/8df1-p08qw7lp.jpg","hasTstv":false},{"name":"Ancient Invisible Cities: Istanbul","description":"3\/3. Using 3D scanning, Michael Scott reveals the invisible secrets of Istanbul\u0027s ancient palaces, aqueducts and Roman chariot-racing track. [S,AD] [HD]","startTime":1685198400,"duration":3600,"svcId":700,"evtId":7221,"image":"\/ms\/img\/epg\/rb\/8df1-p06l2s2l.jpg","hasTstv":false,"seriesNo":1,"episodeNo":3},{"name":"Flog It!","description":"Members of the public try and make money out of their antiques. [S] [HD]","startTime":1685202000,"duration":3300,"svcId":700,"evtId":7222,"image":"\/ms\/img\/epg\/rb\/8df1-p0483s0c.jpg","hasTstv":false,"seriesNo":15,"episodeNo":13},{"name":"Celebrity Antiques Road Trip","description":"2\/20. TV journalists and former royal correspondents Jennie Bond and Simon McCoy rummage for hidden treasures around Devon. They are accompanied by experts Margie Cooper and Raj Bisram. [S] [HD]","startTime":1685205300,"duration":3600,"svcId":700,"evtId":7223,"image":"\/ms\/img\/epg\/rb\/8df1-p0d7rqw7.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1666983605,"availabilityEnd":1703878336,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001dkmg\u0026ui_id=4.0.0"},"seriesNo":11,"episodeNo":2},{"name":"Hidden Treasures of the...","description":"...National Trust. 3\/6. Restoring Paul McCartney\u0027s childhood home and uncovering a special trove of photos. [S,AD] [HD]","startTime":1685208900,"duration":3600,"svcId":700,"evtId":7224,"image":"\/ms\/img\/epg\/rb\/8df1-p0fp7jtl.jpg","hasTstv":false,"seriesNo":1,"episodeNo":3},{"name":"Dad\u0027s Army","description":"4\/6. Classic sitcom about the Home Guard unit of Walmington-on-Sea. The platoon triumphs over problems of security, fifth columnists and parachuting airmen. [S]","startTime":1685212500,"duration":2100,"svcId":700,"evtId":7225,"image":"\/ms\/img\/epg\/rb\/8df1-p0965md2.jpg","hasTstv":false,"seriesNo":1,"episodeNo":4},{"name":"RHS Chelsea Flower Show 2023","description":"Monty Don and Joe Swift look back at the highlights of their week at the RHS Chelsea Flower Show 2023. [S] [HD]","startTime":1685214600,"duration":3600,"svcId":700,"evtId":7226,"image":"\/ms\/img\/epg\/rb\/8df1-p0fqkv57.jpg","hasTstv":false,"seriesNo":2023,"episodeNo":13},{"name":"Tina Turner at the BBC","description":"A collection of performances from one of the greatest singers and live performers in modern music - the legendary Tina Turner. [S] [HD]","startTime":1685218200,"duration":3600,"svcId":700,"evtId":7227,"image":"\/ms\/img\/epg\/rb\/8df1-p09k6sgd.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1684972030,"availabilityEnd":1687564030,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m000wvxb\u0026ui_id=4.0.0"}},{"name":"Later... with Jools Holland","description":"2\/6. With Jessie Ware, Sleaford Mods, Dave Okumu, Olivia Dean, the Waeve and Stewart Copeland. Contains some strong language. [S] [HD]","startTime":1685221800,"duration":2700,"svcId":700,"evtId":7228,"image":"\/ms\/img\/epg\/rb\/8df1-p0fp217g.jpg","hasTstv":false,"seriesNo":77,"episodeNo":2},{"name":"Tina Turner: Simply the Best","description":"Tina Turner gives an exclusive, in-depth interview to Will Gompertz, discussing her extraordinary career and bringing her well-documented life story up to date. [S] [HD]","startTime":1685224500,"duration":2700,"svcId":700,"evtId":7229,"image":"\/ms\/img\/epg\/rb\/8df1-p06smy5f.jpg","hasTstv":false},{"name":"Tina Live!","description":"An electric Tina Turner performance from Arnhem, Netherlands, in 2009, as part of her blockbuster 50th Anniversary Tour. [S] [HD]","startTime":1685227200,"duration":8100,"svcId":700,"evtId":7230,"image":"\/ms\/img\/epg\/rb\/8df1-p09k7b1k.jpg","hasTstv":false},{"name":"Colin from Accounts","description":"7\/8. Ashley and Gordon\u0027s relationship is tested when she invites her party-loving friends to Echo Park to celebrate her birthday. Contains very strong language and adult humour [S,AD] [HD]","startTime":1685235300,"duration":1500,"svcId":700,"evtId":7231,"image":"\/ms\/img\/epg\/rb\/8df1-p0fdrjbd.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1681189200,"availabilityEnd":1775861940,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=p0f29c5q\u0026ui_id=4.0.0"},"seriesNo":1,"episodeNo":7},{"name":"Papadopoulos and Sons","description":"Comedy drama. After a financial market collapse, self-made millionaire Harry loses everything he has apart from an abandoned fish and chip shop. Contains some strong language. [2012] [S,AD] [HD]","startTime":1685236800,"duration":6300,"svcId":700,"evtId":7576,"image":"\/ms\/img\/epg\/rb\/8df1-p091vq9p.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1621329967,"availabilityEnd":1909004340,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=b04zlzfk\u0026ui_id=4.0.0"}},{"name":"This is BBC Two","description":"Highlights of programmes on BBC Two. [HD]","startTime":1685243100,"duration":8700,"svcId":700,"evtId":7232,"image":"\/ms\/img\/epg\/rb\/8df1-p0bvs8dg.jpg","hasTstv":false}]},{"channelid":1500,"offset":1,"event":""}];

    var box = makeBox(2, 3);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#x1F4FA;<a href="https://www.freesat.co.uk/tv-guide">TV</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div')
        .style('text-align', 'left');

    var channels = { 505: "BBC 1", 700: "BBC 2", 1500: "Channel 4" };

    var today = new Date();
    var primeTime = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 18, 0, 0);
    var unixStart = (+primeTime) / 1000;
    var unixEnd = unixStart + 60 * 60 * 6;
    var first = true;

    for (var channel of tvData) {
        if (!first) {
            first = false;
        } else {
            inside
                .append('br');
        }

        inside
            .append('p')
            .append('b')
            .text(channels[channel.channelid]);
        var list = inside
            .append('ul');
        for (var event of channel.event) {
            console.log(event);
            if (+event.startTime >= unixStart && +event.startTime < unixEnd) {
                list
                    .append('li')
                    .attr('class', 'ttt')
                    .attr('data-tt', '<img src=\"https://fdp-sv15-image-v1-0.gcprod1.freetime-platform.net/270x180-0' + event.image + '\" /><br/><b>' + event.name + '</b><br/>' + (+event.duration / 60) + ' minutes<br/>' + event.description)
                    .html('<span class="code">' + new Date(+event.startTime * 1000).toLocaleTimeString('en-GB').substr(0, 5) + "</span> - " + event.name);
            }
        }
    }
});

//////////////////////////////////////////////////

modules.push(function backlog() {
	var box = makeBox(1, 2);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4CB;Backlog')
	var table = box
		.append('div')
		.attr('class', 'inside')
		.append('table')
		.style('text-align', 'right');

	var row = table
		.append('tr');
	row
		.append('td')
		.text("Audiobooks:");
	row
		.append('td')
		.text('12')

	row = table
		.append('tr');
	row
		.append('td')
		.text("Books:");
	row
		.append('td')
		.text('14');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Films:");
	row
		.append('td')
		.text('362');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Games:");
	row
		.append('td')
		.text('11');

	row = table
		.append('tr');
	row
		.append('td')
		.text("TV:");
	row
		.append('td')
		.text('177');

	row = table
		.append('tr');
	row
		.append('td')
		.text("YouTube:");
	row
		.append('td')
		.text('3');

	row = table
		.append('tr');
	row
		.append('td')
		.html('&nbsp;');
	row
		.append('td')
		.html('&nbsp;');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Downloaded Files:");
	row
		.append('td')
		.text('21');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Steam Wishlist:");
	row
		.append('td')
		.text('0');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Work Inbox:");
	row
		.append('td')
		.text('10');
});

//////////////////////////////////////////////////

modules.push(function youtube() {

    var data = [
{ id: 'APx4oEcmIb4', title: "BIG STRETCH. Another epic song by @MattHobbs  #PuppySongs #bernese #pug #dog #bernesemountaindog", label: "BIG STRETCH. Another epic song by @MattHobbs  #PuppySongs #bernese #pug #dog #bernesemountaindog by Winston \u0026 Buddy 1 month ago 35 seconds 61,739 views – play Short" },
{ id: 'APx4oEcmIb4', title: "They’re really tired. #bernesemountaindog #pug #dog", label: "They’re really tired. #bernesemountaindog #pug #dog by Winston \u0026 Buddy 1 month ago 8 seconds 11,933 views – play Short" },
{ id: 'mQWajfAuSYU', title: "The fanciest feet. What else should we learn? #bernese #dog #berner #dogtricks #bernesemountaindog", label: "The fanciest feet. What else should we learn? #bernese #dog #berner #dogtricks #bernesemountaindog by Winston \u0026 Buddy 2 weeks ago 12 seconds 2,188 views – play Short" },
];

    var box = makeBox(2, 2);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#x1F4FC;<a href="https://www.youtube.com/feed/trending">YouTube Trending</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div');
    var table = inside
        .append('table')
        .style('width', '80%')
        .style('margin', '0 auto');

    var count = 0;
    for (var video of data) {
        var row = table
            .append('tr');
        row
            .append('td')
            .append('a')
            .attr('href', "https://www.youtube.com/watch?v=" + video.id)
            .append('img')
            .attr('src', 'https://i.ytimg.com/vi/' + video.id + '/hqdefault.jpg')
            .style('width', (480 / 4) + 'px')
            .style('height', (360 / 4) + 'px')
            .style('text-align', 'right')
            .attr('title', video.label);
        row
            .append('td')
            .style('text-align', 'left')
            .html(++count + '<br/><a href="https://www.youtube.com/watch?v=' + video.id + '">' + video.title + '</a>');
    }
});

//////////////////////////////////////////////////

modules.push(function f1() {
	var html =  "<a href='https://www.formula1.com/en/racing/2023/Monaco.html'><img src='https://www.formula1.com/content/dam/fom-website/races/2023/Monaco_Grand_Prix.png' style='height:auto;width:auto;max-height:180px;max-width:180px;' /></a><br/><span style='font-size:85%'>28 May</span>";
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F3C1;<a href="https://www.formula1.com/en/racing/2023.html">Next F1 Race</a>')
	box = box
		.append('div')
		.attr('class', 'inside')
		.append('div')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function media() {
	var html = '<p style="font-weight:bold;padding:10px 0 0 0">Audiobooks</p><ul><li><a href="https://www.google.com/search?q=Audiobooks+-+The Turbulent Term of Tyke Tyler">The Turbulent Term of Tyke Tyler</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Around the World in 80 Days">Around the World in 80 Days</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Animal Farm">Animal Farm</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Sherlock Holmes: A Study in Scarlet">Sherlock Holmes: A Study in Scarlet</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Books</p><ul><li><a href="https://www.google.com/search?q=Books+-+The Monkey\'s Paw (1902)">The Monkey\'s Paw (1902)</a></li><li><a href="https://www.google.com/search?q=Books+-+Fire Season (2011)">Fire Season (2011)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Films</p><ul><li><a href="https://www.google.com/search?q=Films+-+John Wick (2014)">John Wick (2014)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Whale (2022)">The Whale (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Gosford Park (2001)">Gosford Park (2001)</a></li><li><a href="https://www.google.com/search?q=Films+-+Dead Poets Society (1989)">Dead Poets Society (1989)</a></li><li><a href="https://www.google.com/search?q=Films+-+Sleepy Hollow (1999)">Sleepy Hollow (1999)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Shawshank Redemption (1994)">The Shawshank Redemption (1994)</a></li><li><a href="https://www.google.com/search?q=Films+-+Glass Onion (2022)">Glass Onion (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Mean Creek (2004)">Mean Creek (2004)</a></li><li><a href="https://www.google.com/search?q=Films+-+Triangle of Sadness (2022)">Triangle of Sadness (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Knives Out (2019)">Knives Out (2019)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Games</p><ul><li><a href="https://www.google.com/search?q=Games+-+Dishonored: Knife of Dunwall">Dishonored: Knife of Dunwall</a></li><li><a href="https://www.google.com/search?q=Games+-+A Little to the Left">A Little to the Left</a></li><li><a href="https://www.google.com/search?q=Games+-+Black Mesa">Black Mesa</a></li><li><a href="https://www.google.com/search?q=Games+-+Cyberpunk 2077">Cyberpunk 2077</a></li><li><a href="https://www.google.com/search?q=Games+-+Prison Architect">Prison Architect</a></li><li><a href="https://www.google.com/search?q=Games+-+Hitman WoA: Freelancer">Hitman WoA: Freelancer</a></li><li><a href="https://www.google.com/search?q=Games+-+Command & Conquer: Red Alert">Command & Conquer: Red Alert</a></li><li><a href="https://www.google.com/search?q=Games+-+100 Hidden Frogs">100 Hidden Frogs</a></li><li><a href="https://www.google.com/search?q=Games+-+Return to Monkey Island">Return to Monkey Island</a></li><li><a href="https://www.google.com/search?q=Games+-+Hitman 3">Hitman 3</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">TV</p><ul><li><a href="https://www.google.com/search?q=TV+-+Buffy the Vampire Slayer (S2)">Buffy the Vampire Slayer (S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+Rise & Fall (S1)">Rise & Fall (S1)</a></li><li><a href="https://www.google.com/search?q=TV+-+The Cleaner (S2)">The Cleaner (S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+Clarkson\'s Farm (S2)">Clarkson\'s Farm (S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+How this Blind Girl… (S1)">How this Blind Girl… (S1)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S6)">Downton Abbey (S6)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S5)">Downton Abbey (S5)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S4)">Downton Abbey (S4)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S3)">Downton Abbey (S3)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S2)">Downton Abbey (S2)</a></li></ul>';
	var box = makeBox(2, 4);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F3AC;Recently Completed Media')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function singles() {

	function encode(text) {
		text = text.toLowerCase();
		text = text.replace(/&#39;/g, "'");
		text = text.replace(/&amp;/g, "and");
		return text;
    }

	var when = "26 May 2023 -  01 June 2023"
	var singlesData = {
		1: { Artist: "<a href='https://www.officialcharts.com/artist/28097/calvin-harris-ellie-goulding/'>calvin harris/ellie goulding</a>", Title: "<a href='https://www.officialcharts.com/search/singles/miracle/'>MIRACLE</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/41c-MdW3tfL._SL75_.jpg" },
2: { Artist: "<a href='https://www.officialcharts.com/artist/61748/david-kushner/'>david kushner</a>", Title: "<a href='https://www.officialcharts.com/search/singles/daylight/'>DAYLIGHT</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/51xqm8tKwsL._SL75_.jpg" },
3: { Artist: "<a href='https://www.officialcharts.com/artist/51369/lewis-capaldi/'>lewis capaldi</a>", Title: "<a href='https://www.officialcharts.com/search/singles/wish-you-the-best/'>WISH YOU THE BEST</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/316-f167OmL._SL75_.jpg" },
4: { Artist: "<a href='https://www.officialcharts.com/artist/7456/loreen/'>loreen</a>", Title: "<a href='https://www.officialcharts.com/search/singles/tattoo/'>TATTOO</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/519kqkYHsHL._SL75_.jpg" },
5: { Artist: "<a href='https://www.officialcharts.com/artist/58181/rema/'>rema</a>", Title: "<a href='https://www.officialcharts.com/search/singles/calm-down/'>CALM DOWN</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/41BGcu-vUtL._SL75_.jpg" },

	};

	var box = makeBox(2, 2);
	box
		.append('div')
		.attr('class', 'title')
		.append('a')
		.attr('href', 'https://www.officialcharts.com/charts/singles-chart/')
		.html('&#x1F3B5;UK Singles Chart')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div');
	inside
		.append('p')
		.html(when + '<br/>&nbsp;');
	var table = inside
		.append('table');
	var position = 0;
	for (var item of Object.keys(singlesData)) {
		var title = encode(singlesData[item].Title.match(/>([^<]+)</)[1]);
		var artist = encode(singlesData[item].Artist.match(/>([^<]+)</)[1]);
		var row = table
			.append('tr');
		row
			.append('td')
			.html(++position);
		row
			.append('td')
			.append('a')
			.attr('href', 'https://www.youtube.com/results?search_query=' + artist + ' - ' + title)
			.append('img')
			.attr('src', singlesData[item].Image);
		row = row
			.append('td')
			.style('text-align', 'left')
		row
			.append('a')
			.attr('href', 'https://google.com/search?q=' + singlesData[item].Title + ' - ' + singlesData[item].Artist)
			.html(singlesData[item].Title)
		row
			.append('span')
			.html('<br/>' + singlesData[item].Artist);
	}
});

//////////////////////////////////////////////////

modules.push(function vanguard() {

	var data = [{ number: 174.73, tooltip: "Thu, May 25, 2023<br/>£174.73"},
{ number: 174.12, tooltip: "Wed, May 24, 2023<br/>£174.12"},
{ number: 175.07, tooltip: "Tue, May 23, 2023<br/>£175.07"},
{ number: 176.72, tooltip: "Mon, May 22, 2023<br/>£176.72"},
{ number: 176.08, tooltip: "Fri, May 19, 2023<br/>£176.08"},
{ number: 176.41, tooltip: "Thu, May 18, 2023<br/>£176.41"},
{ number: 174.51, tooltip: "Wed, May 17, 2023<br/>£174.51"},
{ number: 173.09, tooltip: "Tue, May 16, 2023<br/>£173.09"},
{ number: 173.84, tooltip: "Mon, May 15, 2023<br/>£173.84"},
{ number: 173.64, tooltip: "Fri, May 12, 2023<br/>£173.64"},
{ number: 173.28, tooltip: "Thu, May 11, 2023<br/>£173.28"},
{ number: 172.48, tooltip: "Wed, May 10, 2023<br/>£172.48"},
{ number: 172.15, tooltip: "Tue, May 09, 2023<br/>£172.15"},
{ number: 172.44, tooltip: "Fri, May 05, 2023<br/>£172.44"},
{ number: 170.62, tooltip: "Thu, May 04, 2023<br/>£170.62"},
{ number: 171.92, tooltip: "Wed, May 03, 2023<br/>£171.92"},
{ number: 173.27, tooltip: "Tue, May 02, 2023<br/>£173.27"},
{ number: 173.62, tooltip: "Fri, Apr 28, 2023<br/>£173.62"},
{ number: 173.72, tooltip: "Thu, Apr 27, 2023<br/>£173.72"},
{ number: 171.70, tooltip: "Wed, Apr 26, 2023<br/>£171.70"},
].reverse();

	var vanguardDates = {
		"Latest":      "Thu, May 25, 2023",
		"vs Day":      "Wed, May 24, 2023",
		"vs Week":     "Thu, May 18, 2023",
		"vs Month":    "Wed, Apr 26, 2023",
		"vs Year":     ""
	}

	var vanguardValues = {
		"Latest":      "£174.73/share",
		'vs Day':      "+0.35%",
		'vs Week':     "-0.95%",
		'vs Month':    "+1.76%",
		'vs Year':     "+4.28%"
	};

	var box = makeBox(3, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#128200;<a href="https://www.vanguardinvestor.co.uk">Vanguard</a>')
	box = box
		.append('div')
		.attr('class', 'inside');		
	var insideLeft = box
		.append('div')
		.style('display', 'inline')
		.style('position', 'absolute')
		.style('left', 0)
		.style('width', '37%');
	insideLeft
		.append('p')
		.append('a')
		.attr('href', 'https://www.vanguardinvestor.co.uk/investments/vanguard-ftse-global-all-cap-index-fund-gbp-acc')
		.html('FTSE Global All Cap<br/>Index Fund - Acc');
	insideLeft
		.append('p')
		.html('&nbsp;');
	var table = insideLeft
		.append('table');	
	
	for (var item of Object.keys(vanguardValues)) {
		var row = table
			.append('tr')
			.style('font-weight', item.startsWith("Latest") ? "bold" : "normal");
		if (vanguardDates[item].length > 0) {
			row
				.attr('class', 'ttt')
				.attr('data-tt', vanguardDates[item])
        }
		row
			.append('td')
			.style('text-align', 'left')
			.html(item + ':&nbsp;');
		row
			.append('td')
			.style('text-align', 'right')
			.attr('class', 'code')
			.html(vanguardValues[item]);
	}

	var insideRight = box
		.append('div')
		.style('display', 'inline')
		.style('position', 'absolute')
		.style('right', 0)
		.style('width', '66%');
	var chart = createLineChart(400, 150, insideRight, data, 2);
});

//////////////////////////////////////////////////

console.log('Error in crypto module: Sequence contains no elements');

//////////////////////////////////////////////////

modules.push(function moon() {
	var moonData = {
		Percent:  '44.0',
		Type:     '<a href="https://www.timeanddate.com/astronomy/moon/waxing-crescent.html" title="Waxing Crescent on the night between 26 May and 27 May">Waxing Crescent</a>',
		Image:    'https://www.timeanddate.com/scripts/moon.php?i=0.440&p=5.951&r=5.947',
		Location: '11609021'
	}

	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#127769;<a href="https://www.timeanddate.com/moon/@' + moonData.Location + '">Moon</a>')
	box = box
		.append('div')
		.attr('class', 'inside');	
	var inside = box
		.append('div');
	inside
		.append('img')
		.attr('src', moonData.Image)
		.attr('width', '75%')
		.attr('height', '75%');		
	inside
		.append('p')
		.html(moonData.Type + ' (' + moonData.Percent + '%)');	
});

//////////////////////////////////////////////////

modules.push(function sun() {
	var sunData = {
		Rise:     '04:55',
		Set:      '21:11',
		Location: '11609021'
	};

	var box = makeBox(1, 1);	
	box
		.append('div')
		.attr('class', 'title')
		.html('&#128262;<a href="https://www.timeanddate.com/sun/@' + sunData.Location + '">Sun</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div');	
	var table = inside
		.append('table')
		.style('width', '150px');
	var row = table
		.append('tr')
		.style('font-size', '300%');
	row
		.append('td')
		.html('&#127748;')
	row
		.append('td')
		.html('&#127751;')
	var row = table
		.append('tr');
	row
		.append('td')
		.html('Rise')
	row
		.append('td')
		.html('Set')
var row = table
		.append('tr');
	row
		.append('td')
		.html(sunData.Rise)
	row
		.append('td')
		.html(sunData.Set)
});

//////////////////////////////////////////////////

modules.push(function word() {
	var wordData = {
		Word:       '',
		Definition: '<p><em>Sapient</em> is a formal word that means “possessing or expressing great wisdom.” </p>'
	}

	var clean = wordData.Definition.replace(/<[^>]+>/g, '');

	var box = makeBox(clean.length > 250 ? 2 : 1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4DC;<a href="https://www.merriam-webster.com/word-of-the-day">Word of the Day</a>')
	box = box
		.append('div')
		.attr('class', 'inside');	
	var inside = box
		.append('div');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.append('a')
		.attr('href', 'https://www.merriam-webster.com/dictionary/' + wordData.Word)
		.text(wordData.Word);
	inside
		.append('div')
		.style('padding', '5px')
		.html(wordData.Definition);	
});

//////////////////////////////////////////////////

modules.push(function twitter() {
	var html =  '<table><tr><td style="text-align: right">1</td><td><a href="https://twitter.com/search?q=Schofield">Schofield</a></td></tr><tr><td style="text-align: right">2</td><td><a href="https://twitter.com/search?q=Eamonn">Eamonn</a></td></tr><tr><td style="text-align: right">3</td><td><a href="https://twitter.com/search?q=Holly">Holly</a></td></tr><tr><td style="text-align: right">4</td><td><a href="https://twitter.com/search?q=%23TOTP">#TOTP</a></td></tr><tr><td style="text-align: right">5</td><td><a href="https://twitter.com/search?q=NIKI">NIKI</a></td></tr></table>';
	var title = 'United Kingdom';
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F426;<a href="https://twitter.com/explore/tabs/trending">Twitter Trending</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.style('text-align', 'center')
		.html(title);
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function twitter() {
	var html =  '<table><tr><td style="text-align: right">1</td><td><a href="https://twitter.com/search?q=Scottie">Scottie</a></td></tr><tr><td style="text-align: right">2</td><td><a href="https://twitter.com/search?q=%23LarpCoin">#LarpCoin</a></td></tr><tr><td style="text-align: right">3</td><td><a href="https://twitter.com/search?q=%23HukuCoin">#HukuCoin</a></td></tr><tr><td style="text-align: right">4</td><td><a href="https://twitter.com/search?q=%23genlosswarehouse">#genlosswarehouse</a></td></tr><tr><td style="text-align: right">5</td><td><a href="https://twitter.com/search?q=NIKI">NIKI</a></td></tr></table>';
	var title = 'United States';
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F426;<a href="https://twitter.com/explore/tabs/trending">Twitter Trending</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.style('text-align', 'center')
		.html(title);
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function astronauts() {
	var astronautsData = {
		Amount:      '10',
		CountryHtml: '<table><tr><td><img class="flag ttt" data-tt="usa" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-usa.jpg" /></td><td><img class="flag ttt" data-tt="russia" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-russia.jpg" /></td><td><img class="flag ttt" data-tt="china" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-china.jpg" /></td><td><img class="flag ttt" data-tt="germany" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-germany.jpg" /></td></tr><tr style="vertical-align:top"><td>3</td><td>3</td><td>3</td><td>1</td></tr></table>'
	};

	var box = makeBox(1, 1);	
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F469;&#x200D;&#x1F680;<a href="https://www.howmanypeopleareinspacerightnow.com/">Astronauts</a>')
	box = box
		.append('div')
		.attr('class', 'inside')
		.append('div')
		.html("<p style='font-size:200%;font-weight:bold'>" + astronautsData.Amount + "</p><p>people are in space now.</p><p>&nbsp;</p>" + astronautsData.CountryHtml)
});

//////////////////////////////////////////////////



			createPage();

		</script>
	</body>
</html>