<!DOCTYPE html>
<html lang="en">
	<head>
		<title>00:44 17-Apr - Ephemeral</title>		
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="https://d3js.org/d3.v3.min.js"></script>
		<meta http-equiv="refresh" content="1800">
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik&display=swap"> 		
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;500&display=swap"> 	
		<link rel="stylesheet" type="text/css" href="style.css" />
	</head>
	<body>
		<div id="container">
		</div>
		<div id="tt" style="display: none">
			<p id="tooltip_text"></p>
		</div>
		<div id="cls">&nbsp;</div>
		<script>

////////////////////////////////////////////////// tooltips

            var tooltip = d3.select('#tt');
            var tt = d3.select('#tt');

            function setTooltip(value) {
				d3.select('#tooltip_text').html(value);
            }

            function createTooltipTriggers() {
                d3.selectAll('.ttt')
                    .on("mouseover", function (d, i) {
                        setTooltip(d3.selectAll('.ttt')[0][i].attributes['data-tt'].value);
                    })
                    .on("mouseout", function () {
                        tt.style('display', 'none');
                    })
					.on("mousemove", function () {
                        if (x <= 0 || y <= 0) {
                            tt.style('display', 'none');
                        } else {
                            tt.style('display', null);
                        }
                        var x = d3.event.pageX - (tt.node().getBoundingClientRect().width / 2);
                        var y = d3.event.pageY - (tt.node().getBoundingClientRect().height + 5);
                        tt.style('left', ~~x + 'px');
                        tt.style('top', ~~y + 'px');

                    });
			}

////////////////////////////////////////////////// charts

            function map(n, a, b, y, z) {
                return (n - a) * (z - y) / (b - a) + y;
			}

			function createLineChart(width, height, element, data, boundary = 0) {
                var svg = element
                    .append('svg')
                    .attr('width', width + 'px')
                    .attr('height', height + 'px');

                var start = Math.min(...data.map(a => a.number));
				var end = Math.max(...data.map(a => a.number));

				switch (boundary) {
					case 1:
						var distance = (end - start) * 0.1;
						start -= distance;
						start = Math.max(0, start);
						end += distance;
						break;
					case 2:
						start = 0;
						break;
				}

				var xs = [];
				var ys = [];

                for (var i = 1; i <= data.length; i++) {
                    var x1 = map(i - 1, 0, data.length - 1, 3, width - 3);
					var y1 = map(data[i - 1].number, start, end, height, 6);
					xs.push(x1);
					ys.push(y1);
				}

				var area = d3.svg.area()
					.interpolate('cardinal')
					.x(function (d, i) { return xs[i] })
					.y0(function (d, i) { return height })
					.y1(function (d, i) { return ys[i] });

				svg
					.append('path')
                    .datum(d3.range(data.length).map(function(d, i) { return i }))
					.attr("d", area)
					.attr('fill', '#eee');

                var line = d3.svg.line()
                    .interpolate('cardinal')
                    .x(function (d, i) { return xs[i] })
                    .y(function (d, i) { return ys[i] });

                svg
                    .append('path')
                    .datum(d3.range(data.length).map(function (d, i) { return i }))
                    .attr("d", line)
					.attr('fill', 'transparent')
					.style('stroke-width', 2)
					.style('stroke', '#bbb');

				for (var i = 1; i <= data.length; i++) {
					var x1 = map(i - 1, 0, data.length - 1, 3, width - 3);
                    var x2 = map(i, 0, data.length - 1, 3, width - 3);
                    var y1 = map(data[i - 1].number, start, end, height, 6);
                    var g = svg
                        .append('g')
                        .attr('class', 'group');
                    g
						.append('circle')
						.attr('class', 'highlight')
                        .attr('cx', x1)
                        .attr('cy', y1 - 0.5)
                        .attr('r', 1)
						.attr('title', data[i - 1].number);
					g
						.append('rect')
						.attr('class', 'ttt')
						.attr('width', x2 - x1)
						.attr('height', height)
						.attr('x', (x1) - ((x2 - x1) / 2))
						.attr('y', 0)
						.attr('data-tt', data[i - 1].tooltip)
						.attr('style', 'fill:transparent');
                    /*g
                        .append('circle')
                        .attr('class', 'ttt')
                        .attr('cx', x1)
                        .attr('cy', y1 - 0.5)
                        .attr('r', 4)
                        .attr('opacity', '0.01')
                        .attr('z-index', 1000)
                        .attr('data-tt', data[i - 1].tooltip);*/
				}

                svg
                    .append('line')
                    .attr('x1', 3)
                    .attr('y1', height)
                    .attr('x2', width - 3)
                    .attr('y2', height)
                    .style('stroke-width', 2)
                    .style('stroke', '#bbb');
            }

////////////////////////////////////////////////// page
					
			var inside = 210;
			var padding = 8;
			var length = padding + inside + padding;
			var columns;
			var offsetX;
			var offsetY;
			var filled = [,];
			var low = 0;
			var modules = [];
								
			function random(start, end) {
				return start + Math.floor(Math.random() * (end - start));
			}
			
			function makeBox(width, height) {			
				var startX = 0, startY = 0;
				var hasLocation = false;
				for (var a = 0; a + height < filled.length && !hasLocation; a++) {
					for (var b = 0; b + width <= columns && !hasLocation; b++) {					
						var isValid = true;
						for (var c = 0; c < height && isValid; c++) {
							for (var d = 0; d < width && isValid; d++) {
								if (filled[a + c][b + d] > 0) {
									isValid = false;
								}
							}
						}
						if (isValid) {
							hasLocation = true;							
							startX = b;
							startY = a;
						}						
					}
				}				
				if (hasLocation) {
					for (var c = startY; c < startY + height && isValid; c++) {
						for (var d = startX; d < startX + width && isValid; d++) {
							filled[c][d] = 1;
						}
					}
					low = Math.max(low, offsetY + (startY * length) + ((height * length) - (padding * 2)));				
					return d3
						.select('#container')
						.append('div')
						.attr('class', 'box')
						.style('top', offsetY + startY * length + 'px')
						.style('left', offsetX + startX * length + 'px')						
						.style('width', ((width * length) - (padding * 2)) + 'px')
						.style('height', ((height * length) - (padding * 2)) + 'px');
				}
			}
			
			function createPage() {
				low = 0;
				d3.selectAll('.box').remove();
				var docWidth = document.body.clientWidth;		
				columns = ~~((docWidth - 20) / length);
				columns = Math.min(7, columns);
				offsetX = ((docWidth - (columns * length)) / 2) + 5;				
				offsetY = 100;
				for (var a = 0; a < 50; a++) {
					filled[a] = new Array(columns);
					for (var b = 0; b < columns; b++) {
						filled[a][b] = 0;
					}
				}
				for (var func of modules) {
					func();
				}
				d3
					.select('#cls')
					.style('top', (low) + 'px')
					.style('height', ((padding * 2) + offsetY) + 'px');
				createTooltipTriggers();
			}
			
			d3.select(window).on('resize', createPage);

////////////////////////////////////////////////// boxes
			
console.log('Error in bbccombine module: The remote server returned an error: (504) Gateway Time-out.');

//////////////////////////////////////////////////

modules.push(function weather() {
    var weatherLocation = "11609021";

    var data={"copyright":"Contents are strictly for use by timeanddate.com","units":{"temp":"°C","prec":"mm","wind":"mph","baro":"mbar"},"detail":[{"hl":true,"hls":"17 Apr – 23 Apr","date":16816896E5,"ts":"Mon, 17","ds":"Mon, 17 Apr","icon":18,"desc":"Light rain. Cloudy.","temp":15,"templow":6,"cf":13,"wind":8,"wd":118,"hum":66,"pc":21,"rain":0.6 },{"date":1681776E6,"ts":"Tue, 18","ds":"Tue, 18 Apr","icon":4,"desc":"Afternoon clouds.","temp":13,"templow":4,"cf":9,"wind":20,"wd":57,"hum":55,"pc":0},{"date":16818624E5,"ts":"Wed, 19","ds":"Wed, 19 Apr","icon":4,"desc":"Morning clouds.","temp":13,"templow":5,"cf":9,"wind":19,"wd":56,"hum":56,"pc":0},{"date":16819488E5,"ts":"Thu, 20","ds":"Thu, 20 Apr","icon":33,"desc":"Passing showers. Broken clouds.","temp":10,"templow":4,"cf":6,"wind":18,"wd":45,"hum":68,"pc":47,"rain":3},{"date":16820352E5,"ts":"Fri, 21","ds":"Fri, 21 Apr","icon":33,"desc":"Passing showers. Overcast.","temp":9,"templow":5,"cf":6,"wind":12,"wd":241,"hum":87,"pc":65,"rain":8},{"date":16821216E5,"ts":"Sat, 22","ds":"Sat, 22 Apr","icon":7,"desc":"Overcast.","temp":12,"templow":4,"cf":9,"wind":11,"wd":240,"hum":64,"pc":39,"rain":1.1 },{"date":1682208E6,"ts":"Sun, 23","ds":"Sun, 23 Apr","icon":33,"desc":"Rain showers. Cloudy.","temp":12,"templow":2,"cf":12,"wind":5,"wd":70,"hum":69,"pc":69,"rain":15},{"hl":true,"hls":"24 Apr – 30 Apr","date":16822944E5,"ts":"Mon, 24","ds":"Mon, 24 Apr","icon":33,"desc":"Rain showers. Mostly cloudy.","temp":12,"templow":2,"cf":9,"wind":14,"wd":340,"hum":57,"pc":66,"rain":8.7 },{"date":16823808E5,"ts":"Tue, 25","ds":"Tue, 25 Apr","icon":4,"desc":"Partly cloudy.","temp":10,"templow":3,"cf":8,"wind":11,"wd":330,"hum":48,"pc":42,"rain":0.1 },{"date":16824672E5,"ts":"Wed, 26","ds":"Wed, 26 Apr","icon":33,"desc":"Passing showers. Mostly cloudy.","temp":10,"templow":3,"cf":9,"wind":5,"wd":260,"hum":86,"pc":50,"rain":1.7 },{"date":16825536E5,"ts":"Thu, 27","ds":"Thu, 27 Apr","icon":21,"desc":"Isolated tstorms. Scattered clouds.","temp":11,"templow":3,"cf":10,"wind":3,"wd":140,"hum":61,"pc":40,"rain":0.5 },{"date":168264E7,"ts":"Fri, 28","ds":"Fri, 28 Apr","icon":6,"desc":"Mostly cloudy.","temp":13,"templow":4,"cf":11,"wind":11,"wd":120,"hum":60,"pc":6},{"date":16827264E5,"ts":"Sat, 29","ds":"Sat, 29 Apr","icon":7,"desc":"Overcast.","temp":13,"templow":4,"cf":11,"wind":13,"wd":70,"hum":67,"pc":6},{"date":16828128E5,"ts":"Sun, 30","ds":"Sun, 30 Apr","icon":4,"desc":"Afternoon clouds.","temp":13,"templow":4,"cf":12,"wind":9,"wd":20,"hum":70,"pc":6},{"hl":true,"hls":"1 May – 7 May","date":16828992E5,"ts":"Mon, 1","ds":"Mon, 1 May","icon":33,"desc":"Passing showers. Overcast.","temp":12,"templow":5,"cf":12,"wind":6,"wd":110,"hum":86,"pc":57,"rain":0.8 }],"grid":{"temp":{"low":2,"high":15,"range":13},"prec":{"high":15},"time":86400000,"sections":15},"conv":{"prec":{"offset":0,"scale":1},"temp":{"offset":0,"scale":1},"wind":{"offset":0,"scale":0.869},"baro":{"offset":0,"scale":1}}};


    var box = makeBox(2, 2);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#127746;<a href="https://www.timeanddate.com/weather/@' + weatherLocation + '/ext">Weather</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div');
    var table = inside
        .append('table');

    for (var day of data.detail.slice(0, 7)) {
        var row = table
            .append('tr');
        row
            .append('td')
            .style('text-align', 'right')
            .style('font-weight', 'bold')
            .html(day.ds.split(',')[0] + ':&nbsp;');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html(day.templow + '&#xb0;');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html('to');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html(day.temp + '&#xb0;');
        row
            .append('td')
            .style('text-align', 'center')
            .append('img')
            .attr('src', 'https://c.tadst.com/gfx/w/svg/wt-' + day.icon + '.svg')
            .attr('width', '32px')
            .attr('height', '32px');
        row
            .append('td')
            .style('text-align', 'left')
            .html(day.desc)
    }
});

//////////////////////////////////////////////////

modules.push(function astronomy() {
	var imageData = {
		Source:    'https://apod.nasa.gov/apod/image/2304/M2D9_HubbleSchmidt_985.jpg',
		Title:     'M2-9: Wings of a Butterfly Nebula',
		LinkImage: 'https://apod.nasa.gov/apod/image/2304/M2D9_HubbleSchmidt_985.jpg',
		LinkPage:  'https://apod.nasa.gov/apod/ap230416.html'
	}

	if (!imageData.Source.endsWith('/')) {
		var box = makeBox(2, 2);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x1F680;<a href="https://apod.nasa.gov/apod/astropix.html">Astronomy Picture of the Day</a>')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', imageData.LinkImage)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', imageData.Source);
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', imageData.LinkPage)
			.html(imageData.Title);
	}
});

//////////////////////////////////////////////////

modules.push(function nature() {
	var natureData = {
		Source:   'https://cdn2.outdoorphotographer.com/2023/04/Mockingbird-In-Flight-By-James-Day.jpeg',
		Title:    'Mockingbird In Flight By James Day',
		LinkPage: 'https://www.outdoorphotographer.com/blog/photo-of-the-day-by-james-day-23/'
	}

	if (natureData.Source.length > 0) {
		var box = makeBox(2, 2);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x26FA;<a href="https://www.outdoorphotographer.com/blog/category/photo-of-the-day/">Outdoor Photo of the Day</a>')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', natureData.Source)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', natureData.Source);
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', natureData.LinkPage)
			.html(natureData.Title);
	}
});

//////////////////////////////////////////////////

modules.push(function wikipedia() {
	var pictureData = {
		Source:   'http://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/Oranges_-_whole-halved-segment.jpg/500px-Oranges_-_whole-halved-segment.jpg',
		Title:    'Orange (fruit)',
		LinkPage: 'https://en.wikipedia.org/wiki//wiki/Orange_(fruit)',
		Description: '    The <b><a href="/wiki/Orange_(fruit)" title="Orange (fruit)">orange</a></b> is a <a href="/wiki/Fruit" title="Fruit">fruit</a> of various <a href="/wiki/Citrus" title="Citrus">citrus</a> species in the family <a href="/wiki/Rutaceae" title="Rutaceae">Rutaceae</a>, primarily the cultivar <a href="/wiki/Citrus_%C3%97_sinensis" title="Citrus × sinensis"><i>Citrus</i> ×&#160;<i>sinensis</i></a>, also known as the sweet orange to distinguish it from <a href="/wiki/Bitter_orange" title="Bitter orange"><i>C.</i>&#160;×&#160;<i>aurantium</i></a>, the bitter orange. The sweet orange is a <a href="/wiki/Hybrid_(biology)" title="Hybrid (biology)">hybrid</a> between the <a href="/wiki/Pomelo" title="Pomelo">pomelo</a> (<i>C.&#160;maxima</i>) and the <a href="/wiki/Mandarin_orange" title="Mandarin orange">mandarin</a> (<i>C.&#160;reticulata</i>), with the pomelo being the <a href="/wiki/Chloroplast" title="Chloroplast">chloroplast</a> genome and maternal line. The orange originated in a region encompassing <a href="/wiki/South_China" title="South China">south China</a>, <a href="/wiki/Northeast_India" title="Northeast India">northeast India</a>, and Myanmar, and the earliest mention of the sweet orange found in <a href="/wiki/Chinese_literature" title="Chinese literature">Chinese literature</a> dates from 314&#160;BC. The sweet orange reproduces asexually (<a href="/wiki/Apomixis" title="Apomixis">apomixis</a> through <a href="/wiki/Nucellar_embryony" title="Nucellar embryony">nucellar embryony</a>); varieties of sweet orange arise through mutations. The <a href="/wiki/Whole_genome_sequencing" title="Whole genome sequencing">whole genome has been sequenced</a>. This photograph, depicting a whole orange, a halved orange, and a peeled orange segment, was <a href="/wiki/Focus_stacking" title="Focus stacking">focus-stacked</a> from eleven images.<small style="display: block; margin-top: 0.8em;">Photograph credit: <a href="https://commons.wikimedia.org/wiki/User:Iifar" class="extiw" title="c:User:Iifar">Ivar Leidus</a></small>'
	}

	if (pictureData.Source.length > 0) {
		var box = makeBox(2, 3);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x1F9E9;Wikipedia Picture of the Day')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', pictureData.Source)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', pictureData.Source);
		/*
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', pictureData.LinkPage)
			.html(pictureData.Title);
		*/
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.style('overflow', 'hidden')
			.style('margin', '5px')
			.style('display', '-webkit-box')
			.style('-webkit-line-clamp', '6')
			.style('-webkit-box-orient', 'vertical')
			.html(pictureData.Description);
	}
});

//////////////////////////////////////////////////

modules.push(function tv() {

    var tvData = [{"channelid":505,"offset":1,"event":""},{"channelid":700,"offset":1,"event":[{"name":"Wild Isles","description":"3\/5. David Attenborough explores our grasslands and reveals extraordinary wildlife stories. [S,AD,SL] [HD]","startTime":1681697400,"duration":3600,"svcId":700,"evtId":6165,"image":"\/ms\/img\/epg\/rb\/8df1-p0fbfwpq.jpg","hasTstv":false,"seriesNo":1,"episodeNo":3},{"name":"This is BBC Two","description":"Highlights of programmes on BBC Two. [HD]","startTime":1681701000,"duration":8400,"svcId":700,"evtId":6166,"image":"\/ms\/img\/epg\/rb\/8df1-p0bvs8dg.jpg","hasTstv":false},{"name":"Bargain Hunt","description":"Caroline Hawley and the teams shop for antiques in Kent with experts Nick Hall and Tim Weeks. Caroline also visits Bekonscot, the oldest model village in the world. [S] [HD]","startTime":1681709400,"duration":2700,"svcId":700,"evtId":6238,"image":"\/ms\/img\/epg\/rb\/8df1-p0ff7v4w.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1681473600,"availabilityEnd":1713009600,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001l061\u0026ui_id=4.0.0"},"seriesNo":64},{"name":"The Bidding Room","description":"19\/30. Nigel Havers hosts as five dealers bid to buy items brought in by the public, including a toy tugboat, a vintage petrol pump, a wooden mask and a pair of funfair dolphins. [S] [HD]","startTime":1681712100,"duration":2700,"svcId":700,"evtId":6239,"image":"\/ms\/img\/epg\/rb\/8df1-p0cvnczs.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1681486204,"availabilityEnd":1713627008,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001l06b\u0026ui_id=4.0.0"},"seriesNo":7,"episodeNo":19},{"name":"Rick Stein\u0027s Cornwall","description":"5\/15. Rick goes fishing under sail for his favourite oysters, makes a delicious fish soup and discovers the all-but-forgotten story of Cornwall\u0027s ancient capital, Lostwithiel. [S,AD,SL] [HD]","startTime":1681714800,"duration":1800,"svcId":700,"evtId":6240,"image":"\/ms\/img\/epg\/rb\/8df1-p0f24bm0.jpg","hasTstv":false,"seriesNo":3,"episodeNo":5},{"name":"Weatherman Walking: The Welsh...","description":"...Coast. 5\/8. Weatherman Derek Brockway walks from Ynyslas to Aberystwyth, Cardigan Bay. [S,SL] [HD]","startTime":1681716600,"duration":1800,"svcId":700,"evtId":6241,"image":"\/ms\/img\/epg\/rb\/8df1-p076vl5z.jpg","hasTstv":false,"seriesNo":17,"episodeNo":5},{"name":"Nicky Campbell","description":"Nicky Campbell takes your calls on the day\u0027s talking points, hearing views and experiences from across the UK. [S] [HD]","startTime":1681718400,"duration":3600,"svcId":700,"evtId":6242,"image":"\/ms\/img\/epg\/rb\/8df1-p0ff8nw5.jpg","hasTstv":false},{"name":"Snooker: World Championship","description":"Live coverage from the Crucible Theatre in Sheffield. [S] [HD]","startTime":1681722000,"duration":8100,"svcId":700,"evtId":6243,"image":"\/ms\/img\/epg\/rb\/8df1-p0c1yl9x.jpg","hasTstv":false,"seriesNo":2023},{"name":"Politics Live","description":"The big political issues of the day. [S] [HD]","startTime":1681730100,"duration":2700,"svcId":700,"evtId":6244,"image":"\/ms\/img\/epg\/rb\/8df1-p09819qp.jpg","hasTstv":false},{"name":"Snooker: World Championship","description":"Live coverage from the Crucible Theatre in Sheffield. [S] [HD]","startTime":1681732800,"duration":18000,"svcId":700,"evtId":6245,"image":"\/ms\/img\/epg\/rb\/8df1-p0c1yl9x.jpg","hasTstv":false,"seriesNo":2023},{"name":"Richard Osman\u0027s House of Games","description":"26\/140. Ruby Bhogal, Ed Byrne, Ingrid Oliver and Sir Matthew Pinsent test their general knowledge skills on this week\u0027s House of Games. [S] [HD]","startTime":1681750800,"duration":1800,"svcId":700,"evtId":6246,"image":"\/ms\/img\/epg\/rb\/8df1-p09vyjl2.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1632159000,"availabilityEnd":1663695000,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m000zyld\u0026ui_id=4.0.0"},"seriesNo":5,"episodeNo":26},{"name":"B\u0026B by the Sea","description":"6\/15. Queen of the dance floor and Strictly Come Dancing head judge Shirley Ballas is kept on her toes by the B\u0026B team. From pig farming to pottery, Shirley takes it all in her stride. [S] [HD]","startTime":1681752600,"duration":1800,"svcId":700,"evtId":6247,"image":"\/ms\/img\/epg\/rb\/8df1-p0dgknwz.jpg","hasTstv":false,"seriesNo":1,"episodeNo":6},{"name":"Between the Covers","description":"6\/6. Sara is joined by presenter Laura Whitmore, actor and comedian Meera Syal, presenter Gethin Jones and actor Joe Thomas to share their favourite books and review the book club choices. [S] [HD]","startTime":1681754400,"duration":1800,"svcId":700,"evtId":6248,"image":"\/ms\/img\/epg\/rb\/8df1-p0fg4v2r.jpg","hasTstv":false,"seriesNo":6,"episodeNo":6},{"name":"Saving Lives at Sea","description":"The crews race to rescue a shark attack victim and two boys being swept far out to sea. [S,AD] [HD]","startTime":1681756200,"duration":1800,"svcId":700,"evtId":6249,"image":"\/ms\/img\/epg\/rb\/8df1-p083xdpc.jpg","hasTstv":false,"seriesNo":6,"episodeNo":9},{"name":"Mastermind","description":"30\/31. Clive Myrie asks the questions in the last semi-final. The specialist subjects include Coldplay, the Karen Pirie novels of Val McDermid and the films of Terry Gilliam. [S] [HD]","startTime":1681758000,"duration":1800,"svcId":700,"evtId":6250,"image":"\/ms\/img\/epg\/rb\/8df1-p0fg4vmx.jpg","hasTstv":false,"seriesNo":2022,"episodeNo":30},{"name":"University Challenge","description":"32\/37. The second round of quarter-finals concludes with an elimination match. Two teams return having lost their first quarter-finals. Jeremy Paxman asks the questions. [S] [HD]","startTime":1681759800,"duration":1800,"svcId":700,"evtId":6251,"image":"\/ms\/img\/epg\/rb\/8df1-p0fg4x78.jpg","hasTstv":false,"seriesNo":2022,"episodeNo":32},{"name":"Deborah James: Bowelbabe in Her...","description":"...Own Words. Deborah James\u0027s extraordinary cancer journey, told with her own and her family\u0027s archive. Contains some strong language. [S,AD] [HD]","startTime":1681761600,"duration":4800,"svcId":700,"evtId":6252,"image":"\/ms\/img\/epg\/rb\/8df1-p0ff7qfn.jpg","hasTstv":false},{"name":"Live at the Apollo Bites","description":"1\/6. Featuring Kiri Pritchard-McLean, Stephen Bailey and Desiree Burch. Contains some strong language and adult humour. [S] [HD]","startTime":1681766400,"duration":600,"svcId":700,"evtId":6253,"image":"\/ms\/img\/epg\/rb\/8df1-p06tz771.jpg","hasTstv":false,"seriesNo":2025,"episodeNo":1},{"name":"Newsnight","description":"The day\u0027s important national and international news stories. With Faisal Islam. [S] [HD]","startTime":1681767000,"duration":2400,"svcId":700,"evtId":6254,"image":"\/ms\/img\/epg\/rb\/8df1-p07m7twy.jpg","hasTstv":false},{"name":"Weather","description":"Weather bulletin. [S] [HD]","startTime":1681769400,"duration":300,"svcId":700,"evtId":6255,"image":"\/ms\/img\/epg\/rb\/8df1-p0dc8npj.jpg","hasTstv":false},{"name":"Snooker: World Championship...","description":"...Highlights. Highlights from day three at the 2023 World Snooker Championship. [S] [HD]","startTime":1681769700,"duration":3000,"svcId":700,"evtId":6256,"image":"\/ms\/img\/epg\/rb\/8df1-p0c1yl9x.jpg","hasTstv":false},{"name":"Snooker: World Championship Extra","description":"Further highlights from day three at the 2023 World Snooker Championship. [S] [HD]","startTime":1681772700,"duration":7200,"svcId":700,"evtId":6257,"image":"\/ms\/img\/epg\/rb\/8df1-p0c1yl9x.jpg","hasTstv":false},{"name":"Countryfile","description":"Sean Fletcher is in Hendy, south Wales, visiting Europe\u0027s most productive leech farm, which supplies 70 per cent of medicinal leeches worldwide. [S,SL] [HD]","startTime":1681779900,"duration":3600,"svcId":700,"evtId":6258,"image":"\/ms\/img\/chan\/BBCTwoHD-App-Placeholder-1280x720.jpg","hasTstv":false},{"name":"Dragons\u0027 Den","description":"14\/14. Some entrepreneurial mums pitch a child-friendly sunscreen applicator. [S,AD,SL] [HD]","startTime":1681783500,"duration":3600,"svcId":700,"evtId":6259,"image":"\/ms\/img\/epg\/rb\/8df1-p0fcnmy6.jpg","hasTstv":false,"seriesNo":30,"episodeNo":14},{"name":"Reunion Hotel","description":"1\/5. Tegan fell on the Tube tracks and wants to meet the man who saved her, Lee hopes to find the brother he didn\u0027t know he had, and a little girl thanks builders who changed her life. [S,AD,SL] [HD]","startTime":1681787100,"duration":3600,"svcId":700,"evtId":6260,"image":"\/ms\/img\/epg\/rb\/8df1-p0fcf82m.jpg","hasTstv":false,"seriesNo":1,"episodeNo":1}]},{"channelid":1500,"offset":1,"event":[{"name":"Come Dine with Me","description":"Middlesbrough. Goalkeeping coach Dan hosts a James Bond evening, with 007-inspired food, a villain and... a penalty shoot-out. But some of his guests don\u0027t bond with each other. (Ep2\/5)  [S]","startTime":1681699800,"duration":1500,"svcId":1500,"evtId":17907,"image":"\/ms\/img\/epg\/rb\/5d52-game.genre.l.png","hasTstv":false},{"name":"Come Dine with Me","description":"Middlesbrough. Publican Gary hosts a 1980s night, flamb\u00e9ing his steaks at the table. There\u0027s tension between the guests, but Gary has a trick up his sleeve: a magic display. (Ep3\/5)  [S]","startTime":1681701300,"duration":1800,"svcId":1500,"evtId":17908,"image":"\/ms\/img\/epg\/rb\/5d52-game.genre.l.png","hasTstv":false},{"name":"Come Dine with Me","description":"Middlesbrough. Vintage shop owner Jane serves up a retro menu and a clothes competition, on a lively night with yet more drama between the diners. (Ep4\/5)  [S]","startTime":1681703100,"duration":1500,"svcId":1500,"evtId":17909,"image":"\/ms\/img\/epg\/rb\/5d52-game.genre.l.png","hasTstv":false},{"name":"Come Dine with Me","description":"Middlesbrough. For the final night, art enthusiast Julie serves an Indian menu. But her food gets mixed reviews, and there are shocks, revelations and some harsh home truths. (Ep5\/5)  [S]","startTime":1681704600,"duration":1800,"svcId":1500,"evtId":17910,"image":"\/ms\/img\/epg\/rb\/5d52-game.genre.l.png","hasTstv":false},{"name":"Work on the Wild Side","description":"Vets and volunteers move to South Africa to rescue and rehabilitate some of the world\u0027s most iconic animals. Will moves an elephant to a new home. Alison prepares to release three penguins.  [S]","startTime":1681706400,"duration":1500,"svcId":1500,"evtId":18799,"image":"\/ms\/img\/epg\/rb\/5d52-nature.genre.l.png","hasTstv":false},{"name":"Countdown","description":"Colin Murray and Rachel Riley host as contestants race against the clock to pit their wits against vowels, consonants and numbers. Grace Dent joins Susie Dent in Dictionary Corner.  [S]","startTime":1681707900,"duration":2400,"svcId":1500,"evtId":17947,"image":"\/ms\/img\/epg\/rb\/5d52-7470956.l.png","hasTstv":false},{"name":"Cheers","description":"Don Juan Is Hell: Diane uses Sam as a case study for an essay in her psychology class but paints an unflattering picture of him. Woody challenges Carla to a sports trivia quiz. (S4 Ep11\/26)  [S]","startTime":1681710300,"duration":1500,"svcId":1500,"evtId":17948,"image":"\/ms\/img\/epg\/rb\/5d52-318334.l.png","hasTstv":false,"seriesNo":4,"episodeNo":11},{"name":"Cheers","description":"Fools and Their Money: Sam decides to protect Woody from wasting his money by not placing a risky bet on his behalf, but when the long shot romps home, Sam is forced to pay up. (S4 Ep12\/26)  [S]","startTime":1681711800,"duration":1500,"svcId":1500,"evtId":17949,"image":"\/ms\/img\/epg\/rb\/5d52-319879.l.png","hasTstv":false,"seriesNo":4,"episodeNo":12},{"name":"The King of Queens","description":"Brace Yourself: Spence loses his job so Kelly and Deacon hire him to help with the house. Arthur wants to change his appearance after Major draws an unflattering picture of him. (S9 Ep6\/13)  [AD,S]","startTime":1681713300,"duration":1500,"svcId":1500,"evtId":17951,"image":"\/ms\/img\/epg\/rb\/5d52-comedy.genre.l.png","hasTstv":false,"seriesNo":9,"episodeNo":6},{"name":"The King of Queens","description":"Home Cheapo: A jealous Doug and Carrie devise a penny-pinching plan after Deacon and Kelly buy a weekend home by the lake. And Arthur offers to help Spence improve his CV. (S9 Ep7\/13)  [AD,S]","startTime":1681714800,"duration":1500,"svcId":1500,"evtId":17950,"image":"\/ms\/img\/epg\/rb\/5d52-6932847.l.png","hasTstv":false,"seriesNo":9,"episodeNo":7},{"name":"Frasier","description":"A Tsar Is Born: Frasier and Niles are delighted to discover that they may be descended from Russian royalty. (S7 Ep7)  [AD,S]","startTime":1681716300,"duration":1800,"svcId":1500,"evtId":17952,"image":"\/ms\/img\/epg\/rb\/5d52-903033.l.png","hasTstv":false,"seriesNo":7,"episodeNo":7},{"name":"Frasier","description":"The Late Doctor Crane: Frasier\u0027s name becomes confused with another in casualty. The next day, his death is announced on television and he reads his own obituary. (S7 Ep8)  [AD,S]","startTime":1681718100,"duration":1800,"svcId":1500,"evtId":18724,"image":"\/ms\/img\/epg\/rb\/5d52-905350.l.png","hasTstv":false,"seriesNo":7,"episodeNo":8},{"name":"Frasier","description":"The Apparent Trap: When Lilith drops Frederick off at Frasier\u0027s house for Thanksgiving, Frederick asks her to stay for dinner. But strange things start to happen... (S7 Ep9)  [AD,S]","startTime":1681719900,"duration":1800,"svcId":1500,"evtId":18725,"image":"\/ms\/img\/epg\/rb\/5d52-907759.l.png","hasTstv":false,"seriesNo":7,"episodeNo":9},{"name":"Find It, Fix It, Flog It","description":"In Leicestershire, Simon O\u0027Brien and Henry Cole meet Bernadette, whose uncle Jim has filled every room in his house with motorbikes, cycles and everything under the sun. (S7 Ep1)  [S]","startTime":1681721700,"duration":3600,"svcId":1500,"evtId":17956,"image":"\/ms\/img\/epg\/rb\/5d52-6090450.l.png","hasTstv":false,"seriesNo":7,"episodeNo":1},{"name":"Emergency Helicopter Medics","description":"The heli-medics race to help Yvonne, who\u0027s in cardiac arrest. And in the Peaks, they land on top of a steep ridge where Donna collapsed while out walking. (S4 Ep6)  [AD,S]","startTime":1681725300,"duration":3600,"svcId":1500,"evtId":17958,"image":"\/ms\/img\/epg\/rb\/5d52-416347332.l.png","hasTstv":false,"seriesNo":4,"episodeNo":6},{"name":"Channel 4 News Summary","description":"Channel 4\u0027s midday news summary.  [S]","startTime":1681728900,"duration":300,"svcId":1500,"evtId":17957,"image":"\/ms\/img\/epg\/rb\/5d52-2023374.l.png","hasTstv":false},{"name":"Live: Steph\u0027s Packed Lunch","description":"Steph McGovern presents her live lunchtime show featuring celebrity guests, fantastic food and the best entertainment, lifestyle and consumer stories making the headlines.  [S]","startTime":1681729200,"duration":7800,"svcId":1500,"evtId":17959,"image":"\/ms\/img\/epg\/rb\/5d52-7499253.l.png","hasTstv":false},{"name":"Countdown","description":"Colin Murray and Rachel Riley host as contestants race against the clock to pit their wits against vowels, consonants and numbers. Justin Moorhouse joins Susie Dent in Dictionary Corner.  [S]","startTime":1681737000,"duration":3000,"svcId":1500,"evtId":17960,"image":"\/ms\/img\/epg\/rb\/5d52-7499262.l.png","hasTstv":false},{"name":"A Place in the Sun","description":"Lynn and Barry are relocating to Spain\u0027s Costa Blanca with their two cats, Bob and Marley. Lee Juggurnauth shows them five options for \u00a3180k, but will any of them pass muster?  [S]","startTime":1681740000,"duration":3600,"svcId":1500,"evtId":17961,"image":"\/ms\/img\/epg\/rb\/5d52-413025535.l.png","hasTstv":false},{"name":"A New Life in the Sun","description":"In Portugal, we meet a family who are dreaming of an eco-friendly new life. A couple struggle to get their French B\u0026B ready. In Spain, a bike business starts up again after Covid. (S7 Ep26)  [S]","startTime":1681743600,"duration":3600,"svcId":1500,"evtId":17962,"image":"\/ms\/img\/epg\/rb\/5d52-414294811.l.png","hasTstv":false,"seriesNo":7,"episodeNo":26},{"name":"Four in a Bed","description":"The first visit this week is to The Lazy Pug in Warwickshire, run by best friends Ash and Rosie, where the quirky d\u00e9cor and neon lighting give some of the guests a headache.  [S]","startTime":1681747200,"duration":1800,"svcId":1500,"evtId":17963,"image":"\/ms\/img\/epg\/rb\/5d52-6560594.l.png","hasTstv":false},{"name":"Strangers on a Plane","description":"On day one in Barcelona, Damon treats his fellow holidaymakers to a Segway tour and dinner at an Alice in Wonderland-themed restaurant. Is it a fairy-tale start to the week? (Ep11\/20)  [S]","startTime":1681749000,"duration":1800,"svcId":1500,"evtId":17964,"image":"\/ms\/img\/epg\/rb\/5d52-7499283.l.png","hasTstv":false,"seriesNo":1,"episodeNo":11},{"name":"The Simpsons","description":"Milhouse of Sand and Fog: When Milhouse\u0027s parents reunite, Milhouse is annoyed because he receives less attention from them. Will they stay together? Homer catches chicken pox. (S17 Ep3\/22)  [AD,S]","startTime":1681750800,"duration":1800,"svcId":1500,"evtId":17965,"image":"\/ms\/img\/epg\/rb\/5d52-5599417.l.png","hasTstv":false,"seriesNo":17,"episodeNo":3},{"name":"Hollyoaks","description":"A shocking secret comes to light when Warren learns the truth about his parents. Ella is hit with some home truths about her dad. Dave is feeling guilty.  [AD,S]","startTime":1681752600,"duration":1800,"svcId":1500,"evtId":17966,"image":"\/ms\/img\/epg\/rb\/5d52-7499298.l.png","hasTstv":false},{"name":"Channel 4 News","description":"Channel 4\u0027s flagship news programme. Including the weather.  [S]","startTime":1681754400,"duration":3600,"svcId":1500,"evtId":17967,"image":"\/ms\/img\/epg\/rb\/5d52-2023390.l.png","hasTstv":false},{"name":"New: Sarah Beeny\u0027s New Life in...","description":"...the Country: Sarah Beeny and her husband Graham are back as they turn their newly built house into a home, starting with the creation of a bespoke library. (S3 Ep1\/7)  [AD,S]","startTime":1681758000,"duration":3600,"svcId":1500,"evtId":17968,"image":"\/ms\/img\/epg\/rb\/5d52-7498276.l.png","hasTstv":false,"seriesNo":3,"episodeNo":1},{"name":"New: Scared of the Dark","description":"Eight celebrities have been living in complete darkness for 30 hours, and things don\u0027t get any easier when two of them are shackled together for 12 hours in a 2m x 2m box... (Ep2\/5)  [AD,S]","startTime":1681761600,"duration":3600,"svcId":1500,"evtId":17969,"image":"\/ms\/img\/epg\/rb\/5d52-reality.genre.l.png","hasTstv":false,"seriesNo":1,"episodeNo":2},{"name":"New: First Dates","description":"Will a gaming nerd finally find her \u0027geeky James Bond\u0027? Can an actor overcome their First Dates stage nerves? And will an ex-wild thing\u0027s tattoos wreck his chances of new love? (S20 Ep1)  [AD,S]","startTime":1681765200,"duration":3900,"svcId":1500,"evtId":17970,"image":"\/ms\/img\/epg\/rb\/5d52-7498284.l.png","hasTstv":false,"seriesNo":20,"episodeNo":1},{"name":"Send Nudes: Body SOS","description":"Illy wants a bum she can twerk with. Care worker Ryan has unwanted excess skin after losing weight. After seeing their avatars, will they go ahead with their surgery plans? (Ep8)  [S]","startTime":1681769100,"duration":3600,"svcId":1500,"evtId":18730,"image":"\/ms\/img\/epg\/rb\/5d52-reality.genre.l.png","hasTstv":false,"seriesNo":1,"episodeNo":8},{"name":"Celebrity Hunted","description":"The hunters track two fugitives to a celebrity pal\u0027s house. James Acaster and Ed Gamble mark their time on the run with a tattoo as they plot a daring stunt. (S5 Ep3)  [AD,S,SL]","startTime":1681772700,"duration":3300,"svcId":1500,"evtId":18731,"image":"\/ms\/img\/epg\/rb\/5d52-7467847.l.png","hasTstv":false,"seriesNo":5,"episodeNo":3},{"name":"Ramsay\u0027s Kitchen Nightmares USA","description":"Gordon Ramsay revisits three restaurants - Handlebar, Casa Roma and The Black Pearl - to check in with the owners he helped. Has his advice been put to good use? (S3 Ep12)  [S,SL]","startTime":1681776000,"duration":3000,"svcId":1500,"evtId":17974,"image":"\/ms\/img\/epg\/rb\/5d52-1055827.l.png","hasTstv":false,"seriesNo":2,"episodeNo":13},{"name":"Couples Come Dine with Me","description":"In Brighton, Hannah and Luke serve up an ambitiously trendy menu, but is it style over sustenance? Mark makes a jaw-dropping revelation. Rachel and TJ keep their cards close to their chest.  [S]","startTime":1681779000,"duration":3300,"svcId":1500,"evtId":17975,"image":"\/ms\/img\/epg\/rb\/5d52-4492502.l.png","hasTstv":false,"seriesNo":3,"episodeNo":82},{"name":"Scared of the Dark","description":"Danny Dyer hosts as eight celebrities are plunged into complete darkness for eight days. How will Paul Gascoigne, Chris Eubank, Scarlett Moffatt and others cope without light? (Ep1\/5)  [AD,S,SL]","startTime":1681782300,"duration":3900,"svcId":1500,"evtId":18801,"image":"\/ms\/img\/epg\/rb\/5d52-reality.genre.l.png","hasTstv":false,"seriesNo":1,"episodeNo":1},{"name":"Grand Designs","description":"Kevin McCloud returns to the Isle of Wight and the conversion of a 1970s bungalow in unspoilt ancient woodland. Did the unconventional techniques and alternative materials work?  [AD,S,SL]","startTime":1681786200,"duration":3300,"svcId":1500,"evtId":18732,"image":"\/ms\/img\/epg\/rb\/5d52-2317729.l.png","hasTstv":false},{"name":"The Great British Dig: History...","description":"...in Your Back Garden: Can Hugh Dennis and the team find the remains of a vanished building in the gardens of the Georgian stately home Beningbrough Hall? (S2 Ep4)  [AD,S,SL]","startTime":1681789500,"duration":3300,"svcId":1500,"evtId":18800,"image":"\/ms\/img\/epg\/rb\/5d52-5383549.l.png","hasTstv":false,"seriesNo":2,"episodeNo":4}]}];

    var box = makeBox(2, 3);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#x1F4FA;<a href="https://www.freesat.co.uk/tv-guide">TV</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div')
        .style('text-align', 'left');

    var channels = { 505: "BBC 1", 700: "BBC 2", 1500: "Channel 4" };

    var today = new Date();
    var primeTime = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 18, 0, 0);
    var unixStart = (+primeTime) / 1000;
    var unixEnd = unixStart + 60 * 60 * 6;
    var first = true;

    for (var channel of tvData) {
        if (!first) {
            first = false;
        } else {
            inside
                .append('br');
        }

        inside
            .append('p')
            .append('b')
            .text(channels[channel.channelid]);
        var list = inside
            .append('ul');
        for (var event of channel.event) {
            console.log(event);
            if (+event.startTime >= unixStart && +event.startTime < unixEnd) {
                list
                    .append('li')
                    .attr('class', 'ttt')
                    .attr('data-tt', '<img src=\"https://fdp-sv15-image-v1-0.gcprod1.freetime-platform.net/270x180-0' + event.image + '\" /><br/><b>' + event.name + '</b><br/>' + (+event.duration / 60) + ' minutes<br/>' + event.description)
                    .html('<span class="code">' + new Date(+event.startTime * 1000).toLocaleTimeString('en-GB').substr(0, 5) + "</span> - " + event.name);
            }
        }
    }
});

//////////////////////////////////////////////////

modules.push(function backlog() {
	var box = makeBox(1, 2);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4CB;Backlog')
	var table = box
		.append('div')
		.attr('class', 'inside')
		.append('table')
		.style('text-align', 'right');

	var row = table
		.append('tr');
	row
		.append('td')
		.text("Audiobooks:");
	row
		.append('td')
		.text('13')

	row = table
		.append('tr');
	row
		.append('td')
		.text("Books:");
	row
		.append('td')
		.text('14');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Films:");
	row
		.append('td')
		.text('362');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Games:");
	row
		.append('td')
		.text('13');

	row = table
		.append('tr');
	row
		.append('td')
		.text("TV:");
	row
		.append('td')
		.text('177');

	row = table
		.append('tr');
	row
		.append('td')
		.text("YouTube:");
	row
		.append('td')
		.text('2');

	row = table
		.append('tr');
	row
		.append('td')
		.html('&nbsp;');
	row
		.append('td')
		.html('&nbsp;');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Downloaded Files:");
	row
		.append('td')
		.text('7');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Steam Wishlist:");
	row
		.append('td')
		.text('93');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Work Inbox:");
	row
		.append('td')
		.text('71');
});

//////////////////////////////////////////////////

modules.push(function youtube() {

    var data = [
{ id: '1mglsVBAqj8', title: "Big Bang Zhang with a TKO | Joyce vs Zhang | Official Fight Highlights | BT Sport", label: "Big Bang Zhang with a TKO | Joyce vs Zhang | Official Fight Highlights | BT Sport by BT Sport Boxing 23 hours ago 9 minutes, 3 seconds 1,949,924 views" },
{ id: 'EGZC231euVs', title: "SO GOOD they got Bruno's Golden Buzzer MID-PERFORMANCE | Auditions | BGT 2023", label: "SO GOOD they got Bruno's Golden Buzzer MID-PERFORMANCE | Auditions | BGT 2023 by Britain's Got Talent 1 day ago 8 minutes, 37 seconds 1,748,053 views" },
{ id: 'Y4-gFIfGXiQ', title: "I Interviewed Youtubers 1 Year Apart...", label: "I Interviewed Youtubers 1 Year Apart... by Calfreezy 1 day ago 20 minutes 737,263 views" },
];

    var box = makeBox(2, 2);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#x1F4FC;<a href="https://www.youtube.com/feed/trending">YouTube Trending</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div');
    var table = inside
        .append('table')
        .style('width', '80%')
        .style('margin', '0 auto');

    var count = 0;
    for (var video of data) {
        var row = table
            .append('tr');
        row
            .append('td')
            .append('a')
            .attr('href', "https://www.youtube.com/watch?v=" + video.id)
            .append('img')
            .attr('src', 'https://i.ytimg.com/vi/' + video.id + '/hqdefault.jpg')
            .style('width', (480 / 4) + 'px')
            .style('height', (360 / 4) + 'px')
            .style('text-align', 'right')
            .attr('title', video.label);
        row
            .append('td')
            .style('text-align', 'left')
            .html(++count + '<br/><a href="https://www.youtube.com/watch?v=' + video.id + '">' + video.title + '</a>');
    }
});

//////////////////////////////////////////////////

modules.push(function f1() {
	var html =  "<a href='https://www.formula1.com/en/racing/2023/Azerbaijan.html'><img src='https://www.formula1.com/content/dam/fom-website/races/2023/Azerbaijan_Grand_Prix.png' style='height:auto;width:auto;max-height:180px;max-width:180px;' /></a><br/><span style='font-size:85%'>30 April</span>";
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F3C1;<a href="https://www.formula1.com/en/racing/2023.html">Next F1 Race</a>')
	box = box
		.append('div')
		.attr('class', 'inside')
		.append('div')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function media() {
	var html = '<p style="font-weight:bold;padding:10px 0 0 0">Audiobooks</p><ul><li><a href="https://www.google.com/search?q=Audiobooks+-+Around the World in 80 Days">Around the World in 80 Days</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Animal Farm">Animal Farm</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Sherlock Holmes: A Study in Scarlet">Sherlock Holmes: A Study in Scarlet</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Books</p><ul><li><a href="https://www.google.com/search?q=Books+-+The Monkey\'s Paw (1902)">The Monkey\'s Paw (1902)</a></li><li><a href="https://www.google.com/search?q=Books+-+Fire Season (2011)">Fire Season (2011)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Films</p><ul><li><a href="https://www.google.com/search?q=Films+-+John Wick (2014)">John Wick (2014)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Whale (2022)">The Whale (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Gosford Park (2001)">Gosford Park (2001)</a></li><li><a href="https://www.google.com/search?q=Films+-+Dead Poets Society (1989)">Dead Poets Society (1989)</a></li><li><a href="https://www.google.com/search?q=Films+-+Sleepy Hollow (1999)">Sleepy Hollow (1999)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Shawshank Redemption (1994)">The Shawshank Redemption (1994)</a></li><li><a href="https://www.google.com/search?q=Films+-+Glass Onion (2022)">Glass Onion (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Mean Creek (2004)">Mean Creek (2004)</a></li><li><a href="https://www.google.com/search?q=Films+-+Triangle of Sadness (2022)">Triangle of Sadness (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Knives Out (2019)">Knives Out (2019)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Games</p><ul><li><a href="https://www.google.com/search?q=Games+-+Prison Architect">Prison Architect</a></li><li><a href="https://www.google.com/search?q=Games+-+Hitman WoA: Freelancer">Hitman WoA: Freelancer</a></li><li><a href="https://www.google.com/search?q=Games+-+Command & Conquer: Red Alert">Command & Conquer: Red Alert</a></li><li><a href="https://www.google.com/search?q=Games+-+100 Hidden Frogs">100 Hidden Frogs</a></li><li><a href="https://www.google.com/search?q=Games+-+Return to Monkey Island">Return to Monkey Island</a></li><li><a href="https://www.google.com/search?q=Games+-+Hitman 3">Hitman 3</a></li><li><a href="https://www.google.com/search?q=Games+-+Firewatch">Firewatch</a></li><li><a href="https://www.google.com/search?q=Games+-+Sniper Elite 4">Sniper Elite 4</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">TV</p><ul><li><a href="https://www.google.com/search?q=TV+-+Rise & Fall (S1)">Rise & Fall (S1)</a></li><li><a href="https://www.google.com/search?q=TV+-+The Cleaner (S2)">The Cleaner (S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+Clarkson\'s Farm (S2)">Clarkson\'s Farm (S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+How this Blind Girl… (S1)">How this Blind Girl… (S1)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S6)">Downton Abbey (S6)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S5)">Downton Abbey (S5)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S4)">Downton Abbey (S4)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S3)">Downton Abbey (S3)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S2)">Downton Abbey (S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S1)">Downton Abbey (S1)</a></li></ul>';
	var box = makeBox(2, 4);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F3AC;Recently Completed Media')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function singles() {

	function encode(text) {
		text = text.toLowerCase();
		text = text.replace(/&#39;/g, "'");
		text = text.replace(/&amp;/g, "and");
		return text;
    }

	var when = "14 April 2023 -  20 April 2023"
	var singlesData = {
		1: { Artist: "<a href='https://www.officialcharts.com/artist/28097/calvin-harris-ellie-goulding/'>calvin harris/ellie goulding</a>", Title: "<a href='https://www.officialcharts.com/search/singles/miracle/'>MIRACLE</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/41c-MdW3tfL._SL75_.jpg" },
2: { Artist: "<a href='https://www.officialcharts.com/artist/63953/libianca/'>libianca</a>", Title: "<a href='https://www.officialcharts.com/search/singles/people/'>PEOPLE</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/416HTM1LzFL._SL75_.jpg" },
3: { Artist: "<a href='https://www.officialcharts.com/artist/6692/ed-sheeran/'>ed sheeran</a>", Title: "<a href='https://www.officialcharts.com/search/singles/eyes-closed/'>EYES CLOSED</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/411mB8h9-uL._SL75_.jpg" },
4: { Artist: "<a href='https://www.officialcharts.com/artist/58181/rema/'>rema</a>", Title: "<a href='https://www.officialcharts.com/search/singles/calm-down/'>CALM DOWN</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/41BGcu-vUtL._SL75_.jpg" },
5: { Artist: "<a href='https://www.officialcharts.com/artist/6213/drake/'>drake</a>", Title: "<a href='https://www.officialcharts.com/search/singles/search-_and_-rescue/'>SEARCH &amp; RESCUE</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/3176ScirhFL._SL75_.jpg" },

	};

	var box = makeBox(2, 2);
	box
		.append('div')
		.attr('class', 'title')
		.append('a')
		.attr('href', 'https://www.officialcharts.com/charts/singles-chart/')
		.html('&#x1F3B5;UK Singles Chart')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div');
	inside
		.append('p')
		.html(when + '<br/>&nbsp;');
	var table = inside
		.append('table');
	var position = 0;
	for (var item of Object.keys(singlesData)) {
		var title = encode(singlesData[item].Title.match(/>([^<]+)</)[1]);
		var artist = encode(singlesData[item].Artist.match(/>([^<]+)</)[1]);
		var row = table
			.append('tr');
		row
			.append('td')
			.html(++position);
		row
			.append('td')
			.append('a')
			.attr('href', 'https://www.youtube.com/results?search_query=' + artist + ' - ' + title)
			.append('img')
			.attr('src', singlesData[item].Image);
		row = row
			.append('td')
			.style('text-align', 'left')
		row
			.append('a')
			.attr('href', 'https://google.com/search?q=' + singlesData[item].Title + ' - ' + singlesData[item].Artist)
			.html(singlesData[item].Title)
		row
			.append('span')
			.html('<br/>' + singlesData[item].Artist);
	}
});

//////////////////////////////////////////////////

modules.push(function vanguard() {

	var data = [{ number: 175.17, tooltip: "Fri, Apr 14, 2023<br/>£175.17"},
{ number: 174.39, tooltip: "Thu, Apr 13, 2023<br/>£174.39"},
{ number: 173.11, tooltip: "Wed, Apr 12, 2023<br/>£173.11"},
{ number: 173.80, tooltip: "Tue, Apr 11, 2023<br/>£173.80"},
{ number: 172.94, tooltip: "Thu, Apr 06, 2023<br/>£172.94"},
{ number: 172.37, tooltip: "Wed, Apr 05, 2023<br/>£172.37"},
{ number: 172.27, tooltip: "Tue, Apr 04, 2023<br/>£172.27"},
{ number: 174.37, tooltip: "Mon, Apr 03, 2023<br/>£174.37"},
{ number: 174.18, tooltip: "Fri, Mar 31, 2023<br/>£174.18"},
{ number: 172.08, tooltip: "Thu, Mar 30, 2023<br/>£172.08"},
{ number: 171.74, tooltip: "Wed, Mar 29, 2023<br/>£171.74"},
{ number: 169.42, tooltip: "Tue, Mar 28, 2023<br/>£169.42"},
{ number: 169.88, tooltip: "Mon, Mar 27, 2023<br/>£169.88"},
{ number: 170.06, tooltip: "Fri, Mar 24, 2023<br/>£170.06"},
{ number: 169.10, tooltip: "Thu, Mar 23, 2023<br/>£169.10"},
{ number: 169.48, tooltip: "Wed, Mar 22, 2023<br/>£169.48"},
{ number: 171.30, tooltip: "Tue, Mar 21, 2023<br/>£171.30"},
{ number: 168.38, tooltip: "Mon, Mar 20, 2023<br/>£168.38"},
{ number: 168.94, tooltip: "Fri, Mar 17, 2023<br/>£168.94"},
].reverse();

	var vanguardDates = {
		"Latest":      "Fri, Apr 14, 2023",
		"vs Day":      "Thu, Apr 13, 2023",
		"vs Week":     "Wed, Apr 05, 2023",
		"vs Month":    "Fri, Mar 17, 2023",
		"vs Year":     ""
	}

	var vanguardValues = {
		"Latest":      "£175.17/share",
		'vs Day':      "+0.45%",
		'vs Week':     "+1.62%",
		'vs Month':    "+3.69%",
		'vs Year':     "+0.82%"
	};

	var box = makeBox(3, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#128200;<a href="https://www.vanguardinvestor.co.uk">Vanguard</a>')
	box = box
		.append('div')
		.attr('class', 'inside');		
	var insideLeft = box
		.append('div')
		.style('display', 'inline')
		.style('position', 'absolute')
		.style('left', 0)
		.style('width', '37%');
	insideLeft
		.append('p')
		.append('a')
		.attr('href', 'https://www.vanguardinvestor.co.uk/investments/vanguard-ftse-global-all-cap-index-fund-gbp-acc')
		.html('FTSE Global All Cap<br/>Index Fund - Acc');
	insideLeft
		.append('p')
		.html('&nbsp;');
	var table = insideLeft
		.append('table');	
	
	for (var item of Object.keys(vanguardValues)) {
		var row = table
			.append('tr')
			.style('font-weight', item.startsWith("Latest") ? "bold" : "normal");
		if (vanguardDates[item].length > 0) {
			row
				.attr('class', 'ttt')
				.attr('data-tt', vanguardDates[item])
        }
		row
			.append('td')
			.style('text-align', 'left')
			.html(item + ':&nbsp;');
		row
			.append('td')
			.style('text-align', 'right')
			.attr('class', 'code')
			.html(vanguardValues[item]);
	}

	var insideRight = box
		.append('div')
		.style('display', 'inline')
		.style('position', 'absolute')
		.style('right', 0)
		.style('width', '66%');
	var chart = createLineChart(400, 150, insideRight, data, 2);
});

//////////////////////////////////////////////////

console.log('Error in crypto module: Sequence contains no elements');

//////////////////////////////////////////////////

modules.push(function moon() {
	var moonData = {
		Percent:  '12.9',
		Type:     '<a href="https://www.timeanddate.com/astronomy/moon/waning-crescent.html" title="Waning Crescent on the night between 16 April and 17 April">Waning Crescent</a>',
		Image:    'https://www.timeanddate.com/scripts/moon.php?i=0.129&p=3.098&r=0.051',
		Location: '11609021'
	}

	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#127769;<a href="https://www.timeanddate.com/moon/@' + moonData.Location + '">Moon</a>')
	box = box
		.append('div')
		.attr('class', 'inside');	
	var inside = box
		.append('div');
	inside
		.append('img')
		.attr('src', moonData.Image)
		.attr('width', '75%')
		.attr('height', '75%');		
	inside
		.append('p')
		.html(moonData.Type + ' (' + moonData.Percent + '%)');	
});

//////////////////////////////////////////////////

modules.push(function sun() {
	var sunData = {
		Rise:     '06:05',
		Set:      '20:07',
		Location: '11609021'
	};

	var box = makeBox(1, 1);	
	box
		.append('div')
		.attr('class', 'title')
		.html('&#128262;<a href="https://www.timeanddate.com/sun/@' + sunData.Location + '">Sun</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div');	
	var table = inside
		.append('table')
		.style('width', '150px');
	var row = table
		.append('tr')
		.style('font-size', '300%');
	row
		.append('td')
		.html('&#127748;')
	row
		.append('td')
		.html('&#127751;')
	var row = table
		.append('tr');
	row
		.append('td')
		.html('Rise')
	row
		.append('td')
		.html('Set')
var row = table
		.append('tr');
	row
		.append('td')
		.html(sunData.Rise)
	row
		.append('td')
		.html(sunData.Set)
});

//////////////////////////////////////////////////

modules.push(function word() {
	var wordData = {
		Word:       '',
		Definition: '<p>The verb <em>pacify</em> has several related definitions. Among the most common are “to soothe the anger or agitation of” (as in “pacify a crying child”) and “to appease” (“trying to pacify the enemy”).</p>'
	}

	var clean = wordData.Definition.replace(/<[^>]+>/g, '');

	var box = makeBox(clean.length > 250 ? 2 : 1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4DC;<a href="https://www.merriam-webster.com/word-of-the-day">Word of the Day</a>')
	box = box
		.append('div')
		.attr('class', 'inside');	
	var inside = box
		.append('div');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.append('a')
		.attr('href', 'https://www.merriam-webster.com/dictionary/' + wordData.Word)
		.text(wordData.Word);
	inside
		.append('div')
		.style('padding', '5px')
		.html(wordData.Definition);	
});

//////////////////////////////////////////////////

modules.push(function twitter() {
	var html =  '<table><tr><td style="text-align: right">1</td><td><a href="https://twitter.com/search?q=%23ScaredOfTheDark">#ScaredOfTheDark</a></td></tr><tr><td style="text-align: right">2</td><td><a href="https://twitter.com/search?q=Lakers">Lakers</a></td></tr><tr><td style="text-align: right">3</td><td><a href="https://twitter.com/search?q=%23RBCHeritage">#RBCHeritage</a></td></tr><tr><td style="text-align: right">4</td><td><a href="https://twitter.com/search?q=Reaves">Reaves</a></td></tr><tr><td style="text-align: right">5</td><td><a href="https://twitter.com/search?q=%23TheHuntforRaoulMoat">#TheHuntforRaoulMoat</a></td></tr></table>';
	var title = 'United Kingdom';
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F426;<a href="https://twitter.com/explore/tabs/trending">Twitter Trending</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.style('text-align', 'center')
		.html(title);
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function twitter() {
	var html =  '<table><tr><td style="text-align: right">1</td><td><a href="https://twitter.com/search?q=Lakers">Lakers</a></td></tr><tr><td style="text-align: right">2</td><td><a href="https://twitter.com/search?q=%22Austin+Reaves%22">Austin Reaves</a></td></tr><tr><td style="text-align: right">3</td><td><a href="https://twitter.com/search?q=Reaves">Reaves</a></td></tr><tr><td style="text-align: right">4</td><td><a href="https://twitter.com/search?q=%23LakeShow">#LakeShow</a></td></tr><tr><td style="text-align: right">5</td><td><a href="https://twitter.com/search?q=Giannis">Giannis</a></td></tr></table>';
	var title = 'United States';
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F426;<a href="https://twitter.com/explore/tabs/trending">Twitter Trending</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.style('text-align', 'center')
		.html(title);
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function astronauts() {
	var astronautsData = {
		Amount:      '10',
		CountryHtml: '<table><tr><td><img class="flag ttt" data-tt="usa" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-usa.jpg" /></td><td><img class="flag ttt" data-tt="russia" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-russia.jpg" /></td><td><img class="flag ttt" data-tt="china" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-china.jpg" /></td><td><img class="flag ttt" data-tt="germany" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-germany.jpg" /></td></tr><tr style="vertical-align:top"><td>3</td><td>3</td><td>3</td><td>1</td></tr></table>'
	};

	var box = makeBox(1, 1);	
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F469;&#x200D;&#x1F680;<a href="https://www.howmanypeopleareinspacerightnow.com/">Astronauts</a>')
	box = box
		.append('div')
		.attr('class', 'inside')
		.append('div')
		.html("<p style='font-size:200%;font-weight:bold'>" + astronautsData.Amount + "</p><p>people are in space now.</p><p>&nbsp;</p>" + astronautsData.CountryHtml)
});

//////////////////////////////////////////////////



			createPage();

		</script>
	</body>
</html>