<!DOCTYPE html>
<html lang="en">
	<head>
		<title>00:22 6-May - Ephemeral</title>		
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="https://d3js.org/d3.v3.min.js"></script>
		<meta http-equiv="refresh" content="1800">
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik&display=swap"> 		
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;500&display=swap"> 	
		<link rel="stylesheet" type="text/css" href="style.css" />
	</head>
	<body>
		<div id="container">
		</div>
		<div id="tt" style="display: none">
			<p id="tooltip_text"></p>
		</div>
		<div id="cls">&nbsp;</div>
		<script>

////////////////////////////////////////////////// tooltips

            var tooltip = d3.select('#tt');
            var tt = d3.select('#tt');

            function setTooltip(value) {
				d3.select('#tooltip_text').html(value);
            }

            function createTooltipTriggers() {
                d3.selectAll('.ttt')
                    .on("mouseover", function (d, i) {
                        setTooltip(d3.selectAll('.ttt')[0][i].attributes['data-tt'].value);
                    })
                    .on("mouseout", function () {
                        tt.style('display', 'none');
                    })
					.on("mousemove", function () {
                        if (x <= 0 || y <= 0) {
                            tt.style('display', 'none');
                        } else {
                            tt.style('display', null);
                        }
                        var x = d3.event.pageX - (tt.node().getBoundingClientRect().width / 2);
                        var y = d3.event.pageY - (tt.node().getBoundingClientRect().height + 5);
                        tt.style('left', ~~x + 'px');
                        tt.style('top', ~~y + 'px');

                    });
			}

////////////////////////////////////////////////// charts

            function map(n, a, b, y, z) {
                return (n - a) * (z - y) / (b - a) + y;
			}

			function createLineChart(width, height, element, data, boundary = 0) {
                var svg = element
                    .append('svg')
                    .attr('width', width + 'px')
                    .attr('height', height + 'px');

                var start = Math.min(...data.map(a => a.number));
				var end = Math.max(...data.map(a => a.number));

				switch (boundary) {
					case 1:
						var distance = (end - start) * 0.1;
						start -= distance;
						start = Math.max(0, start);
						end += distance;
						break;
					case 2:
						start = 0;
						break;
				}

				var xs = [];
				var ys = [];

                for (var i = 1; i <= data.length; i++) {
                    var x1 = map(i - 1, 0, data.length - 1, 3, width - 3);
					var y1 = map(data[i - 1].number, start, end, height, 6);
					xs.push(x1);
					ys.push(y1);
				}

				var area = d3.svg.area()
					.interpolate('cardinal')
					.x(function (d, i) { return xs[i] })
					.y0(function (d, i) { return height })
					.y1(function (d, i) { return ys[i] });

				svg
					.append('path')
                    .datum(d3.range(data.length).map(function(d, i) { return i }))
					.attr("d", area)
					.attr('fill', '#eee');

                var line = d3.svg.line()
                    .interpolate('cardinal')
                    .x(function (d, i) { return xs[i] })
                    .y(function (d, i) { return ys[i] });

                svg
                    .append('path')
                    .datum(d3.range(data.length).map(function (d, i) { return i }))
                    .attr("d", line)
					.attr('fill', 'transparent')
					.style('stroke-width', 2)
					.style('stroke', '#bbb');

				for (var i = 1; i <= data.length; i++) {
					var x1 = map(i - 1, 0, data.length - 1, 3, width - 3);
                    var x2 = map(i, 0, data.length - 1, 3, width - 3);
                    var y1 = map(data[i - 1].number, start, end, height, 6);
                    var g = svg
                        .append('g')
                        .attr('class', 'group');
                    g
						.append('circle')
						.attr('class', 'highlight')
                        .attr('cx', x1)
                        .attr('cy', y1 - 0.5)
                        .attr('r', 1)
						.attr('title', data[i - 1].number);
					g
						.append('rect')
						.attr('class', 'ttt')
						.attr('width', x2 - x1)
						.attr('height', height)
						.attr('x', (x1) - ((x2 - x1) / 2))
						.attr('y', 0)
						.attr('data-tt', data[i - 1].tooltip)
						.attr('style', 'fill:transparent');
                    /*g
                        .append('circle')
                        .attr('class', 'ttt')
                        .attr('cx', x1)
                        .attr('cy', y1 - 0.5)
                        .attr('r', 4)
                        .attr('opacity', '0.01')
                        .attr('z-index', 1000)
                        .attr('data-tt', data[i - 1].tooltip);*/
				}

                svg
                    .append('line')
                    .attr('x1', 3)
                    .attr('y1', height)
                    .attr('x2', width - 3)
                    .attr('y2', height)
                    .style('stroke-width', 2)
                    .style('stroke', '#bbb');
            }

////////////////////////////////////////////////// page
					
			var inside = 210;
			var padding = 8;
			var length = padding + inside + padding;
			var columns;
			var offsetX;
			var offsetY;
			var filled = [,];
			var low = 0;
			var modules = [];
								
			function random(start, end) {
				return start + Math.floor(Math.random() * (end - start));
			}
			
			function makeBox(width, height) {			
				var startX = 0, startY = 0;
				var hasLocation = false;
				for (var a = 0; a + height < filled.length && !hasLocation; a++) {
					for (var b = 0; b + width <= columns && !hasLocation; b++) {					
						var isValid = true;
						for (var c = 0; c < height && isValid; c++) {
							for (var d = 0; d < width && isValid; d++) {
								if (filled[a + c][b + d] > 0) {
									isValid = false;
								}
							}
						}
						if (isValid) {
							hasLocation = true;							
							startX = b;
							startY = a;
						}						
					}
				}				
				if (hasLocation) {
					for (var c = startY; c < startY + height && isValid; c++) {
						for (var d = startX; d < startX + width && isValid; d++) {
							filled[c][d] = 1;
						}
					}
					low = Math.max(low, offsetY + (startY * length) + ((height * length) - (padding * 2)));				
					return d3
						.select('#container')
						.append('div')
						.attr('class', 'box')
						.style('top', offsetY + startY * length + 'px')
						.style('left', offsetX + startX * length + 'px')						
						.style('width', ((width * length) - (padding * 2)) + 'px')
						.style('height', ((height * length) - (padding * 2)) + 'px');
				}
			}
			
			function createPage() {
				low = 0;
				d3.selectAll('.box').remove();
				var docWidth = document.body.clientWidth;		
				columns = ~~((docWidth - 20) / length);
				columns = Math.min(7, columns);
				offsetX = ((docWidth - (columns * length)) / 2) + 5;				
				offsetY = 100;
				for (var a = 0; a < 50; a++) {
					filled[a] = new Array(columns);
					for (var b = 0; b < columns; b++) {
						filled[a][b] = 0;
					}
				}
				for (var func of modules) {
					func();
				}
				d3
					.select('#cls')
					.style('top', (low) + 'px')
					.style('height', ((padding * 2) + offsetY) + 'px');
				createTooltipTriggers();
			}
			
			d3.select(window).on('resize', createPage);

////////////////////////////////////////////////// boxes
			
modules.push(function bbcCombine() {
	var html = '<table style="margin:0 10px"><tr><td style="vertical-align:top"><b>UK</b><br/><ul><li class="ttt" data-tt="<b>Local elections 2023: Labour eyes power after crushing Tory losses</b><br/>Labour claims it is on track for power, after the Tories lose more than 1,000 councillors in local elections across England." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/uk-politics-65503082?at_medium=RSS&amp;at_campaign=KARANGA">Local elections 2023: Labour eyes power after crushing Tory losses</a></li><li class="ttt" data-tt="<b>UK counts down to King\'s historic coronation</b><br/>People across the UK and beyond are preparing to celebrate the coronation of King Charles III."><a href="https://www.bbc.co.uk/news/uk-65502234?at_medium=RSS&amp;at_campaign=KARANGA">UK counts down to King\'s historic coronation</a></li><li class="ttt" data-tt="<b>Local elections 2023: Voters express anger at ID rule changes</b><br/>Some would-be voters complain about being turned away from polling stations as new rules applied."><a href="https://www.bbc.co.uk/news/uk-65492275?at_medium=RSS&amp;at_campaign=KARANGA">Local elections 2023: Voters express anger at ID rule changes</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/uk-politics-65503082?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/14015/production/_129614918_gettyimages-1252658863-594x594.jpg" class="ttt" data-tt="Labour leader Sir Keir Starmer" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>US & Canada</b><br/><ul><li class="ttt" data-tt="<b>Donald Trump deposition: New York court releases video in civil rape trial</b><br/>The video shows Donald Trump mistaking his accuser E Jean Carroll for his ex-wife in a photo." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/world-us-canada-65504435?at_medium=RSS&amp;at_campaign=KARANGA">Donald Trump deposition: New York court releases video in civil rape trial</a></li><li class="ttt" data-tt="<b>Richard Glossip: US Supreme Court halt\'s man\'s fourth execution attempt</b><br/>Richard Glossip has escaped three execution attempts before and lived through nine execution dates."><a href="https://www.bbc.co.uk/news/world-us-canada-65505067?at_medium=RSS&amp;at_campaign=KARANGA">Richard Glossip: US Supreme Court halt\'s man\'s fourth execution attempt</a></li><li class="ttt" data-tt="<b>Unionised US Apple Store proposes asking for tips</b><br/>The backlash to the proposal has been swift with many complaining of &quot;tipping fatigue&quot; in America."><a href="https://www.bbc.co.uk/news/65503170?at_medium=RSS&amp;at_campaign=KARANGA">Unionised US Apple Store proposes asking for tips</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/world-us-canada-65504435?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/8F85/production/_129614763_ca27268b-5563-4c66-913b-d9baac3c56f2.png" class="ttt" data-tt="Donald Trump sat for the deposition in October 2022" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>World</b><br/><ul><li class="ttt" data-tt="<b>Yevgeny Prigozhin: Wagner Group boss says he will pull fighters out of Bakhmut</b><br/>Yevgeny Prigozhin poses among dead mercenaries, blaming defence officials for lack of ammunition." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/world-europe-65493008?at_medium=RSS&amp;at_campaign=KARANGA">Yevgeny Prigozhin: Wagner Group boss says he will pull fighters out of Bakhmut</a></li><li class="ttt" data-tt="<b>Serbian mass shootings: President vows crackdown on gun ownership</b><br/>The president\'s promise comes after two mass shootings within 48 hours killed 17 people."><a href="https://www.bbc.co.uk/news/world-europe-65500203?at_medium=RSS&amp;at_campaign=KARANGA">Serbian mass shootings: President vows crackdown on gun ownership</a></li><li class="ttt" data-tt="<b>Covid global health emergency is over, WHO says</b><br/>Close to 20 million people are likely to have died during the last three years, says the WHO."><a href="https://www.bbc.co.uk/news/health-65499929?at_medium=RSS&amp;at_campaign=KARANGA">Covid global health emergency is over, WHO says</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/world-europe-65493008?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/11526/production/_129605907_angryprigozhin.jpg" class="ttt" data-tt="Yevgeny Prigozhin" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>Formula 1</b><br/><ul><li class="ttt" data-tt="<b>Miami Grand Prix: World champion Max Verstappen sets rapid pace in second practice</b><br/>Max Verstappen sets imposing pace in Friday practice at the Miami Grand Prix as he heads the Ferraris of Carlos Sainz and Charles Leclerc." style="font-weight:bold"><a href="https://www.bbc.co.uk/sport/formula1/65504543?at_medium=RSS&amp;at_campaign=KARANGA">Miami Grand Prix: World champion Max Verstappen sets rapid pace in second p...</a></li><li class="ttt" data-tt="<b>F1 Miami Grand Prix 2023 practice, qualifying and race start times</b><br/>Round five of the 2023 Formula 1 season is in Miami - listen to BBC radio commentary and follow live text updates."><a href="https://www.bbc.co.uk/sport/formula1/64978906?at_medium=RSS&amp;at_campaign=KARANGA">F1 Miami Grand Prix 2023 practice, qualifying and race start times</a></li><li class="ttt" data-tt="<b>Miami Grand Prix: George Russell leads Mercedes one-two in opening practice</b><br/>George Russell leads Lewis Hamilton to a Mercedes one-two with Red Bull\'s Max Verstappen only fourth in first practice at the Miami Grand Prix."><a href="https://www.bbc.co.uk/sport/formula1/65504517?at_medium=RSS&amp;at_campaign=KARANGA">Miami Grand Prix: George Russell leads Mercedes one-two in opening practice</a></li></ul></td><td><a href="https://www.bbc.co.uk/sport/formula1/65504543?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/live-experience/cps/624/cpsprodpb/176C5/production/_129614959_tv084375781.jpg"  style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr><tr><td style="vertical-align:top"><b>Technology</b><br/><ul><li class="ttt" data-tt="<b>Ex-Uber security chief sentenced over covering up hack</b><br/>Joseph Sullivan was convicted over covering up a security breach of 57 million user accounts in 2016." style="font-weight:bold"><a href="https://www.bbc.co.uk/news/technology-65497186?at_medium=RSS&amp;at_campaign=KARANGA">Ex-Uber security chief sentenced over covering up hack</a></li><li class="ttt" data-tt="<b>Banks warn of big increase in online scams</b><br/>Barclays said 77% of scams are now happening on social media, online marketplaces and dating apps."><a href="https://www.bbc.co.uk/news/technology-65486219?at_medium=RSS&amp;at_campaign=KARANGA">Banks warn of big increase in online scams</a></li><li class="ttt" data-tt="<b>TikTok tracked UK journalist via her cat\'s account</b><br/>London-based reporter Cristina Criddle says it was &quot;chilling&quot; to learn her data had been accessed."><a href="https://www.bbc.co.uk/news/technology-65126056?at_medium=RSS&amp;at_campaign=KARANGA">TikTok tracked UK journalist via her cat\'s account</a></li></ul></td><td><a href="https://www.bbc.co.uk/news/technology-65497186?at_medium=RSS&amp;at_campaign=KARANGA"><img src="https://ichef.bbci.co.uk/news/1024/branded_news/12585/production/_129614157_ubser-index-getty.jpg" class="ttt" data-tt="People walk past the office building where Uber headquarters are located on Market Street in San Francisco, Calif. on Wednesday, April 24, 2019" style="height:auto;width:auto;max-height:125px;max-width:125px;"/></a></td></tr></table>';
	var box = makeBox(3, 2);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4F0;<a href="https://www.bbc.co.uk/news">BBC News</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function weather() {
    var weatherLocation = "11609021";

    var data={"copyright":"Contents are strictly for use by timeanddate.com","units":{"temp":"°C","prec":"mm","wind":"mph","baro":"mbar"},"detail":[{"hl":true,"hls":"1 May – 7 May","date":16833312E5,"ts":"Sat, 6","ds":"Sat, 6 May","icon":7,"desc":"Overcast.","temp":14,"templow":9,"cf":11,"wind":11,"wd":150,"hum":89,"pc":69,"rain":2.2 },{"date":16834176E5,"ts":"Sun, 7","ds":"Sun, 7 May","icon":33,"desc":"Passing showers. Cloudy.","temp":16,"templow":10,"cf":16,"wind":9,"wd":240,"hum":75,"pc":58,"rain":0.9 },{"hl":true,"hls":"8 May – 14 May","date":1683504E6,"ts":"Mon, 8","ds":"Mon, 8 May","icon":33,"desc":"Passing showers. Cloudy.","temp":15,"templow":11,"cf":12,"wind":13,"wd":200,"hum":98,"pc":76,"rain":8.1 },{"date":16835904E5,"ts":"Tue, 9","ds":"Tue, 9 May","icon":7,"desc":"Cloudy.","temp":15,"templow":10,"cf":14,"wind":6,"wd":320,"hum":69,"pc":6},{"date":16836768E5,"ts":"Wed, 10","ds":"Wed, 10 May","icon":33,"desc":"Passing showers. Cloudy.","temp":13,"templow":8,"cf":11,"wind":9,"wd":310,"hum":80,"pc":63,"rain":2.6 },{"date":16837632E5,"ts":"Thu, 11","ds":"Thu, 11 May","icon":33,"desc":"Passing showers. Scattered clouds.","temp":15,"templow":9,"cf":13,"wind":13,"wd":320,"hum":75,"pc":46,"rain":0.4 },{"date":16838496E5,"ts":"Fri, 12","ds":"Fri, 12 May","icon":4,"desc":"Partly cloudy.","temp":17,"templow":8,"cf":17,"wind":2,"wd":330,"hum":58,"pc":6},{"date":1683936E6,"ts":"Sat, 13","ds":"Sat, 13 May","icon":6,"desc":"Mostly cloudy.","temp":18,"templow":10,"cf":18,"wind":10,"wd":250,"hum":73,"pc":59,"rain":1.3 },{"date":16840224E5,"ts":"Sun, 14","ds":"Sun, 14 May","icon":4,"desc":"Partly cloudy.","temp":16,"templow":9,"cf":16,"wind":13,"wd":320,"hum":59,"pc":7},{"hl":true,"hls":"15 May – 21 May","date":16841088E5,"ts":"Mon, 15","ds":"Mon, 15 May","icon":4,"desc":"Afternoon clouds.","temp":17,"templow":7,"cf":17,"wind":12,"wd":320,"hum":57,"pc":6},{"date":16841952E5,"ts":"Tue, 16","ds":"Tue, 16 May","icon":21,"desc":"Isolated tstorms. Overcast.","temp":17,"templow":7,"cf":17,"wind":5,"wd":30,"hum":60,"pc":53,"rain":1.2 },{"date":16842816E5,"ts":"Wed, 17","ds":"Wed, 17 May","icon":21,"desc":"Isolated tstorms. Cloudy.","temp":16,"templow":8,"cf":15,"wind":7,"wd":270,"hum":75,"pc":53,"rain":2.1 },{"date":1684368E6,"ts":"Thu, 18","ds":"Thu, 18 May","icon":2,"desc":"Scattered clouds.","temp":16,"templow":8,"cf":16,"wind":9,"wd":300,"hum":55,"pc":6},{"date":16844544E5,"ts":"Fri, 19","ds":"Fri, 19 May","icon":33,"desc":"Passing showers. Overcast.","temp":15,"templow":8,"cf":14,"wind":11,"wd":220,"hum":86,"pc":60,"rain":0.4 },{"date":16845408E5,"ts":"Sat, 20","ds":"Sat, 20 May","icon":2,"desc":"Decreasing cloudiness.","temp":15,"templow":8,"cf":13,"wind":21,"wd":200,"hum":89,"pc":6}],"grid":{"temp":{"low":7,"high":18,"range":11},"prec":{"high":8.1},"time":86400000,"sections":15},"conv":{"prec":{"offset":0,"scale":1},"temp":{"offset":0,"scale":1},"wind":{"offset":0,"scale":0.869},"baro":{"offset":0,"scale":1}}};


    var box = makeBox(2, 2);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#127746;<a href="https://www.timeanddate.com/weather/@' + weatherLocation + '/ext">Weather</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div');
    var table = inside
        .append('table');

    for (var day of data.detail.slice(0, 7)) {
        var row = table
            .append('tr');
        row
            .append('td')
            .style('text-align', 'right')
            .style('font-weight', 'bold')
            .html(day.ds.split(',')[0] + ':&nbsp;');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html(day.templow + '&#xb0;');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html('to');
        row
            .append('td')
            .style('text-align', 'right')
            .attr('class', 'code')
            .html(day.temp + '&#xb0;');
        row
            .append('td')
            .style('text-align', 'center')
            .append('img')
            .attr('src', 'https://c.tadst.com/gfx/w/svg/wt-' + day.icon + '.svg')
            .attr('width', '32px')
            .attr('height', '32px');
        row
            .append('td')
            .style('text-align', 'left')
            .html(day.desc)
    }
});

//////////////////////////////////////////////////

modules.push(function astronomy() {
	var imageData = {
		Source:    'https://apod.nasa.gov/apod/image/2305/shackleton_arrow.png',
		Title:     'Shackleton from ShadowCam',
		LinkImage: 'https://apod.nasa.gov/apod/image/2305/shackleton_arrow.png',
		LinkPage:  'https://apod.nasa.gov/apod/ap230505.html'
	}

	if (!imageData.Source.endsWith('/')) {
		var box = makeBox(2, 2);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x1F680;<a href="https://apod.nasa.gov/apod/astropix.html">Astronomy Picture of the Day</a>')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', imageData.LinkImage)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', imageData.Source);
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', imageData.LinkPage)
			.html(imageData.Title);
	}
});

//////////////////////////////////////////////////

modules.push(function nature() {
	var natureData = {
		Source:   'https://cdn2.outdoorphotographer.com/2023/05/Farewell-to-the-Kings-Robert-Henderson.jpeg',
		Title:    'Farewell to the Kings Robert Henderson',
		LinkPage: 'https://www.outdoorphotographer.com/blog/photo-of-the-day-by-robert-henderson-17/'
	}

	if (natureData.Source.length > 0) {
		var box = makeBox(2, 2);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x26FA;<a href="https://www.outdoorphotographer.com/blog/category/photo-of-the-day/">Outdoor Photo of the Day</a>')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', natureData.Source)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', natureData.Source);
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', natureData.LinkPage)
			.html(natureData.Title);
	}
});

//////////////////////////////////////////////////

modules.push(function wikipedia() {
	var pictureData = {
		Source:   'http://upload.wikimedia.org/wikipedia/commons/thumb/1/17/Dudley_Hardy_-_Poster_for_His_Majesty.jpg/300px-Dudley_Hardy_-_Poster_for_His_Majesty.jpg',
		Title:    'His Majesty (opera)',
		LinkPage: 'https://en.wikipedia.org/wiki//wiki/His_Majesty_(opera)',
		Description: '    <i><b><a href="/wiki/His_Majesty_(opera)" title="His Majesty (opera)">His Majesty</a></b></i> is an 1897 <a href="/wiki/Comic_opera" title="Comic opera">comic opera</a> with dialogue by <a href="/wiki/F._C._Burnand" title="F. C. Burnand">F.&#160;C. Burnand</a>, lyrics by <a href="/wiki/R._C._Lehmann" title="R. C. Lehmann">R.&#160;C. Lehmann</a>, additional lyrics by <a href="/wiki/Adrian_Ross" title="Adrian Ross">Adrian Ross</a>, and music by <a href="/wiki/Alexander_Mackenzie_(composer)" title="Alexander Mackenzie (composer)">Alexander Mackenzie</a>. The work premiered at the <a href="/wiki/Savoy_Theatre" title="Savoy Theatre">Savoy Theatre</a> in London on 20&#160;February 1897, running for only 61 performances until 24&#160;April, despite a strong cast including <a href="/wiki/George_Grossmith" title="George Grossmith">George Grossmith</a>, <a href="/wiki/Ilka_P%C3%A1lmay" title="Ilka Pálmay">Ilka Pálmay</a>, <a href="/wiki/Scott_Russell_(tenor)" title="Scott Russell (tenor)">Scott Russell</a>, <a href="/wiki/Fred_Billington" title="Fred Billington">Fred Billington</a>, <a href="/wiki/Florence_Perry" title="Florence Perry">Florence Perry</a> and <a href="/wiki/Walter_Passmore" title="Walter Passmore">Walter Passmore</a>.  The <a href="/wiki/D%27Oyly_Carte_Opera_Company" title="D&#39;Oyly Carte Opera Company">D\'Oyly Carte Opera Company</a> then toured the opera throughout 1897 alongside more familiar <a href="/wiki/Gilbert_and_Sullivan" title="Gilbert and Sullivan">Gilbert and Sullivan</a> works. This poster for <i>His Majesty</i> was designed by <a href="/wiki/Dudley_Hardy" title="Dudley Hardy">Dudley Hardy</a> to advertise the original D\'Oyly Carte production, or the tour immediately following.<small style="display: block; margin-top: 0.8em;">Poster credit: <a href="/wiki/Dudley_Hardy" title="Dudley Hardy">Dudley Hardy</a>; restored by <a href="/wiki/User:Adam_Cuerden" title="User:Adam Cuerden">Adam Cuerden</a></small>'
	}

	if (pictureData.Source.length > 0) {
		var box = makeBox(2, 3);
		box
			.append('div')
			.attr('class', 'title')
			.html('&#x1F9E9;Wikipedia Picture of the Day')
		box = box
			.append('div')
			.attr('class', 'inside');
		var inside = box
			.append('div');
		inside
			.append('p')
			.append('a')
			.attr('href', pictureData.Source)
			.append('img')
			.style('width', 'auto')
			.style('height', 'auto')
			.style('max-width', '400px')
			.style('max-height', '320px')
			.attr('src', pictureData.Source);
		/*
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.append('a')
			.attr('href', pictureData.LinkPage)
			.html(pictureData.Title);
		*/
		inside
			.append('p')
			.html('&nbsp;');
		inside
			.append('p')
			.style('overflow', 'hidden')
			.style('margin', '5px')
			.style('display', '-webkit-box')
			.style('-webkit-line-clamp', '6')
			.style('-webkit-box-orient', 'vertical')
			.html(pictureData.Description);
	}
});

//////////////////////////////////////////////////

modules.push(function tv() {

    var tvData = [{"channelid":505,"offset":1,"event":""},{"channelid":700,"offset":1,"event":[{"name":"This is BBC Two","description":"Highlights of programmes on BBC Two. [HD]","startTime":1683341400,"duration":10500,"svcId":700,"evtId":6637,"image":"\/ms\/img\/epg\/rb\/8df1-p0bvs8dg.jpg","hasTstv":false},{"name":"Hey Duggee","description":"The Taste Badge. Duggee is making a smoothie, and the Squirrels can\u0027t agree on whether it\u0027s yummy or not. [S] [HD]","startTime":1683351900,"duration":600,"svcId":700,"evtId":6645,"image":"\/ms\/img\/epg\/rb\/8df1-p08gnbk7.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1624976880,"availabilityEnd":1748660400,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m000k4xh\u0026ui_id=4.0.0"},"seriesNo":3,"episodeNo":23},{"name":"Hey Duggee","description":"The Biology Badge. Duggee and the Squirrels hop inside the Biology Bus and miniaturise themselves to go on a voyage of discovery inside Enid. Can they find out what\u0027s making her cough? [S] [HD]","startTime":1683352500,"duration":300,"svcId":700,"evtId":6646,"image":"\/ms\/img\/epg\/rb\/8df1-p08gn632.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1661349600,"availabilityEnd":1748660400,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m000k5tx\u0026ui_id=4.0.0"},"seriesNo":3,"episodeNo":24},{"name":"Supertato","description":"The Good, the Bad and the Prickly. Prickly Pear arrives in the supermarket and wants Evil Pea\u0027s freezer for his new home. [S,AD] [HD]","startTime":1683352800,"duration":600,"svcId":700,"evtId":6647,"image":"\/ms\/img\/epg\/rb\/8df1-p0dssq6b.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1673236800,"availabilityEnd":1823655600,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m001gzvp\u0026ui_id=4.0.0"},"seriesNo":1,"episodeNo":17},{"name":"Shaun the Sheep","description":"A Prickly Problem. Animated Series. Timmy decides to help the hedgehogs find a resting place for the night. However, his efforts lead his weary friends into a series a scrapes. [S] [HD]","startTime":1683353400,"duration":300,"svcId":700,"evtId":6648,"image":"\/ms\/img\/epg\/rb\/8df1-p04dv6g0.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1617246000,"availabilityEnd":1743390000,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=b082wff5\u0026ui_id=4.0.0"},"seriesNo":5,"episodeNo":12},{"name":"Dennis \u0026 Gnasher Unleashed!","description":"Blamjitsu Sensei. Convinced that Mrs Creecher is secretly a master of Blamjitsu, JJ persuades the gang to help trick her into revealing her blam credentials. [S] [HD]","startTime":1683353700,"duration":900,"svcId":700,"evtId":6649,"image":"\/ms\/img\/epg\/rb\/8df1-p08jzn2b.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1680231600,"availabilityEnd":1751252400,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m000kxr4\u0026ui_id=4.0.0"},"seriesNo":2,"episodeNo":5},{"name":"The Coronation of TM The King...","description":"...and Queen Camilla. Follow every moment of a special day in British history as Charles III is crowned King. [S,SL] [HD]","startTime":1683354600,"duration":27000,"svcId":700,"evtId":6650,"image":"\/ms\/img\/epg\/rb\/8df1-p0flnhdd.jpg","hasTstv":false},{"name":"Victoria Falls - The Smoke That...","description":"...Thunders. 2\/14. Wildlife documentary. A tale of life on the Zambezi River, set against the epic backdrop of Victoria Falls. The story is told from the point of view of a local fisherman. [S] [HD]","startTime":1683381600,"duration":3000,"svcId":700,"evtId":6653,"image":"\/ms\/img\/epg\/rb\/8df1-p0flmx08.jpg","hasTstv":false,"seriesNo":30,"episodeNo":2},{"name":"Flog It!","description":"Paul Martin opens the gates at London Zoo to the lucky locals laden with antiques. The animals have front row seats as Will Axon and Thomas Plant do their valuations. [S] [HD]","startTime":1683384600,"duration":1800,"svcId":700,"evtId":6654,"image":"\/ms\/img\/epg\/rb\/8df1-p0483s0c.jpg","hasTstv":false,"seriesNo":11,"episodeNo":7},{"name":"Pride and Prejudice","description":"Romantic drama. Worried about what is to become of her five unmarried daughters, Mrs Bennet believes she may found an answer when a wealthy bachelor becomes their neighbour. [2005] [S,AD] [HD]","startTime":1683386400,"duration":7200,"svcId":700,"evtId":6655,"image":"\/ms\/img\/epg\/rb\/8df1-p09qmb8d.jpg","hasTstv":false},{"name":"Richard Osman\u0027s House of Games","description":"45\/140. Matt Edmondson, Sabrina Grant, Andy Hamilton and Kirsty Wark test their general knowledge skills on this week\u0027s House of Games. [S] [HD]","startTime":1683393600,"duration":1800,"svcId":700,"evtId":6656,"image":"\/ms\/img\/epg\/rb\/8df1-p09xz9h0.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1634319000,"availabilityEnd":1665855000,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=m0010lcs\u0026ui_id=4.0.0"},"seriesNo":5,"episodeNo":45},{"name":"Edward Scissorhands","description":"Edward, an artificial human being who has remained unfinished since his creator suddenly died, leaving him with scissors for hands, is discovered by a kindly suburban housewife. [1990] [S] [HD]","startTime":1683395400,"duration":6000,"svcId":700,"evtId":6657,"image":"\/ms\/img\/epg\/rb\/8df1-p0dm411m.jpg","hasTstv":false},{"name":"Lionel Richie at the BBC","description":"A selection of Lionel Richie\u0027s greatest moments from the BBC archives, from his first TOTP appearance with The Commodores in 1979 to his 2009 concert at the Maida Vale studios. [S]","startTime":1683401400,"duration":3600,"svcId":700,"evtId":6658,"image":"\/ms\/img\/epg\/rb\/8df1-p0bmq8cj.jpg","hasTstv":false},{"name":"Sounds of Liverpool at the BBC","description":"A look into the BBC\u0027s archives for a selection of performances from some of Merseyside\u0027s biggest and best-loved musical stars. [S] [HD]","startTime":1683405000,"duration":5400,"svcId":700,"evtId":6659,"image":"\/ms\/img\/epg\/rb\/8df1-p0flg6wq.jpg","hasTstv":false},{"name":"ABBA at the BBC","description":"A compilation of ABBA\u0027s greatest performances at the BBC, including Waterloo, Dancing Queen, Does Your Mother Know, Thank You for the Music, SOS, Fernando, Chiquitita and more. [S]","startTime":1683410400,"duration":3600,"svcId":700,"evtId":6660,"image":"\/ms\/img\/epg\/rb\/8df1-p0b2y3bb.jpg","hasTstv":true,"tstv":{"sid":919,"availabilityStart":1621328400,"availabilityEnd":1936688340,"mediaAvailable":true,"mediaLocation":"channel=919\u0026programmeid=b03lyzpr\u0026ui_id=4.0.0"}},{"name":"The Joy of ABBA","description":"Documentary which explores how ABBA, between 1974 and 1982, raised the bar for pop music as an art form and made people fall in love with the sound of Swedish melancholy. [S]","startTime":1683414000,"duration":3600,"svcId":700,"evtId":6661,"image":"\/ms\/img\/epg\/rb\/8df1-p0b3sp4v.jpg","hasTstv":false},{"name":"La Belle \u00c9poque","description":"A disillusioned cartoonist is offered a new immersive experience by his film director son. Contains some strong language, some sexual content and some upsetting sc... [2019] [S] [HD]","startTime":1683417600,"duration":6900,"svcId":700,"evtId":6662,"image":"\/ms\/img\/chan\/BBCTwoHD-App-Placeholder-1280x720.jpg","hasTstv":false},{"name":"Coronation Tailors: Fit for a King","description":"The Great British Sewing Bee\u0027s Patrick Grant goes behind the scenes at the family business creating thousands of bespoke ceremonial uniforms in time for the coronation. [S,AD] [HD]","startTime":1683424500,"duration":3600,"svcId":700,"evtId":6663,"image":"\/ms\/img\/epg\/rb\/8df1-p0fkdwzm.jpg","hasTstv":false},{"name":"This is BBC Two","description":"Highlights of programmes on BBC Two. [HD]","startTime":1683428100,"duration":9300,"svcId":700,"evtId":6664,"image":"\/ms\/img\/epg\/rb\/8df1-p0bvs8dg.jpg","hasTstv":false}]},{"channelid":1500,"offset":1,"event":""}];

    var box = makeBox(2, 3);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#x1F4FA;<a href="https://www.freesat.co.uk/tv-guide">TV</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div')
        .style('text-align', 'left');

    var channels = { 505: "BBC 1", 700: "BBC 2", 1500: "Channel 4" };

    var today = new Date();
    var primeTime = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 18, 0, 0);
    var unixStart = (+primeTime) / 1000;
    var unixEnd = unixStart + 60 * 60 * 6;
    var first = true;

    for (var channel of tvData) {
        if (!first) {
            first = false;
        } else {
            inside
                .append('br');
        }

        inside
            .append('p')
            .append('b')
            .text(channels[channel.channelid]);
        var list = inside
            .append('ul');
        for (var event of channel.event) {
            console.log(event);
            if (+event.startTime >= unixStart && +event.startTime < unixEnd) {
                list
                    .append('li')
                    .attr('class', 'ttt')
                    .attr('data-tt', '<img src=\"https://fdp-sv15-image-v1-0.gcprod1.freetime-platform.net/270x180-0' + event.image + '\" /><br/><b>' + event.name + '</b><br/>' + (+event.duration / 60) + ' minutes<br/>' + event.description)
                    .html('<span class="code">' + new Date(+event.startTime * 1000).toLocaleTimeString('en-GB').substr(0, 5) + "</span> - " + event.name);
            }
        }
    }
});

//////////////////////////////////////////////////

modules.push(function backlog() {
	var box = makeBox(1, 2);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4CB;Backlog')
	var table = box
		.append('div')
		.attr('class', 'inside')
		.append('table')
		.style('text-align', 'right');

	var row = table
		.append('tr');
	row
		.append('td')
		.text("Audiobooks:");
	row
		.append('td')
		.text('12')

	row = table
		.append('tr');
	row
		.append('td')
		.text("Books:");
	row
		.append('td')
		.text('14');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Films:");
	row
		.append('td')
		.text('362');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Games:");
	row
		.append('td')
		.text('12');

	row = table
		.append('tr');
	row
		.append('td')
		.text("TV:");
	row
		.append('td')
		.text('177');

	row = table
		.append('tr');
	row
		.append('td')
		.text("YouTube:");
	row
		.append('td')
		.text('3');

	row = table
		.append('tr');
	row
		.append('td')
		.html('&nbsp;');
	row
		.append('td')
		.html('&nbsp;');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Downloaded Files:");
	row
		.append('td')
		.text('9');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Steam Wishlist:");
	row
		.append('td')
		.text('63');

	row = table
		.append('tr');
	row
		.append('td')
		.text("Work Inbox:");
	row
		.append('td')
		.text('2');
});

//////////////////////////////////////////////////

modules.push(function youtube() {

    var data = [
{ id: '67BEFuivyYc', title: "ANDONSTAR Digital Microscope \u0026 the SONY SRF-M35 Walkman Repair", label: "ANDONSTAR Digital Microscope \u0026 the SONY SRF-M35 Walkman Repair by Mend It Mark 3 weeks ago 27 minutes 28,034 views" },
{ id: '7W9Y46ku5Wk', title: "Kenwood KA-405 Amplifier Service \u0026 MORE than Full Load Test.", label: "Kenwood KA-405 Amplifier Service \u0026 MORE than Full Load Test. by Mend It Mark 1 month ago 27 minutes 58,507 views" },
{ id: 'Gzm3-_Fohkc', title: "Technics Amp repair with NO PARTS!", label: "Technics Amp repair with NO PARTS! by Mend It Mark 1 month ago 14 minutes, 9 seconds 146,734 views" },
];

    var box = makeBox(2, 2);
    box
        .append('div')
        .attr('class', 'title')
        .html('&#x1F4FC;<a href="https://www.youtube.com/feed/trending">YouTube Trending</a>')
    box = box
        .append('div')
        .attr('class', 'inside');
    var inside = box
        .append('div');
    var table = inside
        .append('table')
        .style('width', '80%')
        .style('margin', '0 auto');

    var count = 0;
    for (var video of data) {
        var row = table
            .append('tr');
        row
            .append('td')
            .append('a')
            .attr('href', "https://www.youtube.com/watch?v=" + video.id)
            .append('img')
            .attr('src', 'https://i.ytimg.com/vi/' + video.id + '/hqdefault.jpg')
            .style('width', (480 / 4) + 'px')
            .style('height', (360 / 4) + 'px')
            .style('text-align', 'right')
            .attr('title', video.label);
        row
            .append('td')
            .style('text-align', 'left')
            .html(++count + '<br/><a href="https://www.youtube.com/watch?v=' + video.id + '">' + video.title + '</a>');
    }
});

//////////////////////////////////////////////////

modules.push(function f1() {
	var html =  "<a href='https://www.formula1.com/en/racing/2023/Miami.html'><img src='https://www.formula1.com/content/dam/fom-website/races/2023/Miami_Grand_Prix.png' style='height:auto;width:auto;max-height:180px;max-width:180px;' /></a><br/><span style='font-size:85%'>7 May</span>";
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F3C1;<a href="https://www.formula1.com/en/racing/2023.html">Next F1 Race</a>')
	box = box
		.append('div')
		.attr('class', 'inside')
		.append('div')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function media() {
	var html = '<p style="font-weight:bold;padding:10px 0 0 0">Audiobooks</p><ul><li><a href="https://www.google.com/search?q=Audiobooks+-+The Turbulent Term of Tyke Tyler">The Turbulent Term of Tyke Tyler</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Around the World in 80 Days">Around the World in 80 Days</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Animal Farm">Animal Farm</a></li><li><a href="https://www.google.com/search?q=Audiobooks+-+Sherlock Holmes: A Study in Scarlet">Sherlock Holmes: A Study in Scarlet</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Books</p><ul><li><a href="https://www.google.com/search?q=Books+-+The Monkey\'s Paw (1902)">The Monkey\'s Paw (1902)</a></li><li><a href="https://www.google.com/search?q=Books+-+Fire Season (2011)">Fire Season (2011)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Films</p><ul><li><a href="https://www.google.com/search?q=Films+-+John Wick (2014)">John Wick (2014)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Whale (2022)">The Whale (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Gosford Park (2001)">Gosford Park (2001)</a></li><li><a href="https://www.google.com/search?q=Films+-+Dead Poets Society (1989)">Dead Poets Society (1989)</a></li><li><a href="https://www.google.com/search?q=Films+-+Sleepy Hollow (1999)">Sleepy Hollow (1999)</a></li><li><a href="https://www.google.com/search?q=Films+-+The Shawshank Redemption (1994)">The Shawshank Redemption (1994)</a></li><li><a href="https://www.google.com/search?q=Films+-+Glass Onion (2022)">Glass Onion (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Mean Creek (2004)">Mean Creek (2004)</a></li><li><a href="https://www.google.com/search?q=Films+-+Triangle of Sadness (2022)">Triangle of Sadness (2022)</a></li><li><a href="https://www.google.com/search?q=Films+-+Knives Out (2019)">Knives Out (2019)</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">Games</p><ul><li><a href="https://www.google.com/search?q=Games+-+Cyberpunk 2077">Cyberpunk 2077</a></li><li><a href="https://www.google.com/search?q=Games+-+Prison Architect">Prison Architect</a></li><li><a href="https://www.google.com/search?q=Games+-+Hitman WoA: Freelancer">Hitman WoA: Freelancer</a></li><li><a href="https://www.google.com/search?q=Games+-+Command & Conquer: Red Alert">Command & Conquer: Red Alert</a></li><li><a href="https://www.google.com/search?q=Games+-+100 Hidden Frogs">100 Hidden Frogs</a></li><li><a href="https://www.google.com/search?q=Games+-+Return to Monkey Island">Return to Monkey Island</a></li><li><a href="https://www.google.com/search?q=Games+-+Hitman 3">Hitman 3</a></li><li><a href="https://www.google.com/search?q=Games+-+Firewatch">Firewatch</a></li><li><a href="https://www.google.com/search?q=Games+-+Sniper Elite 4">Sniper Elite 4</a></li></ul><p style="font-weight:bold;padding:10px 0 0 0">TV</p><ul><li><a href="https://www.google.com/search?q=TV+-+Rise & Fall (S1)">Rise & Fall (S1)</a></li><li><a href="https://www.google.com/search?q=TV+-+The Cleaner (S2)">The Cleaner (S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+Clarkson\'s Farm (S2)">Clarkson\'s Farm (S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+How this Blind Girl… (S1)">How this Blind Girl… (S1)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S6)">Downton Abbey (S6)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S5)">Downton Abbey (S5)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S4)">Downton Abbey (S4)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S3)">Downton Abbey (S3)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S2)">Downton Abbey (S2)</a></li><li><a href="https://www.google.com/search?q=TV+-+Downton Abbey (S1)">Downton Abbey (S1)</a></li></ul>';
	var box = makeBox(2, 4);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F3AC;Recently Completed Media')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function singles() {

	function encode(text) {
		text = text.toLowerCase();
		text = text.replace(/&#39;/g, "'");
		text = text.replace(/&amp;/g, "and");
		return text;
    }

	var when = "05 May 2023 -  11 May 2023"
	var singlesData = {
		1: { Artist: "<a href='https://www.officialcharts.com/artist/28097/calvin-harris-ellie-goulding/'>calvin harris/ellie goulding</a>", Title: "<a href='https://www.officialcharts.com/search/singles/miracle/'>MIRACLE</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/41c-MdW3tfL._SL75_.jpg" },
2: { Artist: "<a href='https://www.officialcharts.com/artist/61748/david-kushner/'>david kushner</a>", Title: "<a href='https://www.officialcharts.com/search/singles/daylight/'>DAYLIGHT</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/51xqm8tKwsL._SL75_.jpg" },
3: { Artist: "<a href='https://www.officialcharts.com/artist/63953/libianca/'>libianca</a>", Title: "<a href='https://www.officialcharts.com/search/singles/people/'>PEOPLE</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/416HTM1LzFL._SL75_.jpg" },
4: { Artist: "<a href='https://www.officialcharts.com/artist/51369/lewis-capaldi/'>lewis capaldi</a>", Title: "<a href='https://www.officialcharts.com/search/singles/wish-you-the-best/'>WISH YOU THE BEST</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/316-f167OmL._SL75_.jpg" },
5: { Artist: "<a href='https://www.officialcharts.com/artist/58181/rema/'>rema</a>", Title: "<a href='https://www.officialcharts.com/search/singles/calm-down/'>CALM DOWN</a>", Image: "https://d35iaml2i6ojwd.cloudfront.net/img/small?url=https://m.media-amazon.com/images/I/41BGcu-vUtL._SL75_.jpg" },

	};

	var box = makeBox(2, 2);
	box
		.append('div')
		.attr('class', 'title')
		.append('a')
		.attr('href', 'https://www.officialcharts.com/charts/singles-chart/')
		.html('&#x1F3B5;UK Singles Chart')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div');
	inside
		.append('p')
		.html(when + '<br/>&nbsp;');
	var table = inside
		.append('table');
	var position = 0;
	for (var item of Object.keys(singlesData)) {
		var title = encode(singlesData[item].Title.match(/>([^<]+)</)[1]);
		var artist = encode(singlesData[item].Artist.match(/>([^<]+)</)[1]);
		var row = table
			.append('tr');
		row
			.append('td')
			.html(++position);
		row
			.append('td')
			.append('a')
			.attr('href', 'https://www.youtube.com/results?search_query=' + artist + ' - ' + title)
			.append('img')
			.attr('src', singlesData[item].Image);
		row = row
			.append('td')
			.style('text-align', 'left')
		row
			.append('a')
			.attr('href', 'https://google.com/search?q=' + singlesData[item].Title + ' - ' + singlesData[item].Artist)
			.html(singlesData[item].Title)
		row
			.append('span')
			.html('<br/>' + singlesData[item].Artist);
	}
});

//////////////////////////////////////////////////

modules.push(function vanguard() {

	var data = [{ number: 170.62, tooltip: "Thu, May 04, 2023<br/>£170.62"},
{ number: 171.92, tooltip: "Wed, May 03, 2023<br/>£171.92"},
{ number: 173.27, tooltip: "Tue, May 02, 2023<br/>£173.27"},
{ number: 173.62, tooltip: "Fri, Apr 28, 2023<br/>£173.62"},
{ number: 173.72, tooltip: "Thu, Apr 27, 2023<br/>£173.72"},
{ number: 171.70, tooltip: "Wed, Apr 26, 2023<br/>£171.70"},
{ number: 173.13, tooltip: "Tue, Apr 25, 2023<br/>£173.13"},
{ number: 174.57, tooltip: "Mon, Apr 24, 2023<br/>£174.57"},
{ number: 175.30, tooltip: "Fri, Apr 21, 2023<br/>£175.30"},
{ number: 174.67, tooltip: "Thu, Apr 20, 2023<br/>£174.67"},
{ number: 175.34, tooltip: "Wed, Apr 19, 2023<br/>£175.34"},
{ number: 176.00, tooltip: "Tue, Apr 18, 2023<br/>£176.00"},
{ number: 176.51, tooltip: "Mon, Apr 17, 2023<br/>£176.51"},
{ number: 175.17, tooltip: "Fri, Apr 14, 2023<br/>£175.17"},
{ number: 174.39, tooltip: "Thu, Apr 13, 2023<br/>£174.39"},
{ number: 173.11, tooltip: "Wed, Apr 12, 2023<br/>£173.11"},
{ number: 173.80, tooltip: "Tue, Apr 11, 2023<br/>£173.80"},
{ number: 172.94, tooltip: "Thu, Apr 06, 2023<br/>£172.94"},
{ number: 172.37, tooltip: "Wed, Apr 05, 2023<br/>£172.37"},
].reverse();

	var vanguardDates = {
		"Latest":      "Thu, May 04, 2023",
		"vs Day":      "Wed, May 03, 2023",
		"vs Week":     "Wed, Apr 26, 2023",
		"vs Month":    "Wed, Apr 05, 2023",
		"vs Year":     ""
	}

	var vanguardValues = {
		"Latest":      "£170.62/share",
		'vs Day':      "-0.76%",
		'vs Week':     "-0.63%",
		'vs Month':    "-1.02%",
		'vs Year':     "-1.20%"
	};

	var box = makeBox(3, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#128200;<a href="https://www.vanguardinvestor.co.uk">Vanguard</a>')
	box = box
		.append('div')
		.attr('class', 'inside');		
	var insideLeft = box
		.append('div')
		.style('display', 'inline')
		.style('position', 'absolute')
		.style('left', 0)
		.style('width', '37%');
	insideLeft
		.append('p')
		.append('a')
		.attr('href', 'https://www.vanguardinvestor.co.uk/investments/vanguard-ftse-global-all-cap-index-fund-gbp-acc')
		.html('FTSE Global All Cap<br/>Index Fund - Acc');
	insideLeft
		.append('p')
		.html('&nbsp;');
	var table = insideLeft
		.append('table');	
	
	for (var item of Object.keys(vanguardValues)) {
		var row = table
			.append('tr')
			.style('font-weight', item.startsWith("Latest") ? "bold" : "normal");
		if (vanguardDates[item].length > 0) {
			row
				.attr('class', 'ttt')
				.attr('data-tt', vanguardDates[item])
        }
		row
			.append('td')
			.style('text-align', 'left')
			.html(item + ':&nbsp;');
		row
			.append('td')
			.style('text-align', 'right')
			.attr('class', 'code')
			.html(vanguardValues[item]);
	}

	var insideRight = box
		.append('div')
		.style('display', 'inline')
		.style('position', 'absolute')
		.style('right', 0)
		.style('width', '66%');
	var chart = createLineChart(400, 150, insideRight, data, 2);
});

//////////////////////////////////////////////////

console.log('Error in crypto module: Sequence contains no elements');

//////////////////////////////////////////////////

modules.push(function moon() {
	var moonData = {
		Percent:  '99.9',
		Type:     '<a href="https://www.timeanddate.com/astronomy/moon/full-moon.html" title="Full Moon on the night between 5 May and 6 May">Full Moon</a>',
		Image:    'https://www.timeanddate.com/scripts/moon.php?i=0.999&p=3.970&r=0.399',
		Location: '11609021'
	}

	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#127769;<a href="https://www.timeanddate.com/moon/@' + moonData.Location + '">Moon</a>')
	box = box
		.append('div')
		.attr('class', 'inside');	
	var inside = box
		.append('div');
	inside
		.append('img')
		.attr('src', moonData.Image)
		.attr('width', '75%')
		.attr('height', '75%');		
	inside
		.append('p')
		.html(moonData.Type + ' (' + moonData.Percent + '%)');	
});

//////////////////////////////////////////////////

modules.push(function sun() {
	var sunData = {
		Rise:     '05:26',
		Set:      '20:39',
		Location: '11609021'
	};

	var box = makeBox(1, 1);	
	box
		.append('div')
		.attr('class', 'title')
		.html('&#128262;<a href="https://www.timeanddate.com/sun/@' + sunData.Location + '">Sun</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div');	
	var table = inside
		.append('table')
		.style('width', '150px');
	var row = table
		.append('tr')
		.style('font-size', '300%');
	row
		.append('td')
		.html('&#127748;')
	row
		.append('td')
		.html('&#127751;')
	var row = table
		.append('tr');
	row
		.append('td')
		.html('Rise')
	row
		.append('td')
		.html('Set')
var row = table
		.append('tr');
	row
		.append('td')
		.html(sunData.Rise)
	row
		.append('td')
		.html(sunData.Set)
});

//////////////////////////////////////////////////

modules.push(function word() {
	var wordData = {
		Word:       '',
		Definition: '<p><em>Eponymous</em> is used to describe something named for a person or group (as in “Merriam-Webster, an eponymous publishing company named for George and Charles Merriam and Noah Webster”), or a person or group whose name is used for something (as in “the company\'s eponymous founders”).</p>'
	}

	var clean = wordData.Definition.replace(/<[^>]+>/g, '');

	var box = makeBox(clean.length > 250 ? 2 : 1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F4DC;<a href="https://www.merriam-webster.com/word-of-the-day">Word of the Day</a>')
	box = box
		.append('div')
		.attr('class', 'inside');	
	var inside = box
		.append('div');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.append('a')
		.attr('href', 'https://www.merriam-webster.com/dictionary/' + wordData.Word)
		.text(wordData.Word);
	inside
		.append('div')
		.style('padding', '5px')
		.html(wordData.Definition);	
});

//////////////////////////////////////////////////

modules.push(function twitter() {
	var html =  '<table><tr><td style="text-align: right">1</td><td><a href="https://twitter.com/search?q=Dundee">Dundee</a></td></tr><tr><td style="text-align: right">2</td><td><a href="https://twitter.com/search?q=%23totp">#totp</a></td></tr><tr><td style="text-align: right">3</td><td><a href="https://twitter.com/search?q=%23MiamiGP">#MiamiGP</a></td></tr><tr><td style="text-align: right">4</td><td><a href="https://twitter.com/search?q=%23ElectionResults">#ElectionResults</a></td></tr><tr><td style="text-align: right">5</td><td><a href="https://twitter.com/search?q=%23ToryWipeout">#ToryWipeout</a></td></tr></table>';
	var title = 'United Kingdom';
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F426;<a href="https://twitter.com/explore/tabs/trending">Twitter Trending</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.style('text-align', 'center')
		.html(title);
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function twitter() {
	var html =  '<table><tr><td style="text-align: right">1</td><td><a href="https://twitter.com/search?q=%22Cinco+de+Mayo%22">Cinco de Mayo</a></td></tr><tr><td style="text-align: right">2</td><td><a href="https://twitter.com/search?q=Barr">Barr</a></td></tr><tr><td style="text-align: right">3</td><td><a href="https://twitter.com/search?q=%23SamSummerDitchDays">#SamSummerDitchDays</a></td></tr><tr><td style="text-align: right">4</td><td><a href="https://twitter.com/search?q=%23AEWRampage">#AEWRampage</a></td></tr><tr><td style="text-align: right">5</td><td><a href="https://twitter.com/search?q=%22Pretty+Mischievous%22">Pretty Mischievous</a></td></tr></table>';
	var title = 'United States';
	var box = makeBox(1, 1);
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F426;<a href="https://twitter.com/explore/tabs/trending">Twitter Trending</a>')
	box = box
		.append('div')
		.attr('class', 'inside');
	var inside = box
		.append('div')
		.attr('class', 'condensed')
		.style('text-align', 'left');
	inside
		.append('p')
		.style('font-weight', 'bold')
		.style('text-align', 'center')
		.html(title);
	inside
		.append('div')
		.style('text-align', 'left')
		.html(html);
});

//////////////////////////////////////////////////

modules.push(function astronauts() {
	var astronautsData = {
		Amount:      '10',
		CountryHtml: '<table><tr><td><img class="flag ttt" data-tt="usa" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-usa.jpg" /></td><td><img class="flag ttt" data-tt="russia" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-russia.jpg" /></td><td><img class="flag ttt" data-tt="china" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-china.jpg" /></td><td><img class="flag ttt" data-tt="germany" src="https://www.howmanypeopleareinspacerightnow.com/app/flags/flag-germany.jpg" /></td></tr><tr style="vertical-align:top"><td>3</td><td>3</td><td>3</td><td>1</td></tr></table>'
	};

	var box = makeBox(1, 1);	
	box
		.append('div')
		.attr('class', 'title')
		.html('&#x1F469;&#x200D;&#x1F680;<a href="https://www.howmanypeopleareinspacerightnow.com/">Astronauts</a>')
	box = box
		.append('div')
		.attr('class', 'inside')
		.append('div')
		.html("<p style='font-size:200%;font-weight:bold'>" + astronautsData.Amount + "</p><p>people are in space now.</p><p>&nbsp;</p>" + astronautsData.CountryHtml)
});

//////////////////////////////////////////////////



			createPage();

		</script>
	</body>
</html>